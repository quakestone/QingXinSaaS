{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\flowable\\definition\\model.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\flowable\\definition\\model.vue","mtime":1733705220542},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\babel.config.js","mtime":1733705220203},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9jaGVueGkvRGVza3RvcC9wcm8vUWluZ1hpblNhYVMvcWluZ3hpbnNhYXMtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CnZhciBfZGVmaW5pdGlvbiA9IHJlcXVpcmUoIkAvYXBpL2Zsb3dhYmxlL2RlZmluaXRpb24iKTsKdmFyIF9Qcm9jZXNzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2NvbXBvbmVudHMvUHJvY2VzcyIpKTsKdmFyIF92a2JlYXV0aWZ5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ2a2JlYXV0aWZ5IikpOwp2YXIgX2hpZ2hsaWdodCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiaGlnaGxpZ2h0LmpzIikpOwpyZXF1aXJlKCJoaWdobGlnaHQuanMvc3R5bGVzL2F0ZWxpZXItc2F2YW5uYS1kYXJrLmNzcyIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogIk1vZGVsIiwKICBjb21wb25lbnRzOiB7CiAgICBCcG1uTW9kZWw6IF9Qcm9jZXNzLmRlZmF1bHQsCiAgICB2a0JlYXV0aWZ5OiBfdmtiZWF1dGlmeS5kZWZhdWx0CiAgfSwKICAvLyDoh6rlrprkuYnmjIfku6QKICBkaXJlY3RpdmVzOiB7CiAgICBkZWVwOiB0cnVlLAogICAgaGlnaGxpZ2h0OiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoZWwsIGJpbmRpbmcpIHsKICAgICAgICB2YXIgdGFyZ2V0cyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvZGUnKTsKICAgICAgICB2YXIgdGFyZ2V0OwogICAgICAgIHZhciBpOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICB0YXJnZXQgPSB0YXJnZXRzW2ldOwogICAgICAgICAgaWYgKHR5cGVvZiBiaW5kaW5nLnZhbHVlID09PSAnc3RyaW5nJykgewogICAgICAgICAgICB0YXJnZXQudGV4dENvbnRlbnQgPSBiaW5kaW5nLnZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgX2hpZ2hsaWdodC5kZWZhdWx0LmhpZ2hsaWdodEJsb2NrKHRhcmdldCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBjb21wb25lbnRVcGRhdGVkOiBmdW5jdGlvbiBjb21wb25lbnRVcGRhdGVkKGVsLCBiaW5kaW5nKSB7CiAgICAgICAgdmFyIHRhcmdldHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdjb2RlJyk7CiAgICAgICAgdmFyIHRhcmdldDsKICAgICAgICB2YXIgaTsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0c1tpXTsKICAgICAgICAgIGlmICh0eXBlb2YgYmluZGluZy52YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgdGFyZ2V0LnRleHRDb250ZW50ID0gYmluZGluZy52YWx1ZTsKICAgICAgICAgICAgX2hpZ2hsaWdodC5kZWZhdWx0LmhpZ2hsaWdodEJsb2NrKHRhcmdldCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgeG1sOiAiIiwKICAgICAgLy8g5ZCO56uv5p+l6K+i5Yiw55qEeG1sCiAgICAgIG1vZGVsZXI6ICIiLAogICAgICBkYXRhRXhpdDogZmFsc2UsCiAgICAgIHhtbE9wZW46IGZhbHNlLAogICAgICB4bWxUaXRsZTogJycsCiAgICAgIHhtbERhdGE6ICcnCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBkZXBsb3lJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5ICYmIHRoaXMuJHJvdXRlLnF1ZXJ5LmRlcGxveUlkOwogICAgLy8gIOafpeivoua1geeoi3htbAogICAgaWYgKGRlcGxveUlkKSB7CiAgICAgIHRoaXMuZ2V0WG1sRGF0YShkZXBsb3lJZCk7CiAgICB9CiAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKiogeG1sIOaWh+S7tiAqL2dldFhtbERhdGE6IGZ1bmN0aW9uIGdldFhtbERhdGEoZGVwbG95SWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgLy8g5Y+R6YCB6K+35rGC77yM6I635Y+WeG1sCiAgICAgICgwLCBfZGVmaW5pdGlvbi5yZWFkWG1sKShkZXBsb3lJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMueG1sID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMubW9kZWxlciA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5L+d5a2YeG1sICovc2F2ZTogZnVuY3Rpb24gc2F2ZShkYXRhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgIG5hbWU6IGRhdGEucHJvY2Vzcy5uYW1lLAogICAgICAgIGNhdGVnb3J5OiBkYXRhLnByb2Nlc3MuY2F0ZWdvcnksCiAgICAgICAgeG1sOiBkYXRhLnhtbAogICAgICB9OwogICAgICAoMCwgX2RlZmluaXRpb24uc2F2ZVhtbCkocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuJG1vZGFsLm1zZ1N1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgLy8g5YWz6Zet5b2T5YmN5qCH562+6aG15bm26L+U5Zue5LiK5Liq6aG16Z2iCiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgIHBhdGg6ICIvZmxvd2FibGUvZGVmaW5pdGlvbiIsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICB0OiBEYXRlLm5vdygpCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpczIuJHRhYi5jbG9zZU9wZW5QYWdlKG9iaik7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDmjIflrprmtYHnqIvlip7nkIbkurrlkZjliJfooaggKi9nZXREYXRhTGlzdDogZnVuY3Rpb24gZ2V0RGF0YUxpc3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICAoMCwgX2RlZmluaXRpb24udXNlckxpc3QpKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLm1vZGVsZXJTdG9yZS51c2VyTGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgICAgKDAsIF9kZWZpbml0aW9uLnJvbGVMaXN0KSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy5tb2RlbGVyU3RvcmUucm9sZUxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICAgICgwLCBfZGVmaW5pdGlvbi5leHBMaXN0KSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy5tb2RlbGVyU3RvcmUuZXhwTGlzdCA9IHJlcy5kYXRhOwogICAgICAgIF90aGlzMy5kYXRhRXhpdCA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDlsZXnpLp4bWwgKi9zaG93WE1MOiBmdW5jdGlvbiBzaG93WE1MKHhtbERhdGEpIHsKICAgICAgdGhpcy54bWxUaXRsZSA9ICd4bWzmn6XnnIsnOwogICAgICB0aGlzLnhtbE9wZW4gPSB0cnVlOwogICAgICB0aGlzLnhtbERhdGEgPSBfdmtiZWF1dGlmeS5kZWZhdWx0LnhtbCh4bWxEYXRhKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["_definition","require","_Process","_interopRequireDefault","_vkbeautify","_highlight","name","components","BpmnModel","vkBeautify","directives","deep","highlight","bind","el","binding","targets","querySelectorAll","target","i","length","value","textContent","hljs","highlightBlock","componentUpdated","data","xml","modeler","dataExit","xmlOpen","xmlTitle","xmlData","created","deployId","$route","query","getXmlData","getDataList","methods","_this","readXml","then","res","save","_this2","params","process","category","saveXml","$modal","msgSuccess","msg","obj","path","t","Date","now","$tab","closeOpenPage","_this3","userList","modelerStore","roleList","expList","showXML"],"sources":["src/views/flowable/definition/model.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <bpmn-model\r\n      v-if=\"dataExit\"\r\n      :xml=\"xml\"\r\n      :is-view=\"false\"\r\n      @save=\"save\"\r\n      @showXML=\"showXML\"\r\n    />\r\n    <!--在线查看xml-->\r\n    <el-drawer :title=\"xmlTitle\" :modal=\"false\" direction=\"rtl\" :visible.sync=\"xmlOpen\" size=\"60%\">\r\n      <!-- 设置对话框内容高度 -->\r\n        <el-scrollbar>\r\n            <pre v-highlight=\"xmlData\"><code class=\"xml\"></code></pre>\r\n        </el-scrollbar>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {readXml, roleList, saveXml, userList,expList} from \"@/api/flowable/definition\";\r\nimport BpmnModel from '@/components/Process'\r\nimport vkBeautify from 'vkbeautify'\r\nimport hljs from 'highlight.js'\r\nimport 'highlight.js/styles/atelier-savanna-dark.css'\r\nexport default {\r\n  name: \"Model\",\r\n  components: {\r\n    BpmnModel,\r\n    vkBeautify\r\n  },\r\n  // 自定义指令\r\n  directives: {\r\n    deep: true,\r\n    highlight:{\r\n      deep: true,\r\n      bind: function bind(el, binding) {\r\n        const targets = el.querySelectorAll('code');\r\n        let target;\r\n        let i;\r\n        for (i = 0; i < targets.length; i += 1) {\r\n          target = targets[i];\r\n          if (typeof binding.value === 'string') {\r\n            target.textContent = binding.value;\r\n          }\r\n          hljs.highlightBlock(target);\r\n        }\r\n      },\r\n      componentUpdated: function componentUpdated(el, binding) {\r\n        const targets = el.querySelectorAll('code');\r\n        let target;\r\n        let i;\r\n        for (i = 0; i < targets.length; i += 1) {\r\n          target = targets[i];\r\n          if (typeof binding.value === 'string') {\r\n            target.textContent = binding.value;\r\n            hljs.highlightBlock(target);\r\n          }\r\n        }\r\n      },\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      xml: \"\", // 后端查询到的xml\r\n      modeler:\"\",\r\n      dataExit: false,\r\n      xmlOpen: false,\r\n      xmlTitle: '',\r\n      xmlData: '',\r\n    };\r\n  },\r\n  created () {\r\n    const deployId = this.$route.query && this.$route.query.deployId;\r\n    //  查询流程xml\r\n    if (deployId) {\r\n      this.getXmlData(deployId);\r\n    }\r\n    this.getDataList()\r\n  },\r\n  methods: {\r\n    /** xml 文件 */\r\n    getXmlData(deployId) {\r\n      // 发送请求，获取xml\r\n      readXml(deployId).then(res =>{\r\n        this.xml = res.data;\r\n        this.modeler = res.data\r\n      })\r\n    },\r\n    /** 保存xml */\r\n    save(data) {\r\n      const params = {\r\n        name: data.process.name,\r\n        category: data.process.category,\r\n        xml: data.xml\r\n      }\r\n      saveXml(params).then(res => {\r\n        this.$modal.msgSuccess(res.msg)\r\n        // 关闭当前标签页并返回上个页面\r\n        const obj = { path: \"/flowable/definition\", query: { t: Date.now()} };\r\n        this.$tab.closeOpenPage(obj);\r\n      })\r\n    },\r\n    /** 指定流程办理人员列表 */\r\n    getDataList() {\r\n      userList().then(res => {\r\n        this.modelerStore.userList = res.data;\r\n      })\r\n      roleList().then(res => {\r\n        this.modelerStore.roleList = res.data;\r\n      })\r\n      expList().then(res => {\r\n        this.modelerStore.expList = res.data;\r\n        this.dataExit = true;\r\n      });\r\n    },\r\n    /** 展示xml */\r\n    showXML(xmlData){\r\n      this.xmlTitle = 'xml查看';\r\n      this.xmlOpen = true;\r\n      this.xmlData = vkBeautify.xml(xmlData);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.content-box{\r\n  line-height: 10px;\r\n}\r\n// 修改对话框高度\r\n.showAll_dialog {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n  ::v-deep .el-dialog {\r\n    margin: 0 auto !important;\r\n    height: 80%;\r\n    overflow: hidden;\r\n    background-color: #ffffff;\r\n    .el-dialog__body {\r\n      position: absolute;\r\n      left: 0;\r\n      top: 54px;\r\n      bottom: 0;\r\n      right: 0;\r\n      z-index: 1;\r\n      overflow: hidden;\r\n      overflow-y: auto;\r\n      // 下边设置字体，我的需求是黑底白字\r\n      color: #ffffff;\r\n      padding: 0 15px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}