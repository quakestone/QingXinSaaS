{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\components\\Process\\viewer\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\components\\Process\\viewer\\index.vue","mtime":1733705220403},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\babel.config.js","mtime":1733705220203},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9jaGVueGkvRGVza3RvcC9wcm8vUWluZ1hpblNhYVMvcWluZ3hpbnNhYXMtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfcmVnZW5lcmF0b3JSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQzovVXNlcnMvY2hlbnhpL0Rlc2t0b3AvcHJvL1FpbmdYaW5TYWFTL3Fpbmd4aW5zYWFzLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3JlZ2VuZXJhdG9yUnVudGltZS5qcyIpKTsKdmFyIF9hc3luY1RvR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQzovVXNlcnMvY2hlbnhpL0Rlc2t0b3AvcHJvL1FpbmdYaW5TYWFTL3Fpbmd4aW5zYWFzLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiKSk7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IuZmluZC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLmZvci1lYWNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnZhciBfY29tbW9uID0gcmVxdWlyZSgiQC9jb21wb25lbnRzL1Byb2Nlc3MvY29tbW9uIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdDIgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogIkJwbW5WaWV3ZXIiLAogIC8qKiDnu4Tku7bkvKDlgLwgICovCiAgcHJvcHM6IHsKICAgIC8vIOWbnuaYvuaVsOaNruS8oOWAvAogICAgZmxvd0RhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9LAogICAgICByZXF1aXJlZDogZmFsc2UKICAgIH0sCiAgICBwcm9jSW5zSWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJwbW5WaWV3ZXI6IG51bGwsCiAgICAgIGZsb3dEZXRhaWw6IHt9LAogICAgICBsb2FkaW5nOiB0cnVlCiAgICB9OwogIH0sCiAgLyoqIOS8oOWAvOebkeWQrCAqLwogIHdhdGNoOiB7CiAgICBmbG93RGF0YTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbHVlKSB7CiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ld1ZhbHVlKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAvLyDnlJ/miJDlrp7kvosKICAgICAgICAgIHRoaXMuYnBtblZpZXdlciAmJiB0aGlzLmJwbW5WaWV3ZXIuZGVzdHJveSgpOwogICAgICAgICAgdGhpcy5icG1uVmlld2VyID0gbmV3IF9jb21tb24uQ3VzdG9tVmlld2VyKHsKICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLiRyZWZzLmZsb3dDYW52YXMsCiAgICAgICAgICAgIGhlaWdodDogJ2NhbGMoMTAwdmggLSAyMDBweCknCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMubG9hZEZsb3dDYW52YXMobmV3VmFsdWUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWKoOi9vea1geeoi+WbvueJhwogICAgbG9hZEZsb3dDYW52YXM6IGZ1bmN0aW9uIGxvYWRGbG93Q2FudmFzKGZsb3dEYXRhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKC8qI19fUFVSRV9fKi8oMCwgX3JlZ2VuZXJhdG9yUnVudGltZTIuZGVmYXVsdCkoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuICgwLCBfcmVnZW5lcmF0b3JSdW50aW1lMi5kZWZhdWx0KSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYnBtblZpZXdlci5pbXBvcnRYTUwoZmxvd0RhdGEueG1sRGF0YSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZml0Vmlld3BvcnQoKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGlmICghKGZsb3dEYXRhLm5vZGVEYXRhICE9PSB1bmRlZmluZWQgJiYgZmxvd0RhdGEubm9kZURhdGEubGVuZ3RoID4gMCAmJiBfdGhpcy5wcm9jSW5zSWQpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZmlsbENvbG9yKGZsb3dEYXRhLm5vZGVEYXRhKTsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0LnQwLm1lc3NhZ2UsIF9jb250ZXh0LnQwLndhcm5pbmdzKTsKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTBdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOiuqeWbvuiDveiHqumAguW6lOWxj+W5lQogICAgZml0Vmlld3BvcnQ6IGZ1bmN0aW9uIGZpdFZpZXdwb3J0KCkgewogICAgICB0aGlzLnpvb20gPSB0aGlzLmJwbW5WaWV3ZXIuZ2V0KCdjYW52YXMnKS56b29tKCJmaXQtdmlld3BvcnQiLCAiYXV0byIpOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmlL7lpKfnvKnlsI8KICAgIHpvb21WaWV3cG9ydDogZnVuY3Rpb24gem9vbVZpZXdwb3J0KCkgewogICAgICB2YXIgem9vbUluID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0cnVlOwogICAgICB0aGlzLnpvb20gPSB0aGlzLmJwbW5WaWV3ZXIuZ2V0KCdjYW52YXMnKS56b29tKCk7CiAgICAgIHRoaXMuem9vbSArPSB6b29tSW4gPyAwLjEgOiAtMC4xOwogICAgICBpZiAodGhpcy56b29tID49IDAuMikgdGhpcy5icG1uVmlld2VyLmdldCgnY2FudmFzJykuem9vbSh0aGlzLnpvb20pOwogICAgfSwKICAgIC8vIOiuvue9rumrmOS6ruminOiJsueahAogICAgZmlsbENvbG9yOiBmdW5jdGlvbiBmaWxsQ29sb3Iobm9kZURhdGEpIHsKICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuYnBtblZpZXdlci5nZXQoJ2NhbnZhcycpOwogICAgICB0aGlzLmJwbW5WaWV3ZXIuZ2V0RGVmaW5pdGlvbnMoKS5yb290RWxlbWVudHNbMF0uZmxvd0VsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICB2YXIgY29tcGxldGVUYXNrID0gbm9kZURhdGEuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgICAgcmV0dXJuIG0ua2V5ID09PSBuLmlkOwogICAgICAgIH0pOwogICAgICAgIHZhciB0b2RvVGFzayA9IG5vZGVEYXRhLmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIHJldHVybiAhbS5jb21wbGV0ZWQ7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGVuZFRhc2sgPSBub2RlRGF0YVtub2RlRGF0YS5sZW5ndGggLSAxXTsKICAgICAgICBpZiAobi4kdHlwZSA9PT0gJ2JwbW46VXNlclRhc2snKSB7CiAgICAgICAgICBpZiAoY29tcGxldGVUYXNrKSB7CiAgICAgICAgICAgIHZhciBfbiRvdXRnb2luZzsKICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihuLmlkLCBjb21wbGV0ZVRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgKF9uJG91dGdvaW5nID0gbi5vdXRnb2luZykgPT09IG51bGwgfHwgX24kb3V0Z29pbmcgPT09IHZvaWQgMCB8fCBfbiRvdXRnb2luZy5mb3JFYWNoKGZ1bmN0aW9uIChubikgewogICAgICAgICAgICAgIHZhciB0YXJnZXRUYXNrID0gbm9kZURhdGEuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG0ua2V5ID09PSBubi50YXJnZXRSZWYuaWQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKHRhcmdldFRhc2spIHsKICAgICAgICAgICAgICAgIGlmICh0b2RvVGFzayAmJiBjb21wbGV0ZVRhc2sua2V5ID09PSB0b2RvVGFzay5rZXkgJiYgIXRvZG9UYXNrLmNvbXBsZXRlZCkgewogICAgICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLmlkLCB0b2RvVGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLnRhcmdldFJlZi5pZCwgdG9kb1Rhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobm4uaWQsIHRhcmdldFRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi50YXJnZXRSZWYuaWQsIHRhcmdldFRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyDmjpLku5bnvZHlhbMKICAgICAgICBlbHNlIGlmIChuLiR0eXBlID09PSAnYnBtbjpFeGNsdXNpdmVHYXRld2F5JykgewogICAgICAgICAgaWYgKGNvbXBsZXRlVGFzaykgewogICAgICAgICAgICB2YXIgX24kb3V0Z29pbmcyOwogICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG4uaWQsIGNvbXBsZXRlVGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAoX24kb3V0Z29pbmcyID0gbi5vdXRnb2luZykgPT09IG51bGwgfHwgX24kb3V0Z29pbmcyID09PSB2b2lkIDAgfHwgX24kb3V0Z29pbmcyLmZvckVhY2goZnVuY3Rpb24gKG5uKSB7CiAgICAgICAgICAgICAgdmFyIHRhcmdldFRhc2sgPSBub2RlRGF0YS5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbS5rZXkgPT09IG5uLnRhcmdldFJlZi5pZDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAodGFyZ2V0VGFzaykgewogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgdGFyZ2V0VGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi50YXJnZXRSZWYuaWQsIHRhcmdldFRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyDlubbooYznvZHlhbMKICAgICAgICBlbHNlIGlmIChuLiR0eXBlID09PSAnYnBtbjpQYXJhbGxlbEdhdGV3YXknKSB7CiAgICAgICAgICBpZiAoY29tcGxldGVUYXNrKSB7CiAgICAgICAgICAgIHZhciBfbiRvdXRnb2luZzM7CiAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobi5pZCwgY29tcGxldGVUYXNrLmNvbXBsZXRlZCA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7CiAgICAgICAgICAgIChfbiRvdXRnb2luZzMgPSBuLm91dGdvaW5nKSA9PT0gbnVsbCB8fCBfbiRvdXRnb2luZzMgPT09IHZvaWQgMCB8fCBfbiRvdXRnb2luZzMuZm9yRWFjaChmdW5jdGlvbiAobm4pIHsKICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGFzayA9IG5vZGVEYXRhLmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgIHJldHVybiBtLmtleSA9PT0gbm4udGFyZ2V0UmVmLmlkOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmICh0YXJnZXRUYXNrKSB7CiAgICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLmlkLCB0YXJnZXRUYXNrLmNvbXBsZXRlZCA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7CiAgICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLnRhcmdldFJlZi5pZCwgdGFyZ2V0VGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChuLiR0eXBlID09PSAnYnBtbjpTdGFydEV2ZW50JykgewogICAgICAgICAgbi5vdXRnb2luZy5mb3JFYWNoKGZ1bmN0aW9uIChubikgewogICAgICAgICAgICB2YXIgY29tcGxldGVUYXNrID0gbm9kZURhdGEuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgIHJldHVybiBtLmtleSA9PT0gbm4udGFyZ2V0UmVmLmlkOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKGNvbXBsZXRlVGFzaykgewogICAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobm4uaWQsICdoaWdobGlnaHQnKTsKICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG4uaWQsICdoaWdobGlnaHQnKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAobi4kdHlwZSA9PT0gJ2JwbW46RW5kRXZlbnQnKSB7CiAgICAgICAgICBpZiAoZW5kVGFzay5rZXkgPT09IG4uaWQgJiYgZW5kVGFzay5jb21wbGV0ZWQpIHsKICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihuLmlkLCAnaGlnaGxpZ2h0Jyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["_common","require","name","props","flowData","type","Object","default","required","procInsId","String","data","bpmnViewer","flowDetail","loading","watch","handler","newValue","keys","length","destroy","BpmnViewer","container","$refs","flowCanvas","height","loadFlowCanvas","created","methods","_this","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","wrap","_callee$","_context","prev","next","importXML","xmlData","fitViewport","nodeData","undefined","fillColor","t0","console","error","message","warnings","stop","zoom","get","zoomViewport","zoomIn","arguments","canvas","getDefinitions","rootElements","flowElements","forEach","n","completeTask","find","m","key","id","todoTask","completed","endTask","$type","_n$outgoing","addMarker","outgoing","nn","targetTask","targetRef","_n$outgoing2","_n$outgoing3"],"sources":["src/components/Process/viewer/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"containers\">\r\n    <el-container style=\"align-items: stretch\">\r\n      <el-main class=\"flow-viewer\">\r\n        <div class=\"process-status\">\r\n          <span class=\"intro\">状态：</span>\r\n          <div class=\"finish\">已办理</div>\r\n          <div class=\"processing\">处理中</div>\r\n          <div class=\"todo\">未进行</div>\r\n        </div>\r\n        <!-- 流程图显示 -->\r\n        <div v-loading=\"loading\" class=\"canvas\" ref=\"flowCanvas\"></div>\r\n        <!--  按钮区域  -->\r\n        <el-button-group class=\"button-group\">\r\n          <el-tooltip effect=\"dark\" content=\"适中\" placement=\"bottom\">\r\n            <el-button size=\"small\" icon=\"el-icon-rank\" @click=\"fitViewport\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"dark\" content=\"放大\" placement=\"bottom\">\r\n            <el-button size=\"small\" icon=\"el-icon-zoom-in\" @click=\"zoomViewport(true)\" />\r\n          </el-tooltip>\r\n          <el-tooltip effect=\"dark\" content=\"缩小\" placement=\"bottom\">\r\n            <el-button size=\"small\" icon=\"el-icon-zoom-out\" @click=\"zoomViewport(false)\" />\r\n          </el-tooltip>\r\n        </el-button-group>\r\n      </el-main>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { CustomViewer as BpmnViewer } from \"@/components/Process/common\";\r\nexport default {\r\n  name: \"BpmnViewer\",\r\n  /** 组件传值  */\r\n  props: {\r\n    // 回显数据传值\r\n    flowData: {\r\n      type: Object,\r\n      default: () => {\r\n      },\r\n      required: false\r\n    },\r\n    procInsId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n       bpmnViewer: null,\r\n       flowDetail: {},\r\n       loading: true,\r\n    }\r\n  },\r\n  /** 传值监听 */\r\n  watch: {\r\n    flowData: {\r\n      handler(newValue) {\r\n        if (Object.keys(newValue).length > 0) {\r\n          // 生成实例\r\n          this.bpmnViewer && this.bpmnViewer.destroy();\r\n          this.bpmnViewer = new BpmnViewer({\r\n            container: this.$refs.flowCanvas,\r\n            height: 'calc(100vh - 200px)',\r\n          });\r\n          this.loadFlowCanvas(newValue);\r\n        }\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n\r\n  },\r\n  methods: {\r\n    // 加载流程图片\r\n    async loadFlowCanvas(flowData) {\r\n      try {\r\n        await this.bpmnViewer.importXML(flowData.xmlData);\r\n        await this.fitViewport();\r\n        // 流程线高亮设置\r\n        if (flowData.nodeData !== undefined && flowData.nodeData.length > 0 && this.procInsId) {\r\n          await this.fillColor(flowData.nodeData);\r\n        }\r\n      } catch (err) {\r\n        console.error(err.message, err.warnings)\r\n      }\r\n    },\r\n\r\n    // 让图能自适应屏幕\r\n    fitViewport() {\r\n      this.zoom = this.bpmnViewer.get('canvas').zoom(\"fit-viewport\", \"auto\");\r\n      this.loading = false;\r\n    },\r\n\r\n    // 放大缩小\r\n    zoomViewport(zoomIn = true) {\r\n      this.zoom = this.bpmnViewer.get('canvas').zoom()\r\n      this.zoom += (zoomIn ? 0.1 : -0.1)\r\n      if (this.zoom >= 0.2) this.bpmnViewer.get('canvas').zoom(this.zoom);\r\n    },\r\n\r\n    // 设置高亮颜色的\r\n    fillColor(nodeData) {\r\n      const canvas = this.bpmnViewer.get('canvas')\r\n      this.bpmnViewer.getDefinitions().rootElements[0].flowElements.forEach(n => {\r\n        const completeTask = nodeData.find(m => m.key === n.id)\r\n        const todoTask = nodeData.find(m => !m.completed)\r\n        const endTask = nodeData[nodeData.length - 1]\r\n        if (n.$type === 'bpmn:UserTask') {\r\n          if (completeTask) {\r\n            canvas.addMarker(n.id, completeTask.completed ? 'highlight' : 'highlight-todo')\r\n            n.outgoing?.forEach(nn => {\r\n              const targetTask = nodeData.find(m => m.key === nn.targetRef.id)\r\n              if (targetTask) {\r\n                if (todoTask && completeTask.key === todoTask.key && !todoTask.completed) {\r\n                  canvas.addMarker(nn.id, todoTask.completed ? 'highlight' : 'highlight-todo')\r\n                  canvas.addMarker(nn.targetRef.id, todoTask.completed ? 'highlight' : 'highlight-todo')\r\n                } else {\r\n                  canvas.addMarker(nn.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                  canvas.addMarker(nn.targetRef.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n        // 排他网关\r\n        else if (n.$type === 'bpmn:ExclusiveGateway') {\r\n          if (completeTask) {\r\n            canvas.addMarker(n.id, completeTask.completed ? 'highlight' : 'highlight-todo')\r\n            n.outgoing?.forEach(nn => {\r\n              const targetTask = nodeData.find(m => m.key === nn.targetRef.id)\r\n              if (targetTask) {\r\n\r\n                canvas.addMarker(nn.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                canvas.addMarker(nn.targetRef.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n              }\r\n            })\r\n          }\r\n        }\r\n        // 并行网关\r\n        else if (n.$type === 'bpmn:ParallelGateway') {\r\n          if (completeTask) {\r\n            canvas.addMarker(n.id, completeTask.completed ? 'highlight' : 'highlight-todo')\r\n            n.outgoing?.forEach(nn => {\r\n              const targetTask = nodeData.find(m => m.key === nn.targetRef.id)\r\n              if (targetTask) {\r\n                canvas.addMarker(nn.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                canvas.addMarker(nn.targetRef.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n              }\r\n            })\r\n          }\r\n        } else if (n.$type === 'bpmn:StartEvent') {\r\n          n.outgoing.forEach(nn => {\r\n            const completeTask = nodeData.find(m => m.key === nn.targetRef.id)\r\n            if (completeTask) {\r\n              canvas.addMarker(nn.id, 'highlight')\r\n              canvas.addMarker(n.id, 'highlight')\r\n              return;\r\n            }\r\n          })\r\n        } else if (n.$type === 'bpmn:EndEvent') {\r\n          if (endTask.key === n.id && endTask.completed) {\r\n            canvas.addMarker(n.id, 'highlight')\r\n            return;\r\n          }\r\n        }\r\n      })\r\n    }\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../style/flow-viewer.scss\";\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}