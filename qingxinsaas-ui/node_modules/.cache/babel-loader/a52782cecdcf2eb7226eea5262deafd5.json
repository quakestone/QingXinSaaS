{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\components\\tinymce\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\components\\tinymce\\index.vue","mtime":1733705220437},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\babel.config.js","mtime":1733705220203},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9jaGVueGkvRGVza3RvcC9wcm8vUWluZ1hpblNhYVMvcWluZ3hpbnNhYXMtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiKTsKdmFyIF9sb2FkVGlueW1jZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC91dGlscy9sb2FkVGlueW1jZSIpKTsKdmFyIF9jb25maWcgPSByZXF1aXJlKCIuL2NvbmZpZyIpOwp2YXIgX3Rocm90dGxlRGVib3VuY2UgPSByZXF1aXJlKCJ0aHJvdHRsZS1kZWJvdW5jZSIpOwovLwovLwovLwovLwoKdmFyIG51bSA9IDE7CnZhciBfZGVmYXVsdDIgPSBleHBvcnRzLmRlZmF1bHQgPSB7CiAgcHJvcHM6IHsKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgbnVtID09PSAxMDAwMCAmJiAobnVtID0gMSk7CiAgICAgICAgcmV0dXJuICJ0aW55bWNlIi5jb25jYXQoK25ldyBEYXRlKCkpLmNvbmNhdChudW0rKyk7CiAgICAgIH0KICAgIH0sCiAgICB2YWx1ZTogewogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpbnltY2VJZDogdGhpcy5pZAogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgKDAsIF9sb2FkVGlueW1jZS5kZWZhdWx0KShmdW5jdGlvbiAodGlueW1jZSkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2xvYmFsLXJlcXVpcmUKICAgICAgcmVxdWlyZSgnLi96aF9DTicpOwogICAgICB2YXIgY29uZiA9IHsKICAgICAgICBzZWxlY3RvcjogIiMiLmNvbmNhdChfdGhpcy50aW55bWNlSWQpLAogICAgICAgIGxhbmd1YWdlOiAnemhfQ04nLAogICAgICAgIG1lbnViYXI6ICdmaWxlIGVkaXQgaW5zZXJ0IHZpZXcgZm9ybWF0IHRhYmxlJywKICAgICAgICBwbHVnaW5zOiBfY29uZmlnLnBsdWdpbnMsCiAgICAgICAgdG9vbGJhcjogX2NvbmZpZy50b29sYmFyLAogICAgICAgIGhlaWdodDogMzAwLAogICAgICAgIGJyYW5kaW5nOiBmYWxzZSwKICAgICAgICBvYmplY3RfcmVzaXppbmc6IGZhbHNlLAogICAgICAgIGVuZF9jb250YWluZXJfb25fZW1wdHlfYmxvY2s6IHRydWUsCiAgICAgICAgcG93ZXJwYXN0ZV93b3JkX2ltcG9ydDogJ2NsZWFuJywKICAgICAgICBjb2RlX2RpYWxvZ19oZWlnaHQ6IDQ1MCwKICAgICAgICBjb2RlX2RpYWxvZ193aWR0aDogMTAwMCwKICAgICAgICBhZHZsaXN0X2J1bGxldF9zdHlsZXM6ICdzcXVhcmUnLAogICAgICAgIGFkdmxpc3RfbnVtYmVyX3N0eWxlczogJ2RlZmF1bHQnLAogICAgICAgIGRlZmF1bHRfbGlua190YXJnZXQ6ICdfYmxhbmsnLAogICAgICAgIGxpbmtfdGl0bGU6IGZhbHNlLAogICAgICAgIG5vbmJyZWFraW5nX2ZvcmNlX3RhYjogdHJ1ZQogICAgICB9OwogICAgICBjb25mID0gT2JqZWN0LmFzc2lnbihjb25mLCBfdGhpcy4kYXR0cnMpOwogICAgICBjb25mLmluaXRfaW5zdGFuY2VfY2FsbGJhY2sgPSBmdW5jdGlvbiAoZWRpdG9yKSB7CiAgICAgICAgaWYgKF90aGlzLnZhbHVlKSBlZGl0b3Iuc2V0Q29udGVudChfdGhpcy52YWx1ZSk7CiAgICAgICAgX3RoaXMudk1vZGVsKGVkaXRvcik7CiAgICAgIH07CiAgICAgIHRpbnltY2UuaW5pdChjb25mKTsKICAgIH0pOwogIH0sCiAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICB0aGlzLmRlc3Ryb3lUaW55bWNlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB2TW9kZWw6IGZ1bmN0aW9uIHZNb2RlbChlZGl0b3IpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIC8vIOaOp+WItui/nue7reWGmeWFpeaXtnNldENvbnRlbnTnmoTop6blj5HpopHnjocKICAgICAgdmFyIGRlYm91bmNlU2V0Q29udGVudCA9ICgwLCBfdGhyb3R0bGVEZWJvdW5jZS5kZWJvdW5jZSkoMjUwLCBlZGl0b3Iuc2V0Q29udGVudCk7CiAgICAgIHRoaXMuJHdhdGNoKCd2YWx1ZScsIGZ1bmN0aW9uICh2YWwsIHByZXZWYWwpIHsKICAgICAgICBpZiAoZWRpdG9yICYmIHZhbCAhPT0gcHJldlZhbCAmJiB2YWwgIT09IGVkaXRvci5nZXRDb250ZW50KCkpIHsKICAgICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnc3RyaW5nJykgdmFsID0gdmFsLnRvU3RyaW5nKCk7CiAgICAgICAgICBkZWJvdW5jZVNldENvbnRlbnQuY2FsbChlZGl0b3IsIHZhbCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgZWRpdG9yLm9uKCdjaGFuZ2Uga2V5dXAgdW5kbyByZWRvJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kZW1pdCgnaW5wdXQnLCBlZGl0b3IuZ2V0Q29udGVudCgpKTsKICAgICAgfSk7CiAgICB9LAogICAgZGVzdHJveVRpbnltY2U6IGZ1bmN0aW9uIGRlc3Ryb3lUaW55bWNlKCkgewogICAgICBpZiAoIXdpbmRvdy50aW55bWNlKSByZXR1cm47CiAgICAgIHZhciB0aW55bWNlID0gd2luZG93LnRpbnltY2UuZ2V0KHRoaXMudGlueW1jZUlkKTsKICAgICAgaWYgKHRpbnltY2UpIHsKICAgICAgICB0aW55bWNlLmRlc3Ryb3koKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["_loadTinymce","_interopRequireDefault","require","_config","_throttleDebounce","num","_default2","exports","default","props","id","type","String","concat","Date","value","data","tinymceId","mounted","_this","loadTinymce","tinymce","conf","selector","language","menubar","plugins","toolbar","height","branding","object_resizing","end_container_on_empty_block","powerpaste_word_import","code_dialog_height","code_dialog_width","advlist_bullet_styles","advlist_number_styles","default_link_target","link_title","nonbreaking_force_tab","Object","assign","$attrs","init_instance_callback","editor","setContent","vModel","init","destroyed","destroyTinymce","methods","_this2","debounceSetContent","debounce","$watch","val","prevVal","getContent","toString","call","on","$emit","window","get","destroy"],"sources":["src/components/tinymce/index.vue"],"sourcesContent":["<template>\r\n  <textarea :id=\"tinymceId\" style=\"visibility: hidden\" />\r\n</template>\r\n\r\n<script>\r\nimport loadTinymce from '@/utils/loadTinymce'\r\nimport { plugins, toolbar } from './config'\r\nimport { debounce } from 'throttle-debounce'\r\n\r\nlet num = 1\r\n\r\nexport default {\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: () => {\r\n        num === 10000 && (num = 1)\r\n        return `tinymce${+new Date()}${num++}`\r\n      }\r\n    },\r\n    value: {\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      tinymceId: this.id\r\n    }\r\n  },\r\n  mounted() {\r\n    loadTinymce(tinymce => {\r\n      // eslint-disable-next-line global-require\r\n      require('./zh_CN')\r\n      let conf = {\r\n        selector: `#${this.tinymceId}`,\r\n        language: 'zh_CN',\r\n        menubar: 'file edit insert view format table',\r\n        plugins,\r\n        toolbar,\r\n        height: 300,\r\n        branding: false,\r\n        object_resizing: false,\r\n        end_container_on_empty_block: true,\r\n        powerpaste_word_import: 'clean',\r\n        code_dialog_height: 450,\r\n        code_dialog_width: 1000,\r\n        advlist_bullet_styles: 'square',\r\n        advlist_number_styles: 'default',\r\n        default_link_target: '_blank',\r\n        link_title: false,\r\n        nonbreaking_force_tab: true\r\n      }\r\n      conf = Object.assign(conf, this.$attrs)\r\n      conf.init_instance_callback = editor => {\r\n        if (this.value) editor.setContent(this.value)\r\n        this.vModel(editor)\r\n      }\r\n      tinymce.init(conf)\r\n    })\r\n  },\r\n  destroyed() {\r\n    this.destroyTinymce()\r\n  },\r\n  methods: {\r\n    vModel(editor) {\r\n      // 控制连续写入时setContent的触发频率\r\n      const debounceSetContent = debounce(250, editor.setContent)\r\n      this.$watch('value', (val, prevVal) => {\r\n        if (editor && val !== prevVal && val !== editor.getContent()) {\r\n          if (typeof val !== 'string') val = val.toString()\r\n          debounceSetContent.call(editor, val)\r\n        }\r\n      })\r\n\r\n      editor.on('change keyup undo redo', () => {\r\n        this.$emit('input', editor.getContent())\r\n      })\r\n    },\r\n    destroyTinymce() {\r\n      if (!window.tinymce) return\r\n      const tinymce = window.tinymce.get(this.tinymceId)\r\n      if (tinymce) {\r\n        tinymce.destroy()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;;;;;;;;;AAKA,IAAAA,YAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,iBAAA,GAAAF,OAAA;;;;;;AAEA,IAAAG,GAAA;AAAA,IAAAC,SAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,KAAA;IACAC,EAAA;MACAC,IAAA,EAAAC,MAAA;MACAJ,OAAA,WAAAA,SAAA;QACAH,GAAA,eAAAA,GAAA;QACA,iBAAAQ,MAAA,MAAAC,IAAA,IAAAD,MAAA,CAAAR,GAAA;MACA;IACA;IACAU,KAAA;MACAP,OAAA;IACA;EACA;EACAQ,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA,OAAAP;IACA;EACA;EACAQ,OAAA,WAAAA,QAAA;IAAA,IAAAC,KAAA;IACA,IAAAC,oBAAA,YAAAC,OAAA;MACA;MACAnB,OAAA;MACA,IAAAoB,IAAA;QACAC,QAAA,MAAAV,MAAA,CAAAM,KAAA,CAAAF,SAAA;QACAO,QAAA;QACAC,OAAA;QACAC,OAAA,EAAAA,eAAA;QACAC,OAAA,EAAAA,eAAA;QACAC,MAAA;QACAC,QAAA;QACAC,eAAA;QACAC,4BAAA;QACAC,sBAAA;QACAC,kBAAA;QACAC,iBAAA;QACAC,qBAAA;QACAC,qBAAA;QACAC,mBAAA;QACAC,UAAA;QACAC,qBAAA;MACA;MACAjB,IAAA,GAAAkB,MAAA,CAAAC,MAAA,CAAAnB,IAAA,EAAAH,KAAA,CAAAuB,MAAA;MACApB,IAAA,CAAAqB,sBAAA,aAAAC,MAAA;QACA,IAAAzB,KAAA,CAAAJ,KAAA,EAAA6B,MAAA,CAAAC,UAAA,CAAA1B,KAAA,CAAAJ,KAAA;QACAI,KAAA,CAAA2B,MAAA,CAAAF,MAAA;MACA;MACAvB,OAAA,CAAA0B,IAAA,CAAAzB,IAAA;IACA;EACA;EACA0B,SAAA,WAAAA,UAAA;IACA,KAAAC,cAAA;EACA;EACAC,OAAA;IACAJ,MAAA,WAAAA,OAAAF,MAAA;MAAA,IAAAO,MAAA;MACA;MACA,IAAAC,kBAAA,OAAAC,0BAAA,OAAAT,MAAA,CAAAC,UAAA;MACA,KAAAS,MAAA,oBAAAC,GAAA,EAAAC,OAAA;QACA,IAAAZ,MAAA,IAAAW,GAAA,KAAAC,OAAA,IAAAD,GAAA,KAAAX,MAAA,CAAAa,UAAA;UACA,WAAAF,GAAA,eAAAA,GAAA,GAAAA,GAAA,CAAAG,QAAA;UACAN,kBAAA,CAAAO,IAAA,CAAAf,MAAA,EAAAW,GAAA;QACA;MACA;MAEAX,MAAA,CAAAgB,EAAA;QACAT,MAAA,CAAAU,KAAA,UAAAjB,MAAA,CAAAa,UAAA;MACA;IACA;IACAR,cAAA,WAAAA,eAAA;MACA,KAAAa,MAAA,CAAAzC,OAAA;MACA,IAAAA,OAAA,GAAAyC,MAAA,CAAAzC,OAAA,CAAA0C,GAAA,MAAA9C,SAAA;MACA,IAAAI,OAAA;QACAA,OAAA,CAAA2C,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}