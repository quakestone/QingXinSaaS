{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\tool\\build\\JsonDrawer.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\tool\\build\\JsonDrawer.vue","mtime":1733705220591},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\babel.config.js","mtime":1733705220203},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9jaGVueGkvRGVza3RvcC9wcm8vUWluZ1hpblNhYVMvcWluZ3hpbnNhYXMtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwp2YXIgX3V0aWxzID0gcmVxdWlyZSgiQC91dGlscyIpOwp2YXIgX2NsaXBib2FyZCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiY2xpcGJvYXJkIikpOwp2YXIgX2ZpbGVTYXZlciA9IHJlcXVpcmUoImZpbGUtc2F2ZXIiKTsKdmFyIF9sb2FkTW9uYWNvID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3V0aWxzL2xvYWRNb25hY28iKSk7CnZhciBfbG9hZEJlYXV0aWZpZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvdXRpbHMvbG9hZEJlYXV0aWZpZXIiKSk7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgp2YXIgYmVhdXRpZmllcjsKdmFyIG1vbmFjbzsKdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7CiAgICBqc29uU3RyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjb21wdXRlZDoge30sCiAgd2F0Y2g6IHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7fSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5wcmV2ZW50RGVmYXVsdFNhdmUpOwogICAgdmFyIGNsaXBib2FyZCA9IG5ldyBfY2xpcGJvYXJkLmRlZmF1bHQoJy5jb3B5LWpzb24tYnRuJywgewogICAgICB0ZXh0OiBmdW5jdGlvbiB0ZXh0KHRyaWdnZXIpIHsKICAgICAgICBfdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgIG1lc3NhZ2U6ICfku6PnoIHlt7LlpI3liLbliLDliarliIfmnb/vvIzlj6/nspjotLTjgIInLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIF90aGlzLmJlYXV0aWZpZXJKc29uOwogICAgICB9CiAgICB9KTsKICAgIGNsaXBib2FyZC5vbignZXJyb3InLCBmdW5jdGlvbiAoZSkgewogICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign5Luj56CB5aSN5Yi25aSx6LSlJyk7CiAgICB9KTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMucHJldmVudERlZmF1bHRTYXZlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHByZXZlbnREZWZhdWx0U2F2ZTogZnVuY3Rpb24gcHJldmVudERlZmF1bHRTYXZlKGUpIHsKICAgICAgaWYgKGUua2V5ID09PSAncycgJiYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAgb25PcGVuOiBmdW5jdGlvbiBvbk9wZW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICAoMCwgX2xvYWRCZWF1dGlmaWVyLmRlZmF1bHQpKGZ1bmN0aW9uIChidGYpIHsKICAgICAgICBiZWF1dGlmaWVyID0gYnRmOwogICAgICAgIF90aGlzMi5iZWF1dGlmaWVySnNvbiA9IGJlYXV0aWZpZXIuanMoX3RoaXMyLmpzb25TdHIsIF91dGlscy5iZWF1dGlmaWVyQ29uZi5qcyk7CiAgICAgICAgKDAsIF9sb2FkTW9uYWNvLmRlZmF1bHQpKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgIG1vbmFjbyA9IHZhbDsKICAgICAgICAgIF90aGlzMi5zZXRFZGl0b3JWYWx1ZSgnZWRpdG9ySnNvbicsIF90aGlzMi5iZWF1dGlmaWVySnNvbik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7fSwKICAgIHNldEVkaXRvclZhbHVlOiBmdW5jdGlvbiBzZXRFZGl0b3JWYWx1ZShpZCwgY29kZVN0cikgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgaWYgKHRoaXMuanNvbkVkaXRvcikgewogICAgICAgIHRoaXMuanNvbkVkaXRvci5zZXRWYWx1ZShjb2RlU3RyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmpzb25FZGl0b3IgPSBtb25hY28uZWRpdG9yLmNyZWF0ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCksIHsKICAgICAgICAgIHZhbHVlOiBjb2RlU3RyLAogICAgICAgICAgdGhlbWU6ICd2cy1kYXJrJywKICAgICAgICAgIGxhbmd1YWdlOiAnanNvbicsCiAgICAgICAgICBhdXRvbWF0aWNMYXlvdXQ6IHRydWUKICAgICAgICB9KTsKICAgICAgICAvLyBjdHJsICsgcyDliLfmlrAKICAgICAgICB0aGlzLmpzb25FZGl0b3Iub25LZXlEb3duKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA0OSAmJiAoZS5tZXRhS2V5IHx8IGUuY3RybEtleSkpIHsKICAgICAgICAgICAgX3RoaXMzLnJlZnJlc2goKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGV4cG9ydEpzb25GaWxlOiBmdW5jdGlvbiBleHBvcnRKc29uRmlsZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMuJHByb21wdCgn5paH5Lu25ZCNOicsICflr7zlh7rmlofku7YnLCB7CiAgICAgICAgaW5wdXRWYWx1ZTogIiIuY29uY2F0KCtuZXcgRGF0ZSgpLCAiLmpzb24iKSwKICAgICAgICBjbG9zZU9uQ2xpY2tNb2RhbDogZmFsc2UsCiAgICAgICAgaW5wdXRQbGFjZWhvbGRlcjogJ+ivt+i+k+WFpeaWh+S7tuWQjScKICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciB2YWx1ZSA9IF9yZWYudmFsdWU7CiAgICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSAiIi5jb25jYXQoK25ldyBEYXRlKCksICIuanNvbiIpOwogICAgICAgIHZhciBjb2RlU3RyID0gX3RoaXM0Lmpzb25FZGl0b3IuZ2V0VmFsdWUoKTsKICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjb2RlU3RyXSwgewogICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcKICAgICAgICB9KTsKICAgICAgICAoMCwgX2ZpbGVTYXZlci5zYXZlQXMpKGJsb2IsIHZhbHVlKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLiRlbWl0KCdyZWZyZXNoJywgSlNPTi5wYXJzZSh0aGlzLmpzb25FZGl0b3IuZ2V0VmFsdWUoKSkpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICBtZXNzYWdlOiAnSlNPTuagvOW8j+mUmeivr++8jOivt+ajgOafpScsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["_utils","require","_clipboard","_interopRequireDefault","_fileSaver","_loadMonaco","_loadBeautifier","beautifier","monaco","_default","exports","default","components","props","jsonStr","type","String","required","data","computed","watch","created","mounted","_this","window","addEventListener","preventDefaultSave","clipboard","ClipboardJS","text","trigger","$notify","title","message","beautifierJson","on","e","$message","error","beforeDestroy","removeEventListener","methods","key","metaKey","ctrlKey","preventDefault","onOpen","_this2","loadBeautifier","btf","js","beautifierConf","loadMonaco","val","setEditorValue","onClose","id","codeStr","_this3","jsonEditor","setValue","editor","create","document","getElementById","value","theme","language","automaticLayout","onKeyDown","keyCode","refresh","exportJsonFile","_this4","$prompt","inputValue","concat","Date","closeOnClickModal","inputPlaceholder","then","_ref","getValue","blob","Blob","saveAs","$emit","JSON","parse"],"sources":["src/views/tool/build/JsonDrawer.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-drawer v-bind=\"$attrs\" v-on=\"$listeners\" @opened=\"onOpen\" @close=\"onClose\">\r\n      <div class=\"action-bar\" :style=\"{'text-align': 'left'}\">\r\n        <span class=\"bar-btn\" @click=\"refresh\">\r\n          <i class=\"el-icon-refresh\" />\r\n          刷新\r\n        </span>\r\n        <span ref=\"copyBtn\" class=\"bar-btn copy-json-btn\">\r\n          <i class=\"el-icon-document-copy\" />\r\n          复制JSON\r\n        </span>\r\n        <span class=\"bar-btn\" @click=\"exportJsonFile\">\r\n          <i class=\"el-icon-download\" />\r\n          导出JSON文件\r\n        </span>\r\n        <span class=\"bar-btn delete-btn\" @click=\"$emit('update:visible', false)\">\r\n          <i class=\"el-icon-circle-close\" />\r\n          关闭\r\n        </span>\r\n      </div>\r\n      <div id=\"editorJson\" class=\"json-editor\" />\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { beautifierConf } from '@/utils'\r\nimport ClipboardJS from 'clipboard'\r\nimport { saveAs } from 'file-saver'\r\nimport loadMonaco from '@/utils/loadMonaco'\r\nimport loadBeautifier from '@/utils/loadBeautifier'\r\n\r\nlet beautifier\r\nlet monaco\r\n\r\nexport default {\r\n  components: {},\r\n  props: {\r\n    jsonStr: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {}\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created() {},\r\n  mounted() {\r\n    window.addEventListener('keydown', this.preventDefaultSave)\r\n    const clipboard = new ClipboardJS('.copy-json-btn', {\r\n      text: trigger => {\r\n        this.$notify({\r\n          title: '成功',\r\n          message: '代码已复制到剪切板，可粘贴。',\r\n          type: 'success'\r\n        })\r\n        return this.beautifierJson\r\n      }\r\n    })\r\n    clipboard.on('error', e => {\r\n      this.$message.error('代码复制失败')\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('keydown', this.preventDefaultSave)\r\n  },\r\n  methods: {\r\n    preventDefaultSave(e) {\r\n      if (e.key === 's' && (e.metaKey || e.ctrlKey)) {\r\n        e.preventDefault()\r\n      }\r\n    },\r\n    onOpen() {\r\n      loadBeautifier(btf => {\r\n        beautifier = btf\r\n        this.beautifierJson = beautifier.js(this.jsonStr, beautifierConf.js)\r\n\r\n        loadMonaco(val => {\r\n          monaco = val\r\n          this.setEditorValue('editorJson', this.beautifierJson)\r\n        })\r\n      })\r\n    },\r\n    onClose() {},\r\n    setEditorValue(id, codeStr) {\r\n      if (this.jsonEditor) {\r\n        this.jsonEditor.setValue(codeStr)\r\n      } else {\r\n        this.jsonEditor = monaco.editor.create(document.getElementById(id), {\r\n          value: codeStr,\r\n          theme: 'vs-dark',\r\n          language: 'json',\r\n          automaticLayout: true\r\n        })\r\n        // ctrl + s 刷新\r\n        this.jsonEditor.onKeyDown(e => {\r\n          if (e.keyCode === 49 && (e.metaKey || e.ctrlKey)) {\r\n            this.refresh()\r\n          }\r\n        })\r\n      }\r\n    },\r\n    exportJsonFile() {\r\n      this.$prompt('文件名:', '导出文件', {\r\n        inputValue: `${+new Date()}.json`,\r\n        closeOnClickModal: false,\r\n        inputPlaceholder: '请输入文件名'\r\n      }).then(({ value }) => {\r\n        if (!value) value = `${+new Date()}.json`\r\n        const codeStr = this.jsonEditor.getValue()\r\n        const blob = new Blob([codeStr], { type: 'text/plain;charset=utf-8' })\r\n        saveAs(blob, value)\r\n      })\r\n    },\r\n    refresh() {\r\n      try {\r\n        this.$emit('refresh', JSON.parse(this.jsonEditor.getValue()))\r\n      } catch (error) {\r\n        this.$notify({\r\n          title: '错误',\r\n          message: 'JSON格式错误，请检查',\r\n          type: 'error'\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/styles/mixin.scss';\r\n\r\n::v-deep .el-drawer__header {\r\n  display: none;\r\n}\r\n@include action-bar;\r\n\r\n.json-editor{\r\n  height: calc(100vh - 33px);\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}