{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\flowable\\task\\myProcess\\send\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\flowable\\task\\myProcess\\send\\index.vue","mtime":1733705220554},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\babel.config.js","mtime":1733705220203},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9jaGVueGkvRGVza3RvcC9wcm8vUWluZ1hpblNhYVMvcWluZ3hpbnNhYXMtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5tYXAuanMiKTsKdmFyIF9kZWZpbml0aW9uID0gcmVxdWlyZSgiQC9hcGkvZmxvd2FibGUvZGVmaW5pdGlvbiIpOwp2YXIgX3ZpZXdlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9jb21wb25lbnRzL1Byb2Nlc3Mvdmlld2VyIikpOwp2YXIgX3Byb2Nlc3MgPSByZXF1aXJlKCJAL2FwaS9mbG93YWJsZS9wcm9jZXNzIik7CnZhciBfdG9kbyA9IHJlcXVpcmUoIkAvYXBpL2Zsb3dhYmxlL3RvZG8iKTsKdmFyIF9Vc2VyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2NvbXBvbmVudHMvZmxvdy9Vc2VyIikpOwp2YXIgX1JvbGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvY29tcG9uZW50cy9mbG93L1JvbGUiKSk7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAiUmVjb3JkIiwKICBjb21wb25lbnRzOiB7CiAgICBCcG1uVmlld2VyOiBfdmlld2VyLmRlZmF1bHQsCiAgICBGbG93VXNlcjogX1VzZXIuZGVmYXVsdCwKICAgIEZsb3dSb2xlOiBfUm9sZS5kZWZhdWx0CiAgfSwKICBwcm9wczoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOaooeWei3htbOaVsOaNrgogICAgICBmbG93RGF0YToge30sCiAgICAgIGFjdGl2ZU5hbWU6ICcxJywKICAgICAgLy8g5YiH5o2idGFi5qCH562+CiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIGRlcHRJZDogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBkZXBsb3lJZDogIiIsCiAgICAgIC8vIOa1geeoi+WumuS5iee8luWPtwogICAgICBwcm9jRGVmSWQ6ICIiLAogICAgICAvLyDmtYHnqIvlrp7kvovnvJblj7cKICAgICAgZm9ybVJlbmRlckRhdGE6IHt9LAogICAgICB2YXJpYWJsZXM6IFtdLAogICAgICAvLyDmtYHnqIvlj5jph4/mlbDmja4KICAgICAgdGFza1RpdGxlOiBudWxsLAogICAgICB0YXNrT3BlbjogZmFsc2UsCiAgICAgIGNoZWNrU2VuZFVzZXI6IGZhbHNlLAogICAgICAvLyDmmK/lkKblsZXnpLrkurrlkZjpgInmi6nmqKHlnZcKICAgICAgY2hlY2tTZW5kUm9sZTogZmFsc2UsCiAgICAgIC8vIOaYr+WQpuWxleekuuinkuiJsumAieaLqeaooeWdlwogICAgICBjaGVja1R5cGU6ICcnLAogICAgICAvLyDpgInmi6nnsbvlnosKICAgICAgY2hlY2tWYWx1ZXM6IG51bGwsCiAgICAgIC8vIOmAieS4reS7u+WKoeaOpeaUtuS6uuWRmOaVsOaNrgogICAgICBmb3JtRGF0YToge30sCiAgICAgIC8vIOWhq+WGmeeahOihqOWNleaVsOaNriwKICAgICAgbXVsdGlJbnN0YW5jZVZhcnM6ICcnLAogICAgICAvLyDkvJrnrb7oioLngrkKICAgICAgZm9ybUpzb246IHt9IC8vIOihqOWNlWpzb24KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5kZXBsb3lJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5ICYmIHRoaXMuJHJvdXRlLnF1ZXJ5LmRlcGxveUlkOwogICAgLy8g5Yid5aeL5YyW6KGo5Y2VCiAgICB0aGlzLnByb2NEZWZJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5ICYmIHRoaXMuJHJvdXRlLnF1ZXJ5LnByb2NEZWZJZDsKICAgIC8vIHRoaXMuZ2V0TmV4dEZsb3dOb2RlQnlTdGFydCh0aGlzLmRlcGxveUlkKTsKICAgIHRoaXMuZ2V0Rmxvd0Zvcm1EYXRhKHRoaXMuZGVwbG95SWQpOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKHRhYiwgZXZlbnQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHRhYi5uYW1lID09PSAnMicpIHsKICAgICAgICAoMCwgX2RlZmluaXRpb24uZmxvd1htbEFuZE5vZGUpKHsKICAgICAgICAgIGRlcGxveUlkOiB0aGlzLmRlcGxveUlkCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpcy5mbG93RGF0YSA9IHJlcy5kYXRhOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLyoqIOa1geeoi+ihqOWNleaVsOaNriAqL2dldEZsb3dGb3JtRGF0YTogZnVuY3Rpb24gZ2V0Rmxvd0Zvcm1EYXRhKGRlcGxveUlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgIGRlcGxveUlkOiBkZXBsb3lJZAogICAgICB9OwogICAgICAoMCwgX3Byb2Nlc3MuZmxvd0Zvcm1EYXRhKShwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIOa1geeoi+i/h+eoi+S4reS4jeWtmOWcqOWIneWni+WMluihqOWNlSDnm7TmjqXor7vlj5bnmoTmtYHnqIvlj5jph4/kuK3lrZjlgqjnmoTooajljZXlgLwKICAgICAgICBfdGhpczIuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOWbnuaYvuaVsOaNrgogICAgICAgICAgX3RoaXMyLiRyZWZzLnZGb3JtUmVmLnNldEZvcm1Kc29uKHJlcy5kYXRhKTsKICAgICAgICAgIF90aGlzMi5mb3JtSnNvbiA9IHJlcy5kYXRhOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLmdvQmFjaygpOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog6L+U5Zue6aG16Z2iICovZ29CYWNrOiBmdW5jdGlvbiBnb0JhY2soKSB7CiAgICAgIC8vIOWFs+mXreW9k+WJjeagh+etvumhteW5tui/lOWbnuS4iuS4qumhtemdogogICAgICB2YXIgb2JqID0gewogICAgICAgIHBhdGg6ICIvdGFzay9wcm9jZXNzIiwKICAgICAgICBxdWVyeTogewogICAgICAgICAgdDogRGF0ZS5ub3coKQogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy4kdGFiLmNsb3NlT3BlblBhZ2Uob2JqKTsKICAgIH0sCiAgICAvKiog55Sz6K+35rWB56iL6KGo5Y2V5pWw5o2u5o+Q5LqkICovc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnMudkZvcm1SZWYuZ2V0Rm9ybURhdGEoKS50aGVuKGZ1bmN0aW9uIChmb3JtRGF0YSkgewogICAgICAgIC8vIOagueaNruW9k+WJjeS7u+WKoeaIluiAhea1geeoi+iuvuiuoemFjee9rueahOS4i+S4gOatpeiKgueCuSB0b2RvIOaaguaXtuacqua2ieWPiuWIsOiAg+iZkee9keWFs+OAgeihqOi+vuW8j+WSjOWkmuiKgueCueaDheWGtQogICAgICAgICgwLCBfdG9kby5nZXROZXh0Rmxvd05vZGVCeVN0YXJ0KSh7CiAgICAgICAgICBkZXBsb3ltZW50SWQ6IF90aGlzMy5kZXBsb3lJZCwKICAgICAgICAgIHZhcmlhYmxlczogZm9ybURhdGEKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgICBfdGhpczMuZm9ybURhdGEgPSBmb3JtRGF0YTsKICAgICAgICAgICAgaWYgKGRhdGEuZGF0YVR5cGUgPT09ICdkeW5hbWljJykgewogICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdhc3NpZ25lZScpIHsKICAgICAgICAgICAgICAgIC8vIOaMh+WumuS6uuWRmAogICAgICAgICAgICAgICAgX3RoaXMzLmNoZWNrU2VuZFVzZXIgPSB0cnVlOwogICAgICAgICAgICAgICAgX3RoaXMzLmNoZWNrVHlwZSA9ICJzaW5nbGUiOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY2FuZGlkYXRlVXNlcnMnKSB7CiAgICAgICAgICAgICAgICAvLyDlgJnpgInkurrlkZgo5aSa5LiqKQogICAgICAgICAgICAgICAgX3RoaXMzLmNoZWNrU2VuZFVzZXIgPSB0cnVlOwogICAgICAgICAgICAgICAgX3RoaXMzLmNoZWNrVHlwZSA9ICJtdWx0aXBsZSI7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdjYW5kaWRhdGVHcm91cHMnKSB7CiAgICAgICAgICAgICAgICAvLyDmjIflrprnu4Qo5omA5bGe6KeS6Imy5o6l5pS25Lu75YqhKQogICAgICAgICAgICAgICAgX3RoaXMzLmNoZWNrU2VuZFJvbGUgPSB0cnVlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyDkvJrnrb4KICAgICAgICAgICAgICAgIC8vIOa1geeoi+iuvuiuoeaMh+WumueahCBlbGVtZW50VmFyaWFibGUg5L2c5Li65Lya562+5Lq65ZGY5YiX6KGoCiAgICAgICAgICAgICAgICBfdGhpczMubXVsdGlJbnN0YW5jZVZhcnMgPSBkYXRhLnZhcnM7CiAgICAgICAgICAgICAgICBfdGhpczMuY2hlY2tTZW5kVXNlciA9IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpczMuY2hlY2tUeXBlID0gIm11bHRpcGxlIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX3RoaXMzLnRhc2tPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICBfdGhpczMudGFza1RpdGxlID0gIumAieaLqeS7u+WKoeaOpeaUtiI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzMy5wcm9jRGVmSWQpIHsKICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IHsKICAgICAgICAgICAgICAgICAgZm9ybUpzb246IF90aGlzMy5mb3JtSnNvbgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIC8vIOWkjeWItuWvueixoeeahOWxnuaAp+WAvOe7meaWsOeahOWvueixoQogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbSwgZm9ybURhdGEpOwogICAgICAgICAgICAgICAgLy8g5ZCv5Yqo5rWB56iL5bm25bCG6KGo5Y2V5pWw5o2u5Yqg5YWl5rWB56iL5Y+Y6YePCiAgICAgICAgICAgICAgICAoMCwgX2RlZmluaXRpb24uZGVmaW5pdGlvblN0YXJ0KShfdGhpczMucHJvY0RlZklkLCBwYXJhbSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy4kbW9kYWwubXNnU3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICAgICAgX3RoaXMzLmdvQmFjaygpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIC8vIHRoaXMuJG1vZGFsLm1zZ0Vycm9yKGVycm9yKQogICAgICB9KTsKICAgIH0sCiAgICAvKiog6YeN572u6KGo5Y2VICovcmVzZXRGb3JtOiBmdW5jdGlvbiByZXNldEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMudkZvcm1SZWYucmVzZXRGb3JtKCk7CiAgICB9LAogICAgLyoqIOaPkOS6pOa1geeoiyAqL3N1Ym1pdFRhc2s6IGZ1bmN0aW9uIHN1Ym1pdFRhc2soKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICBpZiAoIXRoaXMuY2hlY2tWYWx1ZXMgJiYgdGhpcy5jaGVja1NlbmRVc2VyKSB7CiAgICAgICAgdGhpcy4kbW9kYWwubXNnRXJyb3IoIuivt+mAieaLqeS7u+WKoeaOpeaUtiEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmNoZWNrVmFsdWVzICYmIHRoaXMuY2hlY2tTZW5kUm9sZSkgewogICAgICAgIHRoaXMuJG1vZGFsLm1zZ0Vycm9yKCLor7fpgInmi6nmtYHnqIvmjqXmlLbop5LoibLnu4QhIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1EYXRhKSB7CiAgICAgICAgdmFyIHBhcmFtID0gewogICAgICAgICAgZm9ybUpzb246IHRoaXMuZm9ybUpzb24KICAgICAgICB9OwogICAgICAgIC8vIOWkjeWItuWvueixoeeahOWxnuaAp+WAvOe7meaWsOeahOWvueixoQogICAgICAgIE9iamVjdC5hc3NpZ24ocGFyYW0sIHRoaXMuZm9ybURhdGEpOwogICAgICAgIGlmICh0aGlzLm11bHRpSW5zdGFuY2VWYXJzKSB7CiAgICAgICAgICB0aGlzLiRzZXQocGFyYW0sIHRoaXMubXVsdGlJbnN0YW5jZVZhcnMsIHRoaXMuY2hlY2tWYWx1ZXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRzZXQocGFyYW0sICJhcHByb3ZhbCIsIHRoaXMuY2hlY2tWYWx1ZXMpOwogICAgICAgIH0KICAgICAgICAvLyDlkK/liqjmtYHnqIvlubblsIbooajljZXmlbDmja7liqDlhaXmtYHnqIvlj5jph48KICAgICAgICAoMCwgX2RlZmluaXRpb24uZGVmaW5pdGlvblN0YXJ0KSh0aGlzLnByb2NEZWZJZCwgcGFyYW0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM0LiRtb2RhbC5tc2dTdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgX3RoaXM0LmdvQmFjaygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8g55So5oi35L+h5oGv6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVVc2VyU2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVVc2VyU2VsZWN0KHNlbGVjdGlvbikgewogICAgICBpZiAoc2VsZWN0aW9uKSB7CiAgICAgICAgaWYgKHNlbGVjdGlvbiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICB2YXIgc2VsZWN0VmFsID0gc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbS51c2VySWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICh0aGlzLm11bHRpSW5zdGFuY2VWYXJzKSB7CiAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBzZWxlY3RWYWw7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gc2VsZWN0VmFsLmpvaW4oJywnKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHNlbGVjdGlvbi51c2VySWQ7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g6KeS6Imy5L+h5oGv6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVSb2xlU2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVSb2xlU2VsZWN0KHNlbGVjdGlvbikgewogICAgICBpZiAoc2VsZWN0aW9uKSB7CiAgICAgICAgaWYgKHNlbGVjdGlvbiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICB2YXIgc2VsZWN0VmFsID0gc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbS5yb2xlSWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBzZWxlY3RWYWwuam9pbignLCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gc2VsZWN0aW9uOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["_definition","require","_viewer","_interopRequireDefault","_process","_todo","_User","_Role","name","components","BpmnViewer","FlowUser","FlowRole","props","data","flowData","activeName","queryParams","deptId","undefined","loading","deployId","procDefId","formRenderData","variables","taskTitle","taskOpen","checkSendUser","checkSendRole","checkType","checkValues","formData","multiInstanceVars","formJson","created","$route","query","getFlowFormData","methods","handleClick","tab","event","_this","flowXmlAndNode","then","res","_this2","params","flowFormData","$nextTick","$refs","vFormRef","setFormJson","catch","goBack","obj","path","t","Date","now","$tab","closeOpenPage","submitForm","_this3","getFormData","getNextFlowNodeByStart","deploymentId","dataType","type","vars","param","Object","assign","definitionStart","$modal","msgSuccess","msg","error","resetForm","submitTask","_this4","msgError","$set","handleUserSelect","selection","Array","selectVal","map","item","userId","join","handleRoleSelect","roleId"],"sources":["src/views/flowable/task/myProcess/send/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-card class=\"box-card\" >\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span class=\"el-icon-document\">发起任务</span>\r\n        <el-button style=\"float: right;\" size=\"mini\" type=\"danger\" @click=\"goBack\">关闭</el-button>\r\n      </div>\r\n      <el-tabs  tab-position=\"top\" v-model=\"activeName\"  @tab-click=\"handleClick\">\r\n        <!--表单信息-->\r\n        <el-tab-pane label=\"表单信息\" name=\"1\">\r\n          <!--初始化流程加载表单信息-->\r\n          <el-col :span=\"16\" :offset=\"4\">\r\n            <v-form-render :form-data=\"formRenderData\" ref=\"vFormRef\"/>\r\n            <div style=\"margin-left:15%;margin-bottom: 20px;font-size: 14px;\">\r\n              <el-button type=\"primary\" @click=\"submitForm\">提 交</el-button>\r\n              <el-button type=\"primary\" @click=\"resetForm\">重 置</el-button>\r\n            </div>\r\n          </el-col>\r\n        </el-tab-pane>\r\n        <!--流程图-->\r\n        <el-tab-pane label=\"流程图\" name=\"2\">\r\n          <bpmn-viewer :flowData=\"flowData\"/>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n      <!--选择流程接收人-->\r\n      <el-dialog :title=\"taskTitle\" :visible.sync=\"taskOpen\" width=\"65%\" append-to-body>\r\n        <flow-user v-if=\"checkSendUser\" :checkType=\"checkType\"  @handleUserSelect=\"handleUserSelect\"/>\r\n        <flow-role v-if=\"checkSendRole\" @handleRoleSelect=\"handleRoleSelect\"/>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"taskOpen = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitTask\">提 交</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {definitionStart, flowXmlAndNode} from \"@/api/flowable/definition\";\r\nimport BpmnViewer from '@/components/Process/viewer';\r\nimport {flowFormData} from \"@/api/flowable/process\";\r\nimport {getNextFlowNodeByStart} from \"@/api/flowable/todo\";\r\nimport FlowUser from '@/components/flow/User'\r\nimport FlowRole from '@/components/flow/Role'\r\n\r\nexport default {\r\n  name: \"Record\",\r\n  components: {\r\n    BpmnViewer,\r\n    FlowUser,\r\n    FlowRole,\r\n  },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      // 模型xml数据\r\n      flowData: {},\r\n      activeName: '1', // 切换tab标签\r\n      // 查询参数\r\n      queryParams: {\r\n        deptId: undefined\r\n      },\r\n      // 遮罩层\r\n      loading: true,\r\n      deployId: \"\",  // 流程定义编号\r\n      procDefId: \"\",  // 流程实例编号\r\n      formRenderData: {},\r\n      variables: [], // 流程变量数据\r\n      taskTitle: null,\r\n      taskOpen: false,\r\n      checkSendUser: false, // 是否展示人员选择模块\r\n      checkSendRole: false,// 是否展示角色选择模块\r\n      checkType: '', // 选择类型\r\n      checkValues: null, // 选中任务接收人员数据\r\n      formData: {}, // 填写的表单数据,\r\n      multiInstanceVars: '', // 会签节点\r\n      formJson: {} // 表单json\r\n    };\r\n  },\r\n  created() {\r\n    this.deployId = this.$route.query && this.$route.query.deployId;\r\n    // 初始化表单\r\n    this.procDefId  = this.$route.query && this.$route.query.procDefId;\r\n    // this.getNextFlowNodeByStart(this.deployId);\r\n    this.getFlowFormData(this.deployId);\r\n  },\r\n  methods: {\r\n    handleClick(tab, event) {\r\n      if (tab.name === '2'){\r\n        flowXmlAndNode({deployId:this.deployId}).then(res => {\r\n          this.flowData = res.data;\r\n        })\r\n      }\r\n    },\r\n    /** 流程表单数据 */\r\n    getFlowFormData(deployId) {\r\n      const params = {deployId: deployId}\r\n      flowFormData(params).then(res => {\r\n        // 流程过程中不存在初始化表单 直接读取的流程变量中存储的表单值\r\n        this.$nextTick(() => {\r\n          // 回显数据\r\n          this.$refs.vFormRef.setFormJson(res.data);\r\n          this.formJson = res.data;\r\n        })\r\n      }).catch(res => {\r\n        this.goBack();\r\n      })\r\n    },\r\n    /** 返回页面 */\r\n    goBack() {\r\n      // 关闭当前标签页并返回上个页面\r\n      const obj = { path: \"/task/process\", query: { t: Date.now()} };\r\n      this.$tab.closeOpenPage(obj);\r\n    },\r\n    /** 申请流程表单数据提交 */\r\n    submitForm() {\r\n      this.$refs.vFormRef.getFormData().then(formData => {\r\n        // 根据当前任务或者流程设计配置的下一步节点 todo 暂时未涉及到考虑网关、表达式和多节点情况\r\n        getNextFlowNodeByStart({deploymentId: this.deployId, variables: formData}).then(res => {\r\n          const data = res.data;\r\n          if (data) {\r\n            this.formData = formData;\r\n            if (data.dataType === 'dynamic') {\r\n              if (data.type === 'assignee') { // 指定人员\r\n                this.checkSendUser = true;\r\n                this.checkType = \"single\";\r\n              } else if (data.type === 'candidateUsers') {  // 候选人员(多个)\r\n                this.checkSendUser = true;\r\n                this.checkType = \"multiple\";\r\n              } else if (data.type === 'candidateGroups') { // 指定组(所属角色接收任务)\r\n                this.checkSendRole = true;\r\n              } else { // 会签\r\n                // 流程设计指定的 elementVariable 作为会签人员列表\r\n                this.multiInstanceVars = data.vars;\r\n                this.checkSendUser = true;\r\n                this.checkType = \"multiple\";\r\n              }\r\n              this.taskOpen = true;\r\n              this.taskTitle = \"选择任务接收\";\r\n            } else {\r\n              if (this.procDefId) {\r\n                const param = {\r\n                  formJson:  this.formJson,\r\n                }\r\n                // 复制对象的属性值给新的对象\r\n                Object.assign(param, formData);\r\n                // 启动流程并将表单数据加入流程变量\r\n                definitionStart(this.procDefId, param).then(res => {\r\n                  this.$modal.msgSuccess(res.msg);\r\n                  this.goBack();\r\n                })\r\n              }\r\n            }\r\n          }\r\n        })\r\n      }).catch(error => {\r\n        // this.$modal.msgError(error)\r\n      })\r\n    },\r\n    /** 重置表单 */\r\n    resetForm() {\r\n      this.$refs.vFormRef.resetForm();\r\n    },\r\n    /** 提交流程 */\r\n    submitTask() {\r\n      if (!this.checkValues && this.checkSendUser){\r\n        this.$modal.msgError(\"请选择任务接收!\");\r\n        return;\r\n      }\r\n      if (!this.checkValues && this.checkSendRole){\r\n        this.$modal.msgError(\"请选择流程接收角色组!\");\r\n        return;\r\n      }\r\n      if (this.formData) {\r\n        const param = {\r\n          formJson:  this.formJson,\r\n        }\r\n        // 复制对象的属性值给新的对象\r\n        Object.assign(param, this.formData);\r\n        if (this.multiInstanceVars) {\r\n          this.$set(param, this.multiInstanceVars, this.checkValues);\r\n        } else {\r\n          this.$set(param, \"approval\", this.checkValues);\r\n        }\r\n        // 启动流程并将表单数据加入流程变量\r\n        definitionStart(this.procDefId, param).then(res => {\r\n          this.$modal.msgSuccess(res.msg);\r\n          this.goBack();\r\n        })\r\n      }\r\n    },\r\n    // 用户信息选中数据\r\n    handleUserSelect(selection) {\r\n      if (selection) {\r\n        if (selection instanceof Array) {\r\n          const selectVal = selection.map(item => item.userId);\r\n          if (this.multiInstanceVars) {\r\n            this.checkValues = selectVal;\r\n          } else {\r\n            this.checkValues = selectVal.join(',');\r\n          }\r\n        } else {\r\n          this.checkValues = selection.userId;\r\n        }\r\n      }\r\n    },\r\n    // 角色信息选中数据\r\n    handleRoleSelect(selection) {\r\n      if (selection) {\r\n        if (selection instanceof Array) {\r\n          const selectVal = selection.map(item => item.roleId);\r\n          this.checkValues = selectVal.join(',')\r\n        } else {\r\n          this.checkValues = selection;\r\n        }\r\n      }\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.test-form {\r\n  margin: 15px auto;\r\n  width: 800px;\r\n  padding: 15px;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n\r\n.box-card {\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n\r\n.my-label {\r\n  background: #E1F3D8;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}