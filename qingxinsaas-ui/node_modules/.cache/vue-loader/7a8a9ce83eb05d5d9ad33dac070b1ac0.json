{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\flowable\\definition\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\flowable\\definition\\index.vue","mtime":1733705220541},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBsaXN0RGVmaW5pdGlvbiwNCiAgdXBkYXRlU3RhdGUsDQogIGRlbERlcGxveW1lbnQsDQogIGFkZERlcGxveW1lbnQsDQogIHVwZGF0ZURlcGxveW1lbnQsDQogIGV4cG9ydERlcGxveW1lbnQsDQogIGRlZmluaXRpb25TdGFydCwNCiAgZmxvd1htbEFuZE5vZGUNCn0gZnJvbSAiQC9hcGkvZmxvd2FibGUvZGVmaW5pdGlvbiI7DQppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gIkAvdXRpbHMvYXV0aCI7DQppbXBvcnQgeyBnZXRGb3JtLCBhZGREZXBsb3lGb3JtICxsaXN0Rm9ybSB9IGZyb20gIkAvYXBpL2Zsb3dhYmxlL2Zvcm0iOw0KaW1wb3J0IEJwbW5WaWV3ZXIgZnJvbSAnQC9jb21wb25lbnRzL1Byb2Nlc3Mvdmlld2VyJzsNCmltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVsJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiRGVmaW5pdGlvbiIsDQogIGRpY3RzOiBbJ3N5c19wcm9jZXNzX2NhdGVnb3J5J10sDQogIGNvbXBvbmVudHM6IHsNCiAgICBCcG1uVmlld2VyLA0KICAgIE1vZGVsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOmBrue9qeWxgg0KICAgICAgbG9hZGluZzogdHJ1ZSwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgLy8g6YCJ5Lit5pWw57uEDQogICAgICBpZHM6IFtdLA0KICAgICAgLy8g6Z2e5Y2V5Liq56aB55SoDQogICAgICBzaW5nbGU6IHRydWUsDQogICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgNCiAgICAgIG11bHRpcGxlOiB0cnVlLA0KICAgICAgLy8g5pi+56S65pCc57Si5p2h5Lu2DQogICAgICBzaG93U2VhcmNoOiB0cnVlLA0KICAgICAgLy8g5oC75p2h5pWwDQogICAgICB0b3RhbDogMCwNCiAgICAgIC8vIOa1geeoi+WumuS5ieihqOagvOaVsOaNrg0KICAgICAgZGVmaW5pdGlvbkxpc3Q6IFtdLA0KICAgICAgLy8g5by55Ye65bGC5qCH6aKYDQogICAgICB0aXRsZTogIiIsDQogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYINCiAgICAgIG9wZW46IGZhbHNlLA0KICAgICAgZm9ybUNvbmZPcGVuOiBmYWxzZSwNCiAgICAgIGZvcm1UaXRsZTogIiIsDQogICAgICBmb3JtRGVwbG95T3BlbjogZmFsc2UsDQogICAgICBmb3JtRGVwbG95VGl0bGU6ICIiLA0KICAgICAgZm9ybUxpc3Q6IFtdLA0KICAgICAgZm9ybVRvdGFsOjAsDQogICAgICBmb3JtRGF0YToge30sIC8vIOm7mOiupOihqOWNleaVsOaNrg0KICAgICAgcmVhZEltYWdlOnsNCiAgICAgICAgb3BlbjogZmFsc2UsDQogICAgICAgIHNyYzogIiIsDQogICAgICB9LA0KICAgICAgLy8gYnBtbi54bWwg5a+85YWlDQogICAgICB1cGxvYWQ6IHsNCiAgICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGC77yIeG1s5a+85YWl77yJDQogICAgICAgIG9wZW46IGZhbHNlLA0KICAgICAgICAvLyDlvLnlh7rlsYLmoIfpopjvvIh4bWzlr7zlhaXvvIkNCiAgICAgICAgdGl0bGU6ICIiLA0KICAgICAgICAvLyDmmK/lkKbnpoHnlKjkuIrkvKANCiAgICAgICAgaXNVcGxvYWRpbmc6IGZhbHNlLA0KICAgICAgICBuYW1lOiBudWxsLA0KICAgICAgICBjYXRlZ29yeTogbnVsbCwNCiAgICAgICAgLy8g6K6+572u5LiK5Lyg55qE6K+35rGC5aS06YOoDQogICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgZ2V0VG9rZW4oKSB9LA0KICAgICAgICAvLyDkuIrkvKDnmoTlnLDlnYANCiAgICAgICAgdXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJICsgIi9mbG93YWJsZS9kZWZpbml0aW9uL2ltcG9ydCINCiAgICAgIH0sDQogICAgICAvLyDmn6Xor6Llj4LmlbANCiAgICAgIHF1ZXJ5UGFyYW1zOiB7DQogICAgICAgIHBhZ2VOdW06IDEsDQogICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgICAgbmFtZTogbnVsbCwNCiAgICAgICAgY2F0ZWdvcnk6IG51bGwsDQogICAgICAgIGtleTogbnVsbCwNCiAgICAgICAgdGVuYW50SWQ6IG51bGwsDQogICAgICAgIGRlcGxveVRpbWU6IG51bGwsDQogICAgICAgIGRlcml2ZWRGcm9tOiBudWxsLA0KICAgICAgICBkZXJpdmVkRnJvbVJvb3Q6IG51bGwsDQogICAgICAgIHBhcmVudERlcGxveW1lbnRJZDogbnVsbCwNCiAgICAgICAgZW5naW5lVmVyc2lvbjogbnVsbA0KICAgICAgfSwNCiAgICAgIGZvcm1RdWVyeVBhcmFtczp7DQogICAgICAgIHBhZ2VOdW06IDEsDQogICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgIH0sDQogICAgICAvLyDmjILovb3ooajljZXliLDmtYHnqIvlrp7kvosNCiAgICAgIGZvcm1EZXBsb3lQYXJhbTp7DQogICAgICAgIGZvcm1JZDogbnVsbCwNCiAgICAgICAgZGVwbG95SWQ6IG51bGwNCiAgICAgIH0sDQogICAgICBkZXBsb3lJZDogJycsDQogICAgICBjdXJyZW50Um93OiBudWxsLA0KICAgICAgLy8geG1sDQogICAgICBmbG93RGF0YToge30sDQogICAgICAvLyDooajljZXlj4LmlbANCiAgICAgIGZvcm06IHt9LA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgfQ0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRMaXN0KCk7DQogIH0sDQogIGFjdGl2YXRlZCgpIHsNCiAgICBjb25zdCB0aW1lID0gdGhpcy4kcm91dGUucXVlcnkudDsNCiAgICBpZiAodGltZSAhPSBudWxsKSB7DQogICAgICB0aGlzLmdldExpc3QoKTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKiog5p+l6K+i5rWB56iL5a6a5LmJ5YiX6KGoICovDQogICAgZ2V0TGlzdCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBsaXN0RGVmaW5pdGlvbih0aGlzLnF1ZXJ5UGFyYW1zKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5kZWZpbml0aW9uTGlzdCA9IHJlc3BvbnNlLmRhdGEucmVjb3JkczsNCiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVDbG9zZShkb25lKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrpropoHlhbPpl63lkJfvvJ/lhbPpl63mnKrkv53lrZjnmoTkv67mlLnpg73kvJrkuKLlpLHvvJ8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICBkb25lKCk7DQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7DQogICAgfSwNCiAgICAvLyDlj5bmtojmjInpkq4NCiAgICBjYW5jZWwoKSB7DQogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICB9LA0KICAgIC8vIOihqOWNlemHjee9rg0KICAgIHJlc2V0KCkgew0KICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICBpZDogbnVsbCwNCiAgICAgICAgbmFtZTogbnVsbCwNCiAgICAgICAgY2F0ZWdvcnk6IG51bGwsDQogICAgICAgIGtleTogbnVsbCwNCiAgICAgICAgdGVuYW50SWQ6IG51bGwsDQogICAgICAgIGRlcGxveVRpbWU6IG51bGwsDQogICAgICAgIGRlcml2ZWRGcm9tOiBudWxsLA0KICAgICAgICBkZXJpdmVkRnJvbVJvb3Q6IG51bGwsDQogICAgICAgIHBhcmVudERlcGxveW1lbnRJZDogbnVsbCwNCiAgICAgICAgZW5naW5lVmVyc2lvbjogbnVsbA0KICAgICAgfTsNCiAgICAgIHRoaXMucmVzZXRGb3JtKCJmb3JtIik7DQogICAgfSwNCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlUXVlcnkoKSB7DQogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSAxOw0KICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovDQogICAgcmVzZXRRdWVyeSgpIHsNCiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsNCiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsNCiAgICB9LA0KICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrg0KICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShzZWxlY3Rpb24pIHsNCiAgICAgIHRoaXMuaWRzID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0uZGVwbG95bWVudElkKQ0KICAgICAgdGhpcy5zaW5nbGUgPSBzZWxlY3Rpb24ubGVuZ3RoIT09MQ0KICAgICAgdGhpcy5tdWx0aXBsZSA9ICFzZWxlY3Rpb24ubGVuZ3RoDQogICAgfSwNCiAgICAvKiog5paw5aKe5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlQWRkKCkgew0KICAgICAgdGhpcy5yZXNldCgpOw0KICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsNCiAgICAgIHRoaXMudGl0bGUgPSAi5re75Yqg5rWB56iL5a6a5LmJIjsNCiAgICB9LA0KICAgIC8qKiDot7PovazliLDmtYHnqIvorr7orqHpobXpnaIgKi8NCiAgICBoYW5kbGVMb2FkWG1sKHJvdyl7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvZmxvd2FibGUvZGVmaW5pdGlvbi9tb2RlbCcscXVlcnk6IHsgZGVwbG95SWQ6IHJvdy5kZXBsb3ltZW50SWQgfX0pDQogICAgfSwNCiAgICAvKiog5rWB56iL5Zu+5p+l55yLICovDQogICAgaGFuZGxlUmVhZEltYWdlKGRlcGxveUlkKXsNCiAgICAgIHRoaXMucmVhZEltYWdlLnRpdGxlID0gIua1geeoi+WbviI7DQogICAgICB0aGlzLnJlYWRJbWFnZS5vcGVuID0gdHJ1ZTsNCiAgICAgIC8vIHRoaXMucmVhZEltYWdlLnNyYyA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAiL2Zsb3dhYmxlL2RlZmluaXRpb24vcmVhZEltYWdlLyIgKyBkZXBsb3ltZW50SWQ7DQogICAgICBmbG93WG1sQW5kTm9kZSh7ZGVwbG95SWQ6ZGVwbG95SWR9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZmxvd0RhdGEgPSByZXMuZGF0YTsNCiAgICAgIH0pDQogICAgfSwNCiAgICAvKiog6KGo5Y2V5p+l55yLICovDQogICAgaGFuZGxlRm9ybShmb3JtSWQpew0KICAgICAgZ2V0Rm9ybShmb3JtSWQpLnRoZW4ocmVzID0+ew0KICAgICAgICB0aGlzLmZvcm1UaXRsZSA9ICLooajljZXor6bmg4UiOw0KICAgICAgICB0aGlzLmZvcm1Db25mT3BlbiA9IHRydWU7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAvLyDlm57mmL7mlbDmja4NCiAgICAgICAgICB0aGlzLiRyZWZzLnZGb3JtUmVmLnNldEZvcm1Kc29uKEpTT04ucGFyc2UocmVzLmRhdGEuZm9ybUNvbnRlbnQpKQ0KICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgIC8vIOihqOWNleemgeeUqA0KICAgICAgICAgICAgdGhpcy4kcmVmcy52Rm9ybVJlZi5kaXNhYmxlRm9ybSgpOw0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgLyoqIOWQr+WKqOa1geeoiyAqLw0KICAgIGhhbmRsZURlZmluaXRpb25TdGFydChyb3cpew0KICAgICAgZGVmaW5pdGlvblN0YXJ0KHJvdy5pZCkudGhlbihyZXMgPT57DQogICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MocmVzLm1zZyk7DQogICAgICB9KQ0KICAgIH0sDQogICAgLyoqIOaMgui9veihqOWNleW8ueahhiAqLw0KICAgIGhhbmRsZUFkZEZvcm0ocm93KXsNCiAgICAgIHRoaXMuZm9ybURlcGxveVBhcmFtLmRlcGxveUlkID0gcm93LmRlcGxveW1lbnRJZA0KICAgICAgdGhpcy5MaXN0Rm9ybURlcGxveSgpDQogICAgfSwNCiAgICAvKiog5oyC6L296KGo5Y2V5YiX6KGoICovDQogICAgTGlzdEZvcm1EZXBsb3koKXsNCiAgICAgIGxpc3RGb3JtKHRoaXMuZm9ybVF1ZXJ5UGFyYW1zKS50aGVuKHJlcyA9PnsNCiAgICAgICAgdGhpcy5mb3JtTGlzdCA9IHJlcy5yb3dzOw0KICAgICAgICB0aGlzLmZvcm1Ub3RhbCA9IHJlcy50b3RhbDsNCiAgICAgICAgdGhpcy5mb3JtRGVwbG95T3BlbiA9IHRydWU7DQogICAgICAgIHRoaXMuZm9ybURlcGxveVRpdGxlID0gIuaMgui9veihqOWNlSI7DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8gLyoqIOabtOaUueaMgui9veihqOWNleW8ueahhiAqLw0KICAgIC8vIGhhbmRsZUVkaXRGb3JtKHJvdyl7DQogICAgLy8gICB0aGlzLmZvcm1EZXBsb3lQYXJhbS5kZXBsb3lJZCA9IHJvdy5kZXBsb3ltZW50SWQNCiAgICAvLyAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gew0KICAgIC8vICAgICBwYWdlTnVtOiAxLA0KICAgIC8vICAgICBwYWdlU2l6ZTogMTANCiAgICAvLyAgIH0NCiAgICAvLyAgIGxpc3RGb3JtKHF1ZXJ5UGFyYW1zKS50aGVuKHJlcyA9PnsNCiAgICAvLyAgICAgdGhpcy5mb3JtTGlzdCA9IHJlcy5yb3dzOw0KICAgIC8vICAgICB0aGlzLmZvcm1EZXBsb3lPcGVuID0gdHJ1ZTsNCiAgICAvLyAgICAgdGhpcy5mb3JtRGVwbG95VGl0bGUgPSAi5oyC6L296KGo5Y2VIjsNCiAgICAvLyAgIH0pDQogICAgLy8gfSwNCiAgICAvKiog5oyC6L296KGo5Y2VICovDQogICAgc3VibWl0Rm9ybURlcGxveShyb3cpew0KICAgICAgdGhpcy5mb3JtRGVwbG95UGFyYW0uZm9ybUlkID0gcm93LmZvcm1JZDsNCiAgICAgIGFkZERlcGxveUZvcm0odGhpcy5mb3JtRGVwbG95UGFyYW0pLnRoZW4ocmVzID0+ew0KICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKHJlcy5tc2cpOw0KICAgICAgICB0aGlzLmZvcm1EZXBsb3lPcGVuID0gZmFsc2U7DQogICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoZGF0YSkgew0KICAgICAgaWYgKGRhdGEpIHsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIC8vIOWbnuaYvuaVsOaNrg0KICAgICAgICAgIHRoaXMuJHJlZnMudkZvcm1DdXJyZW50Um93UmVmLnNldEZvcm1Kc29uKEpTT04ucGFyc2UoZGF0YS5mb3JtQ29udGVudCkpDQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgLy8g6KGo5Y2V56aB55SoDQogICAgICAgICAgICB0aGlzLiRyZWZzLnZGb3JtQ3VycmVudFJvd1JlZi5kaXNhYmxlRm9ybSgpOw0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICAvKiog5oyC6LW3L+a/gOa0u+a1geeoiyAqLw0KICAgIGhhbmRsZVVwZGF0ZVN1c3BlbnNpb25TdGF0ZShyb3cpew0KICAgICAgbGV0IHN0YXRlID0gMTsNCiAgICAgIGlmIChyb3cuc3VzcGVuc2lvblN0YXRlID09PSAxKSB7DQogICAgICAgIHN0YXRlID0gMg0KICAgICAgfQ0KICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICBkZXBsb3lJZDogcm93LmRlcGxveW1lbnRJZCwNCiAgICAgICAgc3RhdGU6IHN0YXRlDQogICAgICB9DQogICAgICB1cGRhdGVTdGF0ZShwYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2VzcyhyZXMubXNnKTsNCiAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVVcGRhdGUocm93KSB7DQogICAgICB0aGlzLnJlc2V0KCk7DQogICAgICBjb25zdCBpZCA9IHJvdy5kZXBsb3ltZW50SWQgfHwgdGhpcy5pZHMNCiAgICAgIGdldERlcGxveW1lbnQoaWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOw0KICAgICAgICB0aGlzLnRpdGxlID0gIuS/ruaUuea1geeoi+WumuS5iSI7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDmj5DkuqTmjInpkq4gKi8NCiAgICBzdWJtaXRGb3JtKCkgew0KICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgaWYgKHRoaXMuZm9ybS5pZCAhPSBudWxsKSB7DQogICAgICAgICAgICB1cGRhdGVEZXBsb3ltZW50KHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOw0KICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYWRkRGVwbG95bWVudCh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsNCiAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVEZWxldGUocm93KSB7DQogICAgICBjb25zdCBkZXBsb3ltZW50SWRzID0gcm93LmRlcGxveW1lbnRJZCB8fCB0aGlzLmlkczsNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOa1geeoi+WumuS5iee8luWPt+S4uiInICsgZGVwbG95bWVudElkcyArICci55qE5pWw5o2u6aG5PycsICLorablkYoiLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIg0KICAgICAgfSkudGhlbihmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuIGRlbERlcGxveW1lbnQoZGVwbG95bWVudElkcyk7DQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOw0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDlr7zlh7rmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVFeHBvcnQoKSB7DQogICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHRoaXMucXVlcnlQYXJhbXM7DQogICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbnoa7orqTlr7zlh7rmiYDmnInmtYHnqIvlrprkuYnmlbDmja7pobk/JywgIuitpuWRiiIsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwNCiAgICAgICAgdHlwZTogIndhcm5pbmciDQogICAgICB9KS50aGVuKGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gZXhwb3J0RGVwbG95bWVudChxdWVyeVBhcmFtcyk7DQogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5kb3dubG9hZChyZXNwb25zZS5tc2cpOw0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDlr7zlhaVicG1uLnhtbOaWh+S7tiAqLw0KICAgIGhhbmRsZUltcG9ydCgpew0KICAgICAgdGhpcy51cGxvYWQudGl0bGUgPSAiYnBtbjIwLnhtbOaWh+S7tuWvvOWFpSI7DQogICAgICB0aGlzLnVwbG9hZC5vcGVuID0gdHJ1ZTsNCiAgICB9LA0KICAgIC8vIOaWh+S7tuS4iuS8oOS4reWkhOeQhg0KICAgIGhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyhldmVudCwgZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIHRoaXMudXBsb2FkLmlzVXBsb2FkaW5nID0gdHJ1ZTsNCiAgICB9LA0KICAgIC8vIOaWh+S7tuS4iuS8oOaIkOWKn+WkhOeQhg0KICAgIGhhbmRsZUZpbGVTdWNjZXNzKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgdGhpcy51cGxvYWQub3BlbiA9IGZhbHNlOw0KICAgICAgdGhpcy51cGxvYWQuaXNVcGxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLmNsZWFyRmlsZXMoKTsNCiAgICAgIHRoaXMuJG1lc3NhZ2UocmVzcG9uc2UubXNnKTsNCiAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgIH0sDQogICAgLy8g5o+Q5Lqk5LiK5Lyg5paH5Lu2DQogICAgc3VibWl0RmlsZUZvcm0oKSB7DQogICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/flowable/definition","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\r\n      <el-form-item label=\"名称\" prop=\"name\">\r\n        <el-input\r\n          v-model=\"queryParams.name\"\r\n          placeholder=\"请输入名称\"\r\n          clearable\r\n          size=\"small\"\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"开始时间\" prop=\"deployTime\">\r\n        <el-date-picker clearable size=\"small\"\r\n                        v-model=\"queryParams.deployTime\"\r\n                        type=\"date\"\r\n                        value-format=\"yyyy-MM-dd\"\r\n                        placeholder=\"选择时间\">\r\n        </el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n          type=\"success\"\r\n          plain\r\n          icon=\"el-icon-plus\"\r\n          size=\"mini\"\r\n          @click=\"handleLoadXml\"\r\n        >新增</el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n          type=\"danger\"\r\n          plain\r\n          icon=\"el-icon-delete\"\r\n          size=\"mini\"\r\n          :disabled=\"multiple\"\r\n          @click=\"handleDelete\"\r\n          v-hasPermi=\"['system:deployment:remove']\"\r\n        >删除</el-button>\r\n      </el-col>\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n    <!-- <el-alert title=\"流程设计说明\" type=\"success\">\r\n      <template slot='title'>\r\n        <p>流程设计说明:</p>\r\n        <div>1、XML文件中的流程定义id属性用作流程定义的key参数。</div>\r\n        <div>2、XML文件中的流程定义name属性用作流程定义的name参数。如果未给定name属性，会使用id作为name。</div>\r\n        <div>3、当每个唯一key的流程第一次部署时，指定版本为1。对其后所有使用相同key的流程定义，部署时版本会在该key当前已部署的最高版本号基础上加1。key参数用于区分流程定义。</div>\r\n        <div>4、id参数设置为{processDefinitionKey}:{processDefinitionVersion}:{generated-id}，其中generated-id是一个唯一数字，用以保证在集群环境下，流程定义缓存中，流程id的唯一性。</div>\r\n      </template>\r\n    </el-alert> -->\r\n    <el-table v-loading=\"loading\" fit :data=\"definitionList\" border   @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n      <el-table-column label=\"流程编号\" align=\"center\" prop=\"deploymentId\" :show-overflow-tooltip=\"true\"/>\r\n      <el-table-column label=\"流程标识\" align=\"center\" prop=\"flowKey\" :show-overflow-tooltip=\"true\" />\r\n      <el-table-column label=\"流程分类\" align=\"center\" prop=\"category\" />\r\n      <el-table-column label=\"流程名称\" align=\"center\" width=\"120\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" @click=\"handleReadImage(scope.row.deploymentId)\">\r\n            <span>{{ scope.row.name }}</span>\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"业务表单\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button v-if=\"scope.row.formId\" type=\"text\" @click=\"handleForm(scope.row.formId)\">\r\n            <span>{{ scope.row.formName }}</span>\r\n          </el-button>\r\n          <label v-else>暂无表单</label>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"流程版本\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag size=\"medium\" >v{{ scope.row.version }}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag type=\"success\" v-if=\"scope.row.suspensionState === 1\">激活</el-tag>\r\n          <el-tag type=\"warning\" v-if=\"scope.row.suspensionState === 2\">挂起</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"部署时间\" align=\"center\" prop=\"deploymentTime\" width=\"180\"/>\r\n      <el-table-column label=\"操作\" width=\"250\" fixed=\"right\"class-name=\"small-padding fixed-width\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button @click=\"handleLoadXml(scope.row)\" icon=\"el-icon-edit-outline\" type=\"text\" size=\"small\">设计</el-button>\r\n          <el-button @click=\"handleAddForm(scope.row)\" icon=\"el-icon-edit-el-icon-s-promotion\" type=\"text\" size=\"small\" v-if=\"scope.row.formId == null\">配置主表单</el-button>\r\n          <el-button @click=\"handleUpdateSuspensionState(scope.row)\" icon=\"el-icon-video-pause\" type=\"text\" size=\"small\" v-if=\"scope.row.suspensionState === 1\">挂起</el-button>\r\n          <el-button @click=\"handleUpdateSuspensionState(scope.row)\" icon=\"el-icon-video-play\" type=\"text\" size=\"small\" v-if=\"scope.row.suspensionState === 2\">激活</el-button>\r\n          <el-button @click=\"handleDelete(scope.row)\" icon=\"el-icon-delete\" type=\"text\" size=\"small\" v-hasPermi=\"['system:deployment:remove']\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      v-show=\"total>0\"\r\n      :total=\"total\"\r\n      :page.sync=\"queryParams.pageNum\"\r\n      :limit.sync=\"queryParams.pageSize\"\r\n      @pagination=\"getList\"\r\n    />\r\n\r\n    <!-- 添加或修改流程定义对话框 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-form-item label=\"看看\" prop=\"name\">\r\n          <el-input v-model=\"form.name\" placeholder=\"请输入看看\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- bpmn20.xml导入对话框 -->\r\n    <el-dialog :title=\"upload.title\" :visible.sync=\"upload.open\" width=\"400px\" append-to-body>\r\n      <el-upload\r\n        ref=\"upload\"\r\n        :limit=\"1\"\r\n        accept=\".xml\"\r\n        :headers=\"upload.headers\"\r\n        :action=\"upload.url + '?name=' + upload.name+'&category='+ upload.category\"\r\n        :disabled=\"upload.isUploading\"\r\n        :on-progress=\"handleFileUploadProgress\"\r\n        :on-success=\"handleFileSuccess\"\r\n        :auto-upload=\"false\"\r\n        drag\r\n      >\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div class=\"el-upload__text\">\r\n          将文件拖到此处，或\r\n          <em>点击上传</em>\r\n        </div>\r\n        <div class=\"el-upload__tip\" slot=\"tip\">\r\n          流程名称：<el-input v-model=\"upload.name\"/>\r\n          流程分类：\r\n          <div>\r\n            <!--          <el-input v-model=\"upload.category\"/>-->\r\n            <el-select v-model=\"upload.category\" placeholder=\"请选择流程分类\">\r\n              <el-option\r\n                v-for=\"dict in dict.type.sys_process_category\"\r\n                :key=\"dict.value\"\r\n                :label=\"dict.label\"\r\n                :value=\"dict.value\"\r\n              ></el-option>\r\n            </el-select>\r\n          </div>\r\n        </div>\r\n        <div class=\"el-upload__tip\" style=\"color:red\" slot=\"tip\">提示：仅允许导入“bpmn20.xml”格式文件！</div>\r\n      </el-upload>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitFileForm\">确 定</el-button>\r\n        <el-button @click=\"upload.open = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 流程图 -->\r\n    <el-dialog :title=\"readImage.title\" :visible.sync=\"readImage.open\" width=\"70%\" append-to-body>\r\n      <!-- <el-image :src=\"readImage.src\"></el-image> -->\r\n      <bpmn-viewer :flowData=\"flowData\"/>\r\n    </el-dialog>\r\n\r\n    <!--表单配置详情-->\r\n    <el-dialog :title=\"formTitle\" :visible.sync=\"formConfOpen\" width=\"50%\" append-to-body>\r\n      <div class=\"test-form\">\r\n        <v-form-render :form-data=\"formData\" ref=\"vFormRef\"/>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!--挂载表单-->\r\n    <el-dialog :title=\"formDeployTitle\" :visible.sync=\"formDeployOpen\" width=\"60%\" append-to-body>\r\n      <el-row :gutter=\"24\">\r\n        <el-col :span=\"10\" :xs=\"24\">\r\n          <el-table\r\n            ref=\"singleTable\"\r\n            :data=\"formList\"\r\n            border\r\n            highlight-current-row\r\n            @current-change=\"handleCurrentChange\"\r\n            style=\"width: 100%\">\r\n            <el-table-column label=\"表单编号\" align=\"center\" prop=\"formId\" />\r\n            <el-table-column label=\"表单名称\" align=\"center\" prop=\"formName\" />\r\n            <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button size=\"mini\" type=\"text\" @click=\"submitFormDeploy(scope.row)\">确定</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n          <pagination\r\n            small\r\n            layout=\"prev, pager, next\"\r\n            v-show=\"formTotal>0\"\r\n            :total=\"formTotal\"\r\n            :page.sync=\"formQueryParams.pageNum\"\r\n            :limit.sync=\"formQueryParams.pageSize\"\r\n            @pagination=\"ListFormDeploy\"\r\n          />\r\n        </el-col>\r\n        <el-col :span=\"14\" :xs=\"24\">\r\n          <div class=\"test-form\">\r\n            <v-form-render :form-data=\"formData\" ref=\"vFormCurrentRowRef\"/>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </el-dialog>\r\n\r\n    <!--    &lt;!&ndash;流程设计器&ndash;&gt;-->\r\n    <!--    <el-dialog-->\r\n    <!--      title=\"流程配置\"-->\r\n    <!--      :visible.sync=\"dialogVisible\"-->\r\n    <!--      :close-on-press-escape=\"false\"-->\r\n    <!--      :fullscreen=true-->\r\n    <!--      :before-close=\"handleClose\"-->\r\n    <!--      append-to-body>-->\r\n    <!--      <Model :deployId=\"deployId\"/>-->\r\n    <!--    </el-dialog>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  listDefinition,\r\n  updateState,\r\n  delDeployment,\r\n  addDeployment,\r\n  updateDeployment,\r\n  exportDeployment,\r\n  definitionStart,\r\n  flowXmlAndNode\r\n} from \"@/api/flowable/definition\";\r\nimport { getToken } from \"@/utils/auth\";\r\nimport { getForm, addDeployForm ,listForm } from \"@/api/flowable/form\";\r\nimport BpmnViewer from '@/components/Process/viewer';\r\nimport Model from './model';\r\n\r\nexport default {\r\n  name: \"Definition\",\r\n  dicts: ['sys_process_category'],\r\n  components: {\r\n    BpmnViewer,\r\n    Model\r\n  },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      dialogVisible: false,\r\n      // 选中数组\r\n      ids: [],\r\n      // 非单个禁用\r\n      single: true,\r\n      // 非多个禁用\r\n      multiple: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 流程定义表格数据\r\n      definitionList: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      formConfOpen: false,\r\n      formTitle: \"\",\r\n      formDeployOpen: false,\r\n      formDeployTitle: \"\",\r\n      formList: [],\r\n      formTotal:0,\r\n      formData: {}, // 默认表单数据\r\n      readImage:{\r\n        open: false,\r\n        src: \"\",\r\n      },\r\n      // bpmn.xml 导入\r\n      upload: {\r\n        // 是否显示弹出层（xml导入）\r\n        open: false,\r\n        // 弹出层标题（xml导入）\r\n        title: \"\",\r\n        // 是否禁用上传\r\n        isUploading: false,\r\n        name: null,\r\n        category: null,\r\n        // 设置上传的请求头部\r\n        headers: { Authorization: \"Bearer \" + getToken() },\r\n        // 上传的地址\r\n        url: process.env.VUE_APP_BASE_API + \"/flowable/definition/import\"\r\n      },\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        name: null,\r\n        category: null,\r\n        key: null,\r\n        tenantId: null,\r\n        deployTime: null,\r\n        derivedFrom: null,\r\n        derivedFromRoot: null,\r\n        parentDeploymentId: null,\r\n        engineVersion: null\r\n      },\r\n      formQueryParams:{\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n      },\r\n      // 挂载表单到流程实例\r\n      formDeployParam:{\r\n        formId: null,\r\n        deployId: null\r\n      },\r\n      deployId: '',\r\n      currentRow: null,\r\n      // xml\r\n      flowData: {},\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  activated() {\r\n    const time = this.$route.query.t;\r\n    if (time != null) {\r\n      this.getList();\r\n    }\r\n  },\r\n  methods: {\r\n    /** 查询流程定义列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      listDefinition(this.queryParams).then(response => {\r\n        this.definitionList = response.data.records;\r\n        this.total = response.data.total;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    handleClose(done) {\r\n      this.$confirm('确定要关闭吗？关闭未保存的修改都会丢失？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        done();\r\n      }).catch(() => {});\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.open = false;\r\n      this.reset();\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      this.form = {\r\n        id: null,\r\n        name: null,\r\n        category: null,\r\n        key: null,\r\n        tenantId: null,\r\n        deployTime: null,\r\n        derivedFrom: null,\r\n        derivedFromRoot: null,\r\n        parentDeploymentId: null,\r\n        engineVersion: null\r\n      };\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange(selection) {\r\n      this.ids = selection.map(item => item.deploymentId)\r\n      this.single = selection.length!==1\r\n      this.multiple = !selection.length\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.reset();\r\n      this.open = true;\r\n      this.title = \"添加流程定义\";\r\n    },\r\n    /** 跳转到流程设计页面 */\r\n    handleLoadXml(row){\r\n      this.$router.push({ path: '/flowable/definition/model',query: { deployId: row.deploymentId }})\r\n    },\r\n    /** 流程图查看 */\r\n    handleReadImage(deployId){\r\n      this.readImage.title = \"流程图\";\r\n      this.readImage.open = true;\r\n      // this.readImage.src = process.env.VUE_APP_BASE_API + \"/flowable/definition/readImage/\" + deploymentId;\r\n      flowXmlAndNode({deployId:deployId}).then(res => {\r\n        this.flowData = res.data;\r\n      })\r\n    },\r\n    /** 表单查看 */\r\n    handleForm(formId){\r\n      getForm(formId).then(res =>{\r\n        this.formTitle = \"表单详情\";\r\n        this.formConfOpen = true;\r\n        this.$nextTick(() => {\r\n          // 回显数据\r\n          this.$refs.vFormRef.setFormJson(JSON.parse(res.data.formContent))\r\n          this.$nextTick(() => {\r\n            // 表单禁用\r\n            this.$refs.vFormRef.disableForm();\r\n          })\r\n        })\r\n      })\r\n    },\r\n    /** 启动流程 */\r\n    handleDefinitionStart(row){\r\n      definitionStart(row.id).then(res =>{\r\n        this.$modal.msgSuccess(res.msg);\r\n      })\r\n    },\r\n    /** 挂载表单弹框 */\r\n    handleAddForm(row){\r\n      this.formDeployParam.deployId = row.deploymentId\r\n      this.ListFormDeploy()\r\n    },\r\n    /** 挂载表单列表 */\r\n    ListFormDeploy(){\r\n      listForm(this.formQueryParams).then(res =>{\r\n        this.formList = res.rows;\r\n        this.formTotal = res.total;\r\n        this.formDeployOpen = true;\r\n        this.formDeployTitle = \"挂载表单\";\r\n      })\r\n    },\r\n    // /** 更改挂载表单弹框 */\r\n    // handleEditForm(row){\r\n    //   this.formDeployParam.deployId = row.deploymentId\r\n    //   const queryParams = {\r\n    //     pageNum: 1,\r\n    //     pageSize: 10\r\n    //   }\r\n    //   listForm(queryParams).then(res =>{\r\n    //     this.formList = res.rows;\r\n    //     this.formDeployOpen = true;\r\n    //     this.formDeployTitle = \"挂载表单\";\r\n    //   })\r\n    // },\r\n    /** 挂载表单 */\r\n    submitFormDeploy(row){\r\n      this.formDeployParam.formId = row.formId;\r\n      addDeployForm(this.formDeployParam).then(res =>{\r\n        this.$modal.msgSuccess(res.msg);\r\n        this.formDeployOpen = false;\r\n        this.getList();\r\n      })\r\n    },\r\n    handleCurrentChange(data) {\r\n      if (data) {\r\n        this.$nextTick(() => {\r\n          // 回显数据\r\n          this.$refs.vFormCurrentRowRef.setFormJson(JSON.parse(data.formContent))\r\n          this.$nextTick(() => {\r\n            // 表单禁用\r\n            this.$refs.vFormCurrentRowRef.disableForm();\r\n          })\r\n        })\r\n      }\r\n    },\r\n    /** 挂起/激活流程 */\r\n    handleUpdateSuspensionState(row){\r\n      let state = 1;\r\n      if (row.suspensionState === 1) {\r\n        state = 2\r\n      }\r\n      const params = {\r\n        deployId: row.deploymentId,\r\n        state: state\r\n      }\r\n      updateState(params).then(res => {\r\n        this.$modal.msgSuccess(res.msg);\r\n        this.getList();\r\n      });\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset();\r\n      const id = row.deploymentId || this.ids\r\n      getDeployment(id).then(response => {\r\n        this.form = response.data;\r\n        this.open = true;\r\n        this.title = \"修改流程定义\";\r\n      });\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm() {\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (valid) {\r\n          if (this.form.id != null) {\r\n            updateDeployment(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"修改成功\");\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          } else {\r\n            addDeployment(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"新增成功\");\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const deploymentIds = row.deploymentId || this.ids;\r\n      this.$confirm('是否确认删除流程定义编号为\"' + deploymentIds + '\"的数据项?', \"警告\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      }).then(function() {\r\n        return delDeployment(deploymentIds);\r\n      }).then(() => {\r\n        this.getList();\r\n        this.$modal.msgSuccess(\"删除成功\");\r\n      })\r\n    },\r\n    /** 导出按钮操作 */\r\n    handleExport() {\r\n      const queryParams = this.queryParams;\r\n      this.$confirm('是否确认导出所有流程定义数据项?', \"警告\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      }).then(function() {\r\n        return exportDeployment(queryParams);\r\n      }).then(response => {\r\n        this.download(response.msg);\r\n      })\r\n    },\r\n    /** 导入bpmn.xml文件 */\r\n    handleImport(){\r\n      this.upload.title = \"bpmn20.xml文件导入\";\r\n      this.upload.open = true;\r\n    },\r\n    // 文件上传中处理\r\n    handleFileUploadProgress(event, file, fileList) {\r\n      this.upload.isUploading = true;\r\n    },\r\n    // 文件上传成功处理\r\n    handleFileSuccess(response, file, fileList) {\r\n      this.upload.open = false;\r\n      this.upload.isUploading = false;\r\n      this.$refs.upload.clearFiles();\r\n      this.$message(response.msg);\r\n      this.getList();\r\n    },\r\n    // 提交上传文件\r\n    submitFileForm() {\r\n      this.$refs.upload.submit();\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}