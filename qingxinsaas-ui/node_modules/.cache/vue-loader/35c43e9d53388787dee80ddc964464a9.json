{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\components\\Process\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\components\\Process\\index.vue","mtime":1733705220390},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyDmsYnljJYNCmltcG9ydCBjdXN0b21UcmFuc2xhdGUgZnJvbSAnLi9jdXN0b21QYW5lbC9jdXN0b21UcmFuc2xhdGUnDQppbXBvcnQgTW9kZWxlciBmcm9tICdicG1uLWpzL2xpYi9Nb2RlbGVyJw0KaW1wb3J0IERlc2lnbmVyIGZyb20gJy4vZGVzaWduZXInDQppbXBvcnQgZ2V0SW5pdFN0ciBmcm9tICcuL2Zsb3dhYmxlL2luaXQnDQppbXBvcnQge1N0clV0aWx9IGZyb20gJ0AvdXRpbHMvU3RyVXRpbCcNCi8vIOW8leWFpWZsb3dhYmxl55qE6IqC54K55paH5Lu2DQppbXBvcnQgRmxvd2FibGVNb2R1bGUgZnJvbSAnLi9mbG93YWJsZS9mbG93YWJsZS5qc29uJw0KaW1wb3J0IGN1c3RvbUNvbnRyb2xzTW9kdWxlIGZyb20gJy4vY3VzdG9tUGFuZWwnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJCcG1uTW9kZWwiLA0KICBjb21wb25lbnRzOiB7RGVzaWduZXJ9LA0KICAvKiog57uE5Lu25Lyg5YC8ICAqLw0KICBwcm9wcyA6IHsNCiAgICB4bWw6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICcnDQogICAgfSwNCiAgICBpc1ZpZXc6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG1vZGVsZXI6IG51bGwsDQogICAgICB6b29tOiAxLA0KICAgICAgbG9hZENhbnZhczogZmFsc2UsICAvLyDlvZPliY3nu4Tku7bmuLLmn5PnhLblkI7lho3liqDovb1jYW52YXMNCiAgICAgIHNpbXVsYXRpb25TdGF0dXM6IGZhbHNlLA0KICAgICAgYnBtbmxpbnRTdGF0dXM6IGZhbHNlLA0KICAgICAgc2ltdWxhdGlvbjogdHJ1ZSwNCiAgICAgIGRlc2lnbmVyOiB0cnVlLA0KICAgIH0NCiAgfSwNCiAgLyoqIOS8oOWAvOebkeWQrCAqLw0KICB3YXRjaDogew0KICAgIHhtbDogew0KICAgICAgaGFuZGxlcihuZXdWYWwpIHsNCiAgICAgICAgaWYgKFN0clV0aWwuaXNOb3RCbGFuayhuZXdWYWwpKSB7DQogICAgICAgICAgdGhpcy5jcmVhdGVOZXdEaWFncmFtKG5ld1ZhbCkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLm5ld0RpYWdyYW0oKQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgaW1tZWRpYXRlOiB0cnVlLCAvLyDnq4vljbPnlJ/mlYgNCiAgICB9LA0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGFkZGl0aW9uYWxNb2R1bGVzKCkgew0KICAgICAgY29uc3QgTW9kdWxlcyA9IFtdOw0KICAgICAgTW9kdWxlcy5wdXNoKGN1c3RvbUNvbnRyb2xzTW9kdWxlKTsNCiAgICAgIE1vZHVsZXMucHVzaCh7IC8v5rGJ5YyWDQogICAgICAgIHRyYW5zbGF0ZTogWyd2YWx1ZScsIGN1c3RvbVRyYW5zbGF0ZV0NCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIE1vZHVsZXM7DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICAvKiog5Yib5bu6YnBtbiDlrp7kvosgKi8NCiAgICBjb25zdCBtb2RlbGVyID0gbmV3IE1vZGVsZXIoew0KICAgICAgY29udGFpbmVyOiB0aGlzLiRyZWZzLmNhbnZhcywNCiAgICAgIGFkZGl0aW9uYWxNb2R1bGVzOiB0aGlzLmFkZGl0aW9uYWxNb2R1bGVzLA0KICAgICAgbW9kZGxlRXh0ZW5zaW9uczogew0KICAgICAgICBmbG93YWJsZTogRmxvd2FibGVNb2R1bGUNCiAgICAgIH0sDQogICAgICBrZXlib2FyZDogeyBiaW5kVG86IGRvY3VtZW50IH0sDQogICAgfSkNCiAgICB0aGlzLm1vZGVsZXIgPSBtb2RlbGVyOw0KICAgIC8vIOazqOWGjCBtb2RlbGVyIOebuOWFs+S/oeaBrw0KICAgIHRoaXMubW9kZWxlclN0b3JlLm1vZGVsZXIgPSBtb2RlbGVyOw0KICAgIHRoaXMubW9kZWxlclN0b3JlLm1vZGVsaW5nID0gbW9kZWxlci5nZXQoIm1vZGVsaW5nIik7DQogICAgdGhpcy5tb2RlbGVyU3RvcmUubW9kZGxlID0gbW9kZWxlci5nZXQoIm1vZGRsZSIpOw0KICAgIHRoaXMubW9kZWxlclN0b3JlLmNhbnZhcyA9IG1vZGVsZXIuZ2V0KCJjYW52YXMiKTsNCiAgICB0aGlzLm1vZGVsZXJTdG9yZS5icG1uRmFjdG9yeSA9IG1vZGVsZXIuZ2V0KCJicG1uRmFjdG9yeSIpOw0KICAgIHRoaXMubW9kZWxlclN0b3JlLmVsUmVnaXN0cnkgPSBtb2RlbGVyLmdldCgiZWxlbWVudFJlZ2lzdHJ5Iik7DQogICAgLy8g55u05o6l54K55Ye75paw5bu65oyJ6ZKu5pe2LOi/m+ihjOaWsOWinua1geeoi+Wbvg0KICAgIGlmIChTdHJVdGlsLmlzQmxhbmsodGhpcy54bWwpKSB7DQogICAgICB0aGlzLm5ld0RpYWdyYW0oKQ0KICAgIH0gZWxzZSB7DQogICAgICB0aGlzLmNyZWF0ZU5ld0RpYWdyYW0odGhpcy54bWwpDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g5qC55o2u6buY6K6k5paH5Lu25Yid5aeL5YyW5rWB56iL5Zu+DQogICAgbmV3RGlhZ3JhbSgpIHsNCiAgICAgIHRoaXMuY3JlYXRlTmV3RGlhZ3JhbShnZXRJbml0U3RyKCkpDQogICAgfSwNCg0KICAgIC8vIOagueaNruaPkOS+m+eahHhtbOWIm+W7uua1geeoi+Wbvg0KICAgIGFzeW5jIGNyZWF0ZU5ld0RpYWdyYW0oZGF0YSkgew0KICAgICAgLy8g5bCG5a2X56ym5Liy6L2s5o2i5oiQ5Zu+5pi+56S65Ye65p2lDQogICAgICAvLyBkYXRhID0gZGF0YS5yZXBsYWNlKC88IVxbQ0RBVEFcWyguKz8pXV0+L2csICcmbHQ7IVtDREFUQVskMV1dJmd0OycpDQogICAgICBpZiAoU3RyVXRpbC5pc05vdEJsYW5rKHRoaXMubW9kZWxlclN0b3JlLm1vZGVsZXIpKSB7DQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoLzwhXFtDREFUQVxbKC4rPyldXT4vZywgZnVuY3Rpb24gKG1hdGNoLCBzdHIpIHsNCiAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvPC9nLCAnJmx0OycpDQogICAgICAgICAgfQ0KICAgICAgICApDQogICAgICAgIHRyeSB7DQogICAgICAgICAgYXdhaXQgdGhpcy5tb2RlbGVyU3RvcmUubW9kZWxlci5pbXBvcnRYTUwoZGF0YSkNCiAgICAgICAgICB0aGlzLmZpdFZpZXdwb3J0KCkNCiAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSwgZXJyLndhcm5pbmdzKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCg0KICAgIC8vIOiuqeWbvuiDveiHqumAguW6lOWxj+W5lQ0KICAgIGZpdFZpZXdwb3J0KCkgew0KICAgICAgdGhpcy56b29tID0gdGhpcy5tb2RlbGVyU3RvcmUuY2FudmFzLnpvb20oJ2ZpdC12aWV3cG9ydCcpDQogICAgICBjb25zdCBiYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZsb3ctY29udGFpbmVycyAudmlld3BvcnQnKS5nZXRCQm94KCkNCiAgICAgIGNvbnN0IGN1cnJlbnRWaWV3Qm94ID0gdGhpcy5tb2RlbGVyU3RvcmUuY2FudmFzLnZpZXdib3goKQ0KICAgICAgY29uc3QgZWxlbWVudE1pZCA9IHsNCiAgICAgICAgeDogYmJveC54ICsgYmJveC53aWR0aCAvIDIgLSA2NSwNCiAgICAgICAgeTogYmJveC55ICsgYmJveC5oZWlnaHQgLyAyDQogICAgICB9DQogICAgICB0aGlzLm1vZGVsZXJTdG9yZS5jYW52YXMudmlld2JveCh7DQogICAgICAgIHg6IGVsZW1lbnRNaWQueCAtIGN1cnJlbnRWaWV3Qm94LndpZHRoIC8gMiwNCiAgICAgICAgeTogZWxlbWVudE1pZC55IC0gY3VycmVudFZpZXdCb3guaGVpZ2h0IC8gMiwNCiAgICAgICAgd2lkdGg6IGN1cnJlbnRWaWV3Qm94LndpZHRoLA0KICAgICAgICBoZWlnaHQ6IGN1cnJlbnRWaWV3Qm94LmhlaWdodA0KICAgICAgfSkNCiAgICAgIHRoaXMuem9vbSA9IGJib3gud2lkdGggLyBjdXJyZW50Vmlld0JveC53aWR0aCAqIDEuOA0KICAgICAgdGhpcy5sb2FkQ2FudmFzID0gdHJ1ZTsNCiAgICB9LA0KDQogICAgLy8g5pS+5aSn57yp5bCPDQogICAgem9vbVZpZXdwb3J0KHpvb21JbiA9IHRydWUpIHsNCiAgICAgIHRoaXMuem9vbSA9IHRoaXMubW9kZWxlclN0b3JlLmNhbnZhcy56b29tKCkNCiAgICAgIHRoaXMuem9vbSArPSAoem9vbUluID8gMC4xIDogLTAuMSkNCiAgICAgIHRoaXMubW9kZWxlclN0b3JlLmNhbnZhcy56b29tKHRoaXMuem9vbSkNCiAgICB9LA0KDQogICAgLy8g6I635Y+W5rWB56iL5Z+656GA5L+h5oGvDQogICAgZ2V0UHJvY2VzcygpIHsNCiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmdldFByb2Nlc3NFbGVtZW50KCkNCiAgICAgIHJldHVybiB7DQogICAgICAgIGlkOiBlbGVtZW50LmlkLA0KICAgICAgICBuYW1lOiBlbGVtZW50Lm5hbWUsDQogICAgICAgIGNhdGVnb3J5OiBlbGVtZW50LnByb2Nlc3NDYXRlZ29yeQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDojrflj5bmtYHnqIvkuLvpnaLmnb/oioLngrkNCiAgICBnZXRQcm9jZXNzRWxlbWVudCgpIHsNCiAgICAgIGNvbnN0IHJvb3RFbGVtZW50cyA9IHRoaXMubW9kZWxlclN0b3JlLm1vZGVsZXIuZ2V0RGVmaW5pdGlvbnMoKS5yb290RWxlbWVudHMNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9vdEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmIChyb290RWxlbWVudHNbaV0uJHR5cGUgPT09ICdicG1uOlByb2Nlc3MnKSByZXR1cm4gcm9vdEVsZW1lbnRzW2ldDQogICAgICB9DQogICAgfSwNCg0KICAgIC8vIOS/neWtmHhtbA0KICAgIGFzeW5jIHNhdmVYTUwoZG93bmxvYWQgPSBmYWxzZSkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3Qge3htbH0gPSBhd2FpdCB0aGlzLm1vZGVsZXJTdG9yZS5tb2RlbGVyLnNhdmVYTUwoe2Zvcm1hdDogdHJ1ZX0pDQogICAgICAgIGlmIChkb3dubG9hZCkgew0KICAgICAgICAgIHRoaXMuZG93bmxvYWRGaWxlKGAke3RoaXMuZ2V0UHJvY2Vzc0VsZW1lbnQoKS5uYW1lfS5icG1uMjAueG1sYCwgeG1sLCAnYXBwbGljYXRpb24veG1sJykNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4geG1sDQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDlnKjnur/mn6XnnIt4bWwNCiAgICBhc3luYyBzaG93WE1MKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgeG1sU3RyID0gYXdhaXQgdGhpcy5zYXZlWE1MKCkNCiAgICAgICAgdGhpcy4kZW1pdCgnc2hvd1hNTCcsIHhtbFN0cikNCiAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICB9DQogICAgfSwNCg0KICAgIC8vIOS/neWtmOa1geeoi+WbvuS4unN2Zw0KICAgIGFzeW5jIHNhdmVJbWcodHlwZSA9ICdzdmcnLCBkb3dubG9hZCA9IGZhbHNlKSB7DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCB7c3ZnfSA9IGF3YWl0IHRoaXMubW9kZWxlclN0b3JlLm1vZGVsZXIuc2F2ZVNWRyh7Zm9ybWF0OiB0cnVlfSkNCiAgICAgICAgaWYgKGRvd25sb2FkKSB7DQogICAgICAgICAgdGhpcy5kb3dubG9hZEZpbGUodGhpcy5nZXRQcm9jZXNzRWxlbWVudCgpLm5hbWUsIHN2ZywgJ2ltYWdlL3N2Zyt4bWwnKQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBzdmcNCiAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICB9DQogICAgfSwNCg0KICAgIC8vIOS/neWtmOa1geeoi+Wbvg0KICAgIGFzeW5jIHNhdmUoKSB7DQogICAgICBjb25zdCBwcm9jZXNzID0gdGhpcy5nZXRQcm9jZXNzKCkNCiAgICAgIGNvbnN0IHhtbCA9IGF3YWl0IHRoaXMuc2F2ZVhNTCgpDQogICAgICBjb25zdCBzdmcgPSBhd2FpdCB0aGlzLnNhdmVJbWcoKQ0KICAgICAgY29uc3QgcmVzdWx0ID0ge3Byb2Nlc3MsIHhtbCwgc3ZnfQ0KICAgICAgdGhpcy4kZW1pdCgnc2F2ZScsIHJlc3VsdCkNCiAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UocmVzdWx0LCAnKicpDQogICAgICB0aGlzLmdvQmFjaygpOw0KICAgIH0sDQoNCiAgICAvLyDmiZPlvIDmtYHnqIvmlofku7YNCiAgICBvcGVuQnBtbihmaWxlKSB7DQogICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpDQogICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlLCAndXRmLTgnKQ0KICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHsNCiAgICAgICAgdGhpcy5jcmVhdGVOZXdEaWFncmFtKHJlYWRlci5yZXN1bHQpDQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9LA0KDQogICAgLy8g5LiL6L295rWB56iL5paH5Lu2DQogICAgZG93bmxvYWRGaWxlKGZpbGVuYW1lLCBkYXRhLCB0eXBlKSB7DQogICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgY29uc3QgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2RhdGFdLCB7dHlwZTogdHlwZX0pKTsNCiAgICAgIGEuaHJlZiA9IHVybA0KICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lDQogICAgICBhLmNsaWNrKCkNCiAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCkNCiAgICB9LA0KDQogICAgLyoqIOWFs+mXreW9k+WJjeagh+etvumhteW5tui/lOWbnuS4iuS4qumhtemdoiAqLw0KICAgIGdvQmFjaygpIHsNCiAgICAgIGNvbnN0IG9iaiA9IHtwYXRoOiAiL2Zsb3dhYmxlL2RlZmluaXRpb24iLCBxdWVyeToge3Q6IERhdGUubm93KCl9fTsNCiAgICAgIHRoaXMuJHRhYi5jbG9zZU9wZW5QYWdlKG9iaik7DQogICAgICB0aGlzLnRvZ2dsZVNpZGVCYXIoKTsNCiAgICB9LA0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Process","sourcesContent":["<template>\r\n  <div v-loading=\"isView\" class=\"flow-containers\" :class=\"{ 'view-mode': isView }\">\r\n    <el-container style=\"height: 100%\">\r\n      <el-header style=\"border-bottom: 1px solid rgb(218 218 218);height: auto;padding-left:0\">\r\n        <div style=\"display: flex; padding: 10px 0; justify-content: space-between;\">\r\n          <el-button-group>\r\n            <el-upload action=\"\" :before-upload=\"openBpmn\" style=\"margin-right: 10px; display:inline-block;\">\r\n              <el-tooltip effect=\"dark\" content=\"加载xml\" placement=\"bottom\">\r\n                <el-button size=\"mini\" icon=\"el-icon-folder-opened\" />\r\n              </el-tooltip>\r\n            </el-upload>\r\n            <el-tooltip effect=\"dark\" content=\"新建\" placement=\"bottom\">\r\n              <el-button size=\"mini\" icon=\"el-icon-circle-plus\" @click=\"newDiagram\" />\r\n            </el-tooltip>\r\n            <el-tooltip effect=\"dark\" content=\"自适应屏幕\" placement=\"bottom\">\r\n              <el-button size=\"mini\" icon=\"el-icon-rank\" @click=\"fitViewport\" />\r\n            </el-tooltip>\r\n            <el-tooltip effect=\"dark\" content=\"放大\" placement=\"bottom\">\r\n              <el-button size=\"mini\" icon=\"el-icon-zoom-in\" @click=\"zoomViewport(true)\" />\r\n            </el-tooltip>\r\n            <el-tooltip effect=\"dark\" content=\"缩小\" placement=\"bottom\">\r\n              <el-button size=\"mini\" icon=\"el-icon-zoom-out\" @click=\"zoomViewport(false)\" />\r\n            </el-tooltip>\r\n            <el-tooltip effect=\"dark\" content=\"后退\" placement=\"bottom\">\r\n              <el-button size=\"mini\" icon=\"el-icon-back\" @click=\"modeler.get('commandStack').undo()\" />\r\n            </el-tooltip>\r\n            <el-tooltip effect=\"dark\" content=\"前进\" placement=\"bottom\">\r\n              <el-button size=\"mini\" icon=\"el-icon-right\" @click=\"modeler.get('commandStack').redo()\" />\r\n            </el-tooltip>\r\n<!--            <el-button size=\"mini\" icon=\"el-icon-share\" @click=\"processSimulation\">-->\r\n<!--              {{ this.simulationStatus ? '退出模拟' : '开启模拟' }}-->\r\n<!--            </el-button>-->\r\n<!--            <el-button size=\"mini\" icon=\"el-icon-first-aid-kit\" @click=\"handlerIntegrityCheck\">-->\r\n<!--              {{ this.bpmnlintStatus ? '关闭检查' : '开启检查' }}-->\r\n<!--            </el-button>-->\r\n          </el-button-group>\r\n          <el-button-group>\r\n            <el-button size=\"mini\" icon=\"el-icon-view\" @click=\"showXML\">查看xml</el-button>\r\n            <el-button size=\"mini\" icon=\"el-icon-download\" @click=\"saveXML(true)\">下载xml</el-button>\r\n            <el-button size=\"mini\" icon=\"el-icon-picture\" @click=\"saveImg('svg', true)\">下载svg</el-button>\r\n            <el-button size=\"mini\" type=\"primary\" @click=\"save\">保存模型</el-button>\r\n            <el-button size=\"mini\" type=\"danger\" @click=\"goBack\">关闭</el-button>\r\n          </el-button-group>\r\n        </div>\r\n      </el-header>\r\n      <!-- 流程设计页面 -->\r\n      <el-container style=\"align-items: stretch\">\r\n        <el-main>\r\n          <div ref=\"canvas\" class=\"canvas\" />\r\n        </el-main>\r\n\r\n        <!--右侧属性栏-->\r\n        <el-card shadow=\"never\" class=\"normalPanel\">\r\n          <designer v-if=\"loadCanvas\"></designer>\r\n        </el-card>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 汉化\r\nimport customTranslate from './customPanel/customTranslate'\r\nimport Modeler from 'bpmn-js/lib/Modeler'\r\nimport Designer from './designer'\r\nimport getInitStr from './flowable/init'\r\nimport {StrUtil} from '@/utils/StrUtil'\r\n// 引入flowable的节点文件\r\nimport FlowableModule from './flowable/flowable.json'\r\nimport customControlsModule from './customPanel'\r\nexport default {\r\n  name: \"BpmnModel\",\r\n  components: {Designer},\r\n  /** 组件传值  */\r\n  props : {\r\n    xml: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    isView: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      modeler: null,\r\n      zoom: 1,\r\n      loadCanvas: false,  // 当前组件渲染然后再加载canvas\r\n      simulationStatus: false,\r\n      bpmnlintStatus: false,\r\n      simulation: true,\r\n      designer: true,\r\n    }\r\n  },\r\n  /** 传值监听 */\r\n  watch: {\r\n    xml: {\r\n      handler(newVal) {\r\n        if (StrUtil.isNotBlank(newVal)) {\r\n          this.createNewDiagram(newVal)\r\n        } else {\r\n          this.newDiagram()\r\n        }\r\n      },\r\n      immediate: true, // 立即生效\r\n    },\r\n  },\r\n  computed: {\r\n    additionalModules() {\r\n      const Modules = [];\r\n      Modules.push(customControlsModule);\r\n      Modules.push({ //汉化\r\n        translate: ['value', customTranslate]\r\n      });\r\n      return Modules;\r\n    },\r\n  },\r\n  mounted() {\r\n    /** 创建bpmn 实例 */\r\n    const modeler = new Modeler({\r\n      container: this.$refs.canvas,\r\n      additionalModules: this.additionalModules,\r\n      moddleExtensions: {\r\n        flowable: FlowableModule\r\n      },\r\n      keyboard: { bindTo: document },\r\n    })\r\n    this.modeler = modeler;\r\n    // 注册 modeler 相关信息\r\n    this.modelerStore.modeler = modeler;\r\n    this.modelerStore.modeling = modeler.get(\"modeling\");\r\n    this.modelerStore.moddle = modeler.get(\"moddle\");\r\n    this.modelerStore.canvas = modeler.get(\"canvas\");\r\n    this.modelerStore.bpmnFactory = modeler.get(\"bpmnFactory\");\r\n    this.modelerStore.elRegistry = modeler.get(\"elementRegistry\");\r\n    // 直接点击新建按钮时,进行新增流程图\r\n    if (StrUtil.isBlank(this.xml)) {\r\n      this.newDiagram()\r\n    } else {\r\n      this.createNewDiagram(this.xml)\r\n    }\r\n  },\r\n  methods: {\r\n    // 根据默认文件初始化流程图\r\n    newDiagram() {\r\n      this.createNewDiagram(getInitStr())\r\n    },\r\n\r\n    // 根据提供的xml创建流程图\r\n    async createNewDiagram(data) {\r\n      // 将字符串转换成图显示出来\r\n      // data = data.replace(/<!\\[CDATA\\[(.+?)]]>/g, '&lt;![CDATA[$1]]&gt;')\r\n      if (StrUtil.isNotBlank(this.modelerStore.modeler)) {\r\n        data = data.replace(/<!\\[CDATA\\[(.+?)]]>/g, function (match, str) {\r\n            return str.replace(/</g, '&lt;')\r\n          }\r\n        )\r\n        try {\r\n          await this.modelerStore.modeler.importXML(data)\r\n          this.fitViewport()\r\n        } catch (err) {\r\n          console.error(err.message, err.warnings)\r\n        }\r\n      }\r\n    },\r\n\r\n    // 让图能自适应屏幕\r\n    fitViewport() {\r\n      this.zoom = this.modelerStore.canvas.zoom('fit-viewport')\r\n      const bbox = document.querySelector('.flow-containers .viewport').getBBox()\r\n      const currentViewBox = this.modelerStore.canvas.viewbox()\r\n      const elementMid = {\r\n        x: bbox.x + bbox.width / 2 - 65,\r\n        y: bbox.y + bbox.height / 2\r\n      }\r\n      this.modelerStore.canvas.viewbox({\r\n        x: elementMid.x - currentViewBox.width / 2,\r\n        y: elementMid.y - currentViewBox.height / 2,\r\n        width: currentViewBox.width,\r\n        height: currentViewBox.height\r\n      })\r\n      this.zoom = bbox.width / currentViewBox.width * 1.8\r\n      this.loadCanvas = true;\r\n    },\r\n\r\n    // 放大缩小\r\n    zoomViewport(zoomIn = true) {\r\n      this.zoom = this.modelerStore.canvas.zoom()\r\n      this.zoom += (zoomIn ? 0.1 : -0.1)\r\n      this.modelerStore.canvas.zoom(this.zoom)\r\n    },\r\n\r\n    // 获取流程基础信息\r\n    getProcess() {\r\n      const element = this.getProcessElement()\r\n      return {\r\n        id: element.id,\r\n        name: element.name,\r\n        category: element.processCategory\r\n      }\r\n    },\r\n\r\n    // 获取流程主面板节点\r\n    getProcessElement() {\r\n      const rootElements = this.modelerStore.modeler.getDefinitions().rootElements\r\n      for (let i = 0; i < rootElements.length; i++) {\r\n        if (rootElements[i].$type === 'bpmn:Process') return rootElements[i]\r\n      }\r\n    },\r\n\r\n    // 保存xml\r\n    async saveXML(download = false) {\r\n      try {\r\n        const {xml} = await this.modelerStore.modeler.saveXML({format: true})\r\n        if (download) {\r\n          this.downloadFile(`${this.getProcessElement().name}.bpmn20.xml`, xml, 'application/xml')\r\n        }\r\n        return xml\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    },\r\n\r\n    // 在线查看xml\r\n    async showXML() {\r\n      try {\r\n        const xmlStr = await this.saveXML()\r\n        this.$emit('showXML', xmlStr)\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    },\r\n\r\n    // 保存流程图为svg\r\n    async saveImg(type = 'svg', download = false) {\r\n      try {\r\n        const {svg} = await this.modelerStore.modeler.saveSVG({format: true})\r\n        if (download) {\r\n          this.downloadFile(this.getProcessElement().name, svg, 'image/svg+xml')\r\n        }\r\n        return svg\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    },\r\n\r\n    // 保存流程图\r\n    async save() {\r\n      const process = this.getProcess()\r\n      const xml = await this.saveXML()\r\n      const svg = await this.saveImg()\r\n      const result = {process, xml, svg}\r\n      this.$emit('save', result)\r\n      window.parent.postMessage(result, '*')\r\n      this.goBack();\r\n    },\r\n\r\n    // 打开流程文件\r\n    openBpmn(file) {\r\n      const reader = new FileReader()\r\n      reader.readAsText(file, 'utf-8')\r\n      reader.onload = () => {\r\n        this.createNewDiagram(reader.result)\r\n      }\r\n      return false\r\n    },\r\n\r\n    // 下载流程文件\r\n    downloadFile(filename, data, type) {\r\n      const a = document.createElement('a');\r\n      const url = window.URL.createObjectURL(new Blob([data], {type: type}));\r\n      a.href = url\r\n      a.download = filename\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n    },\r\n\r\n    /** 关闭当前标签页并返回上个页面 */\r\n    goBack() {\r\n      const obj = {path: \"/flowable/definition\", query: {t: Date.now()}};\r\n      this.$tab.closeOpenPage(obj);\r\n      this.toggleSideBar();\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n/*左边工具栏以及编辑节点的样式*/\r\n@import \"~bpmn-js/dist/assets/diagram-js.css\";\r\n@import \"~bpmn-js/dist/assets/bpmn-font/css/bpmn.css\";\r\n@import \"~bpmn-js/dist/assets/bpmn-font/css/bpmn-codes.css\";\r\n@import \"~bpmn-js/dist/assets/bpmn-font/css/bpmn-embedded.css\";\r\n//@import \"~bpmn-js-bpmnlint/dist/assets/css/bpmn-js-bpmnlint.css\";\r\n.view-mode {\r\n  .el-header, .el-aside, .djs-palette, .bjs-powered-by {\r\n    display: none;\r\n  }\r\n  .el-loading-mask {\r\n    background-color: initial;\r\n  }\r\n  .el-loading-spinner {\r\n    display: none;\r\n  }\r\n}\r\n\r\n.flow-containers {\r\n  width: 100%;\r\n  height: 100%;\r\n  .canvas {\r\n    min-height: 850px;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImEiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTTAgMTBoNDBNMTAgMHY0ME0wIDIwaDQwTTIwIDB2NDBNMCAzMGg0ME0zMCAwdjQwIiBmaWxsPSJub25lIiBzdHJva2U9IiNlMGUwZTAiIG9wYWNpdHk9Ii4yIi8+PHBhdGggZD0iTTQwIDBIMHY0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2EpIi8+PC9zdmc+\")\r\n  }\r\n  .panel {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 50px;\r\n    width: 300px;\r\n  }\r\n  .load {\r\n    margin-right: 10px;\r\n  }\r\n  .normalPanel {\r\n    width: 460px;\r\n    height: 100%;\r\n    padding: 20px 20px;\r\n  }\r\n\r\n  .el-main {\r\n    position: relative;\r\n    padding: 0;\r\n  }\r\n\r\n  .el-main .button-group {\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: absolute;\r\n    width: auto;\r\n    height: auto;\r\n    top: 10px;\r\n    right: 10px;\r\n  }\r\n\r\n  .button-group .el-button {\r\n    width: 100%;\r\n    margin: 0 0 5px;\r\n  }\r\n}\r\n</style>\r\n"]}]}