{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\tool\\build\\FormDrawer.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\tool\\build\\FormDrawer.vue","mtime":1733705220590},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgaUZyYW1lIGZyb20gIkAvY29tcG9uZW50cy9pRnJhbWUvaW5kZXgiOw0KaW1wb3J0IHsgcGFyc2UgfSBmcm9tICdAYmFiZWwvcGFyc2VyJw0KaW1wb3J0IENsaXBib2FyZEpTIGZyb20gJ2NsaXBib2FyZCcNCmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInDQppbXBvcnQgew0KICBtYWtlVXBIdG1sLCB2dWVUZW1wbGF0ZSwgdnVlU2NyaXB0LCBjc3NTdHlsZQ0KfSBmcm9tICdAL3V0aWxzL2dlbmVyYXRvci9odG1sJw0KaW1wb3J0IHsgbWFrZVVwSnMgfSBmcm9tICdAL3V0aWxzL2dlbmVyYXRvci9qcycNCmltcG9ydCB7IG1ha2VVcENzcyB9IGZyb20gJ0AvdXRpbHMvZ2VuZXJhdG9yL2NzcycNCmltcG9ydCB7IGV4cG9ydERlZmF1bHQsIGJlYXV0aWZpZXJDb25mLCB0aXRsZUNhc2UgfSBmcm9tICdAL3V0aWxzJw0KaW1wb3J0IFJlc291cmNlRGlhbG9nIGZyb20gJy4vUmVzb3VyY2VEaWFsb2cnDQppbXBvcnQgbG9hZE1vbmFjbyBmcm9tICdAL3V0aWxzL2xvYWRNb25hY28nDQppbXBvcnQgbG9hZEJlYXV0aWZpZXIgZnJvbSAnQC91dGlscy9sb2FkQmVhdXRpZmllcicNCg0KY29uc3QgZWRpdG9yT2JqID0gew0KICBodG1sOiBudWxsLA0KICBqczogbnVsbCwNCiAgY3NzOiBudWxsDQp9DQpjb25zdCBtb2RlID0gew0KICBodG1sOiAnaHRtbCcsDQogIGpzOiAnamF2YXNjcmlwdCcsDQogIGNzczogJ2NzcycNCn0NCmxldCBiZWF1dGlmaWVyDQpsZXQgbW9uYWNvDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogeyBSZXNvdXJjZURpYWxvZyxpRnJhbWUgfSwNCiAgcHJvcHM6IFsnZm9ybURhdGEnLCAnZ2VuZXJhdGVDb25mJ10sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFjdGl2ZVRhYjogJ2h0bWwnLA0KICAgICAgaHRtbENvZGU6ICcnLA0KICAgICAganNDb2RlOiAnJywNCiAgICAgIGNzc0NvZGU6ICcnLA0KICAgICAgY29kZUZyYW1lOiAnJywNCiAgICAgIGlzSWZyYW1lTG9hZGVkOiBmYWxzZSwNCiAgICAgIGlzSW5pdGNvZGU6IGZhbHNlLCAvLyDkv53or4FvcGVu5ZCO5Lik5Liq5byC5q2l5Y+q5omn6KGM5LiA5qyhcnVuY29kZQ0KICAgICAgaXNSZWZyZXNoQ29kZTogZmFsc2UsIC8vIOavj+asoeaJk+W8gOmDvemcgOimgemHjeaWsOWIt+aWsOS7o+eggQ0KICAgICAgcmVzb3VyY2VWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHNjcmlwdHM6IFtdLA0KICAgICAgbGlua3M6IFtdLA0KICAgICAgbW9uYWNvOiBudWxsLA0KICAgICAgdXJsOiAiL3ByZXZpZXcuaHRtbCIsDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHJlc291cmNlcygpIHsNCiAgICAgIHJldHVybiB0aGlzLnNjcmlwdHMuY29uY2F0KHRoaXMubGlua3MpDQogICAgfQ0KICB9LA0KICB3YXRjaDoge30sDQogIGNyZWF0ZWQoKSB7DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLnByZXZlbnREZWZhdWx0U2F2ZSkNCiAgICBjb25zdCBjbGlwYm9hcmQgPSBuZXcgQ2xpcGJvYXJkSlMoJy5jb3B5LWJ0bicsIHsNCiAgICAgIHRleHQ6IHRyaWdnZXIgPT4gew0KICAgICAgICBjb25zdCBjb2RlU3RyID0gdGhpcy5nZW5lcmF0ZUNvZGUoKQ0KICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywNCiAgICAgICAgICBtZXNzYWdlOiAn5Luj56CB5bey5aSN5Yi25Yiw5Ymq5YiH5p2/77yM5Y+v57KY6LS044CCJywNCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgfSkNCiAgICAgICAgcmV0dXJuIGNvZGVTdHINCiAgICAgIH0NCiAgICB9KQ0KICAgIGNsaXBib2FyZC5vbignZXJyb3InLCBlID0+IHsNCiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S7o+eggeWkjeWItuWksei0pScpDQogICAgfSkNCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMucHJldmVudERlZmF1bHRTYXZlKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcHJldmVudERlZmF1bHRTYXZlKGUpIHsNCiAgICAgIGlmIChlLmtleSA9PT0gJ3MnICYmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5KSkgew0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uT3BlbigpIHsNCiAgICAgIGNvbnN0IHsgdHlwZSB9ID0gdGhpcy5nZW5lcmF0ZUNvbmYNCiAgICAgIHRoaXMuaHRtbENvZGUgPSBtYWtlVXBIdG1sKHRoaXMuZm9ybURhdGEsIHR5cGUpDQogICAgICB0aGlzLmpzQ29kZSA9IG1ha2VVcEpzKHRoaXMuZm9ybURhdGEsIHR5cGUpDQogICAgICB0aGlzLmNzc0NvZGUgPSBtYWtlVXBDc3ModGhpcy5mb3JtRGF0YSkNCg0KICAgICAgbG9hZEJlYXV0aWZpZXIoYnRmID0+IHsNCiAgICAgICAgYmVhdXRpZmllciA9IGJ0Zg0KICAgICAgICB0aGlzLmh0bWxDb2RlID0gYmVhdXRpZmllci5odG1sKHRoaXMuaHRtbENvZGUsIGJlYXV0aWZpZXJDb25mLmh0bWwpDQogICAgICAgIHRoaXMuanNDb2RlID0gYmVhdXRpZmllci5qcyh0aGlzLmpzQ29kZSwgYmVhdXRpZmllckNvbmYuanMpDQogICAgICAgIHRoaXMuY3NzQ29kZSA9IGJlYXV0aWZpZXIuY3NzKHRoaXMuY3NzQ29kZSwgYmVhdXRpZmllckNvbmYuaHRtbCkNCg0KICAgICAgICBsb2FkTW9uYWNvKHZhbCA9PiB7DQogICAgICAgICAgbW9uYWNvID0gdmFsDQogICAgICAgICAgdGhpcy5zZXRFZGl0b3JWYWx1ZSgnZWRpdG9ySHRtbCcsICdodG1sJywgdGhpcy5odG1sQ29kZSkNCiAgICAgICAgICB0aGlzLnNldEVkaXRvclZhbHVlKCdlZGl0b3JKcycsICdqcycsIHRoaXMuanNDb2RlKQ0KICAgICAgICAgIHRoaXMuc2V0RWRpdG9yVmFsdWUoJ2VkaXRvckNzcycsICdjc3MnLCB0aGlzLmNzc0NvZGUpDQogICAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGNvZGUpIHsNCiAgICAgICAgICAgIHRoaXMuaXNSZWZyZXNoQ29kZSA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuaXNJZnJhbWVMb2FkZWQgJiYgKHRoaXMuaXNJbml0Y29kZSA9IHRydWUpICYmIHRoaXMucnVuQ29kZSgpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIG9uQ2xvc2UoKSB7DQogICAgICB0aGlzLmlzSW5pdGNvZGUgPSBmYWxzZQ0KICAgICAgdGhpcy5pc1JlZnJlc2hDb2RlID0gZmFsc2UNCiAgICB9LA0KICAgIGlmcmFtZUxvYWQoKSB7DQogICAgICBpZiAoIXRoaXMuaXNJbml0Y29kZSkgew0KICAgICAgICB0aGlzLmlzSWZyYW1lTG9hZGVkID0gdHJ1ZQ0KICAgICAgICB0aGlzLmlzUmVmcmVzaENvZGUgJiYgKHRoaXMuaXNJbml0Y29kZSA9IHRydWUpICYmIHRoaXMucnVuQ29kZSgpDQogICAgICB9DQogICAgfSwNCiAgICBzZXRFZGl0b3JWYWx1ZShpZCwgdHlwZSwgY29kZVN0cikgew0KICAgICAgaWYgKGVkaXRvck9ialt0eXBlXSkgew0KICAgICAgICBlZGl0b3JPYmpbdHlwZV0uc2V0VmFsdWUoY29kZVN0cikNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGVkaXRvck9ialt0eXBlXSA9IG1vbmFjby5lZGl0b3IuY3JlYXRlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSwgew0KICAgICAgICAgIHZhbHVlOiBjb2RlU3RyLA0KICAgICAgICAgIHRoZW1lOiAndnMtZGFyaycsDQogICAgICAgICAgbGFuZ3VhZ2U6IG1vZGVbdHlwZV0sDQogICAgICAgICAgYXV0b21hdGljTGF5b3V0OiB0cnVlDQogICAgICAgIH0pDQogICAgICB9DQogICAgICAvLyBjdHJsICsgcyDliLfmlrANCiAgICAgIGVkaXRvck9ialt0eXBlXS5vbktleURvd24oZSA9PiB7DQogICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ5ICYmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5KSkgew0KICAgICAgICAgIHRoaXMucnVuQ29kZSgpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBydW5Db2RlKCkgew0KICAgICAgY29uc3QganNDb2RlU3RyID0gZWRpdG9yT2JqLmpzLmdldFZhbHVlKCkNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IGFzdCA9IHBhcnNlKGpzQ29kZVN0ciwgeyBzb3VyY2VUeXBlOiAnbW9kdWxlJyB9KQ0KICAgICAgICBjb25zdCBhc3RCb2R5ID0gYXN0LnByb2dyYW0uYm9keQ0KICAgICAgICBpZiAoYXN0Qm9keS5sZW5ndGggPiAxKSB7DQogICAgICAgICAgdGhpcy4kY29uZmlybSgNCiAgICAgICAgICAgICdqc+agvOW8j+S4jeiDveivhuWIq++8jOS7heaUr+aMgeS/ruaUuWV4cG9ydCBkZWZhdWx055qE5a+56LGh5YaF5a65JywNCiAgICAgICAgICAgICfmj5DnpLonLA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgIH0NCiAgICAgICAgICApDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgaWYgKGFzdEJvZHlbMF0udHlwZSA9PT0gJ0V4cG9ydERlZmF1bHREZWNsYXJhdGlvbicpIHsNCiAgICAgICAgICBjb25zdCBwb3N0RGF0YSA9IHsNCiAgICAgICAgICAgIHR5cGU6ICdyZWZyZXNoRnJhbWUnLA0KICAgICAgICAgICAgZGF0YTogew0KICAgICAgICAgICAgICBnZW5lcmF0ZUNvbmY6IHRoaXMuZ2VuZXJhdGVDb25mLA0KICAgICAgICAgICAgICBodG1sOiBlZGl0b3JPYmouaHRtbC5nZXRWYWx1ZSgpLA0KICAgICAgICAgICAgICBqczoganNDb2RlU3RyLnJlcGxhY2UoZXhwb3J0RGVmYXVsdCwgJycpLA0KICAgICAgICAgICAgICBjc3M6IGVkaXRvck9iai5jc3MuZ2V0VmFsdWUoKSwNCiAgICAgICAgICAgICAgc2NyaXB0czogdGhpcy5zY3JpcHRzLA0KICAgICAgICAgICAgICBsaW5rczogdGhpcy5saW5rcw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHRoaXMuJHJlZnMucHJldmlld1BhZ2UuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgNCiAgICAgICAgICAgIHBvc3REYXRhLA0KICAgICAgICAgICAgbG9jYXRpb24ub3JpZ2luDQogICAgICAgICAgKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+S9v+eUqGV4cG9ydCBkZWZhdWx0JykNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYGpz6ZSZ6K+v77yaJHtlcnJ9YCkNCiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpDQogICAgICB9DQogICAgfSwNCiAgICBnZW5lcmF0ZUNvZGUoKSB7DQogICAgICBjb25zdCBodG1sID0gdnVlVGVtcGxhdGUoZWRpdG9yT2JqLmh0bWwuZ2V0VmFsdWUoKSkNCiAgICAgIGNvbnN0IHNjcmlwdCA9IHZ1ZVNjcmlwdChlZGl0b3JPYmouanMuZ2V0VmFsdWUoKSkNCiAgICAgIGNvbnN0IGNzcyA9IGNzc1N0eWxlKGVkaXRvck9iai5jc3MuZ2V0VmFsdWUoKSkNCiAgICAgIHJldHVybiBiZWF1dGlmaWVyLmh0bWwoaHRtbCArIHNjcmlwdCArIGNzcywgYmVhdXRpZmllckNvbmYuaHRtbCkNCiAgICB9LA0KICAgIGV4cG9ydEZpbGUoKSB7DQogICAgICB0aGlzLiRwcm9tcHQoJ+aWh+S7tuWQjTonLCAn5a+85Ye65paH5Lu2Jywgew0KICAgICAgICBpbnB1dFZhbHVlOiBgJHsrbmV3IERhdGUoKX0udnVlYCwNCiAgICAgICAgY2xvc2VPbkNsaWNrTW9kYWw6IGZhbHNlLA0KICAgICAgICBpbnB1dFBsYWNlaG9sZGVyOiAn6K+36L6T5YWl5paH5Lu25ZCNJw0KICAgICAgfSkudGhlbigoeyB2YWx1ZSB9KSA9PiB7DQogICAgICAgIGlmICghdmFsdWUpIHZhbHVlID0gYCR7K25ldyBEYXRlKCl9LnZ1ZWANCiAgICAgICAgY29uc3QgY29kZVN0ciA9IHRoaXMuZ2VuZXJhdGVDb2RlKCkNCiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb2RlU3RyXSwgeyB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04JyB9KQ0KICAgICAgICBzYXZlQXMoYmxvYiwgdmFsdWUpDQogICAgICB9KQ0KICAgIH0sDQogICAgc2hvd1Jlc291cmNlKCkgew0KICAgICAgdGhpcy5yZXNvdXJjZVZpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBzZXRSZXNvdXJjZShhcnIpIHsNCiAgICAgIGNvbnN0IHNjcmlwdHMgPSBbXTsgY29uc3QNCiAgICAgICAgbGlua3MgPSBbXQ0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgew0KICAgICAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICBpZiAoaXRlbS5lbmRzV2l0aCgnLmNzcycpKSB7DQogICAgICAgICAgICBsaW5rcy5wdXNoKGl0ZW0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHNjcmlwdHMucHVzaChpdGVtKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5zY3JpcHRzID0gc2NyaXB0cw0KICAgICAgICB0aGlzLmxpbmtzID0gbGlua3MNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuc2NyaXB0cyA9IFtdDQogICAgICAgIHRoaXMubGlua3MgPSBbXQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["FormDrawer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FormDrawer.vue","sourceRoot":"src/views/tool/build","sourcesContent":["<template>\r\n  <div>\r\n    <el-drawer v-bind=\"$attrs\" v-on=\"$listeners\" @opened=\"onOpen\" @close=\"onClose\">\r\n      <div style=\"height:100%\">\r\n        <el-row style=\"height:100%;overflow:auto\">\r\n          <el-col :md=\"24\" :lg=\"12\" class=\"left-editor\">\r\n            <div class=\"setting\" title=\"资源引用\" @click=\"showResource\">\r\n              <el-badge :is-dot=\"!!resources.length\" class=\"item\">\r\n                <i class=\"el-icon-setting\" />\r\n              </el-badge>\r\n            </div>\r\n            <el-tabs v-model=\"activeTab\" type=\"border-card\" class=\"editor-tabs\">\r\n              <el-tab-pane name=\"html\">\r\n                <span slot=\"label\">\r\n                  <i v-if=\"activeTab==='html'\" class=\"el-icon-edit\" />\r\n                  <i v-else class=\"el-icon-document\" />\r\n                  template\r\n                </span>\r\n              </el-tab-pane>\r\n              <el-tab-pane name=\"js\">\r\n                <span slot=\"label\">\r\n                  <i v-if=\"activeTab==='js'\" class=\"el-icon-edit\" />\r\n                  <i v-else class=\"el-icon-document\" />\r\n                  script\r\n                </span>\r\n              </el-tab-pane>\r\n              <el-tab-pane name=\"css\">\r\n                <span slot=\"label\">\r\n                  <i v-if=\"activeTab==='css'\" class=\"el-icon-edit\" />\r\n                  <i v-else class=\"el-icon-document\" />\r\n                  css\r\n                </span>\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n            <div v-show=\"activeTab==='html'\" style=\"margin-top: 8px\" id=\"editorHtml\" class=\"tab-editor\" />\r\n            <div v-show=\"activeTab==='js'\" style=\"margin-top: 8px\" id=\"editorJs\" class=\"tab-editor\" />\r\n            <div v-show=\"activeTab==='css'\" style=\"margin-top: 8px\" id=\"editorCss\" class=\"tab-editor\" />\r\n          </el-col>\r\n          <el-col :md=\"24\" :lg=\"12\" class=\"right-preview\">\r\n            <div class=\"action-bar\" :style=\"{'text-align': 'left'}\">\r\n              <span class=\"bar-btn\" @click=\"runCode\">\r\n                <i class=\"el-icon-refresh\" />\r\n                刷新\r\n              </span>\r\n              <span class=\"bar-btn\" @click=\"exportFile\">\r\n                <i class=\"el-icon-download\" />\r\n                导出vue文件\r\n              </span>\r\n              <span ref=\"copyBtn\" class=\"bar-btn copy-btn\">\r\n                <i class=\"el-icon-document-copy\" />\r\n                复制代码\r\n              </span>\r\n              <span class=\"bar-btn delete-btn\" @click=\"$emit('update:visible', false)\">\r\n                <i class=\"el-icon-circle-close\" />\r\n                关闭\r\n              </span>\r\n            </div>\r\n            <iframe\r\n              v-show=\"isIframeLoaded\"\r\n              ref=\"previewPage\"\r\n              class=\"result-wrapper\"\r\n              frameborder=\"0\"\r\n              :src=\"url\"\r\n              @load=\"iframeLoad\"\r\n            />\r\n<!--            <i-frame v-show=\"isIframeLoaded\" :src=\"url\" />-->\r\n            <div v-show=\"!isIframeLoaded\" v-loading=\"true\" class=\"result-wrapper\" />\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-drawer>\r\n    <resource-dialog\r\n      :visible.sync=\"resourceVisible\"\r\n      :origin-resource=\"resources\"\r\n      @save=\"setResource\"\r\n    />\r\n  </div>\r\n</template>\r\n<script>\r\nimport iFrame from \"@/components/iFrame/index\";\r\nimport { parse } from '@babel/parser'\r\nimport ClipboardJS from 'clipboard'\r\nimport { saveAs } from 'file-saver'\r\nimport {\r\n  makeUpHtml, vueTemplate, vueScript, cssStyle\r\n} from '@/utils/generator/html'\r\nimport { makeUpJs } from '@/utils/generator/js'\r\nimport { makeUpCss } from '@/utils/generator/css'\r\nimport { exportDefault, beautifierConf, titleCase } from '@/utils'\r\nimport ResourceDialog from './ResourceDialog'\r\nimport loadMonaco from '@/utils/loadMonaco'\r\nimport loadBeautifier from '@/utils/loadBeautifier'\r\n\r\nconst editorObj = {\r\n  html: null,\r\n  js: null,\r\n  css: null\r\n}\r\nconst mode = {\r\n  html: 'html',\r\n  js: 'javascript',\r\n  css: 'css'\r\n}\r\nlet beautifier\r\nlet monaco\r\n\r\nexport default {\r\n  components: { ResourceDialog,iFrame },\r\n  props: ['formData', 'generateConf'],\r\n  data() {\r\n    return {\r\n      activeTab: 'html',\r\n      htmlCode: '',\r\n      jsCode: '',\r\n      cssCode: '',\r\n      codeFrame: '',\r\n      isIframeLoaded: false,\r\n      isInitcode: false, // 保证open后两个异步只执行一次runcode\r\n      isRefreshCode: false, // 每次打开都需要重新刷新代码\r\n      resourceVisible: false,\r\n      scripts: [],\r\n      links: [],\r\n      monaco: null,\r\n      url: \"/preview.html\",\r\n    }\r\n  },\r\n  computed: {\r\n    resources() {\r\n      return this.scripts.concat(this.links)\r\n    }\r\n  },\r\n  watch: {},\r\n  created() {\r\n  },\r\n  mounted() {\r\n    window.addEventListener('keydown', this.preventDefaultSave)\r\n    const clipboard = new ClipboardJS('.copy-btn', {\r\n      text: trigger => {\r\n        const codeStr = this.generateCode()\r\n        this.$notify({\r\n          title: '成功',\r\n          message: '代码已复制到剪切板，可粘贴。',\r\n          type: 'success'\r\n        })\r\n        return codeStr\r\n      }\r\n    })\r\n    clipboard.on('error', e => {\r\n      this.$message.error('代码复制失败')\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('keydown', this.preventDefaultSave)\r\n  },\r\n  methods: {\r\n    preventDefaultSave(e) {\r\n      if (e.key === 's' && (e.metaKey || e.ctrlKey)) {\r\n        e.preventDefault()\r\n      }\r\n    },\r\n    onOpen() {\r\n      const { type } = this.generateConf\r\n      this.htmlCode = makeUpHtml(this.formData, type)\r\n      this.jsCode = makeUpJs(this.formData, type)\r\n      this.cssCode = makeUpCss(this.formData)\r\n\r\n      loadBeautifier(btf => {\r\n        beautifier = btf\r\n        this.htmlCode = beautifier.html(this.htmlCode, beautifierConf.html)\r\n        this.jsCode = beautifier.js(this.jsCode, beautifierConf.js)\r\n        this.cssCode = beautifier.css(this.cssCode, beautifierConf.html)\r\n\r\n        loadMonaco(val => {\r\n          monaco = val\r\n          this.setEditorValue('editorHtml', 'html', this.htmlCode)\r\n          this.setEditorValue('editorJs', 'js', this.jsCode)\r\n          this.setEditorValue('editorCss', 'css', this.cssCode)\r\n          if (!this.isInitcode) {\r\n            this.isRefreshCode = true\r\n            this.isIframeLoaded && (this.isInitcode = true) && this.runCode()\r\n          }\r\n        })\r\n      })\r\n    },\r\n    onClose() {\r\n      this.isInitcode = false\r\n      this.isRefreshCode = false\r\n    },\r\n    iframeLoad() {\r\n      if (!this.isInitcode) {\r\n        this.isIframeLoaded = true\r\n        this.isRefreshCode && (this.isInitcode = true) && this.runCode()\r\n      }\r\n    },\r\n    setEditorValue(id, type, codeStr) {\r\n      if (editorObj[type]) {\r\n        editorObj[type].setValue(codeStr)\r\n      } else {\r\n        editorObj[type] = monaco.editor.create(document.getElementById(id), {\r\n          value: codeStr,\r\n          theme: 'vs-dark',\r\n          language: mode[type],\r\n          automaticLayout: true\r\n        })\r\n      }\r\n      // ctrl + s 刷新\r\n      editorObj[type].onKeyDown(e => {\r\n        if (e.keyCode === 49 && (e.metaKey || e.ctrlKey)) {\r\n          this.runCode()\r\n        }\r\n      })\r\n    },\r\n    runCode() {\r\n      const jsCodeStr = editorObj.js.getValue()\r\n      try {\r\n        const ast = parse(jsCodeStr, { sourceType: 'module' })\r\n        const astBody = ast.program.body\r\n        if (astBody.length > 1) {\r\n          this.$confirm(\r\n            'js格式不能识别，仅支持修改export default的对象内容',\r\n            '提示',\r\n            {\r\n              type: 'warning'\r\n            }\r\n          )\r\n          return\r\n        }\r\n        if (astBody[0].type === 'ExportDefaultDeclaration') {\r\n          const postData = {\r\n            type: 'refreshFrame',\r\n            data: {\r\n              generateConf: this.generateConf,\r\n              html: editorObj.html.getValue(),\r\n              js: jsCodeStr.replace(exportDefault, ''),\r\n              css: editorObj.css.getValue(),\r\n              scripts: this.scripts,\r\n              links: this.links\r\n            }\r\n          }\r\n\r\n          this.$refs.previewPage.contentWindow.postMessage(\r\n            postData,\r\n            location.origin\r\n          )\r\n        } else {\r\n          this.$message.error('请使用export default')\r\n        }\r\n      } catch (err) {\r\n        this.$message.error(`js错误：${err}`)\r\n        console.error(err)\r\n      }\r\n    },\r\n    generateCode() {\r\n      const html = vueTemplate(editorObj.html.getValue())\r\n      const script = vueScript(editorObj.js.getValue())\r\n      const css = cssStyle(editorObj.css.getValue())\r\n      return beautifier.html(html + script + css, beautifierConf.html)\r\n    },\r\n    exportFile() {\r\n      this.$prompt('文件名:', '导出文件', {\r\n        inputValue: `${+new Date()}.vue`,\r\n        closeOnClickModal: false,\r\n        inputPlaceholder: '请输入文件名'\r\n      }).then(({ value }) => {\r\n        if (!value) value = `${+new Date()}.vue`\r\n        const codeStr = this.generateCode()\r\n        const blob = new Blob([codeStr], { type: 'text/plain;charset=utf-8' })\r\n        saveAs(blob, value)\r\n      })\r\n    },\r\n    showResource() {\r\n      this.resourceVisible = true\r\n    },\r\n    setResource(arr) {\r\n      const scripts = []; const\r\n        links = []\r\n      if (Array.isArray(arr)) {\r\n        arr.forEach(item => {\r\n          if (item.endsWith('.css')) {\r\n            links.push(item)\r\n          } else {\r\n            scripts.push(item)\r\n          }\r\n        })\r\n        this.scripts = scripts\r\n        this.links = links\r\n      } else {\r\n        this.scripts = []\r\n        this.links = []\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/styles/mixin.scss';\r\n.tab-editor {\r\n  position: absolute;\r\n  top: 33px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  font-size: 14px;\r\n}\r\n.left-editor {\r\n  position: relative;\r\n  height: 100%;\r\n  background: #1e1e1e;\r\n  overflow: hidden;\r\n}\r\n.setting{\r\n  position: absolute;\r\n  right: 15px;\r\n  top: 3px;\r\n  color: #a9f122;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  z-index: 1;\r\n}\r\n.right-preview {\r\n  height: 100%;\r\n  .result-wrapper {\r\n    height: calc(100vh - 33px);\r\n    width: 100%;\r\n    overflow: auto;\r\n    padding: 12px;\r\n    box-sizing: border-box;\r\n  }\r\n}\r\n@include action-bar;\r\n::v-deep .el-drawer__header {\r\n  display: none;\r\n}\r\n</style>\r\n"]}]}