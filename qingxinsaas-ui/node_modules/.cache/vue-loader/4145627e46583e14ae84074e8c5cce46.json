{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\flowable\\task\\flowForm\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\flowable\\task\\flowForm\\index.vue","mtime":1733705220549},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2FkZEZvcm0sIGdldEZvcm0sIHVwZGF0ZUZvcm19IGZyb20gIkAvYXBpL2Zsb3dhYmxlL2Zvcm0iOw0KaW1wb3J0IHsgU3RyVXRpbCB9IGZyb20gJ0AvdXRpbHMvU3RyVXRpbCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiZmxvd0Zvcm0iLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmb3JtVGl0bGU6ICIiLA0KICAgICAgZm9ybU9wZW46IGZhbHNlLA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgICBmb3JtTmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLooajljZXlkI3np7DkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdDQogICAgICB9LA0KICAgICAgLy8g6KGo5Y2V5Y+C5pWwDQogICAgICBmb3JtOiB7DQogICAgICAgIGZvcm1JZDogbnVsbCwNCiAgICAgICAgZm9ybU5hbWU6IG51bGwsDQogICAgICAgIGZvcm1Db250ZW50OiBudWxsLA0KICAgICAgICByZW1hcms6IG51bGwNCiAgICAgIH0sDQogICAgICBkZXNpZ25lckNvbmZpZzogew0KICAgICAgICBnZW5lcmF0ZVNGQ0J1dHRvbjogZmFsc2UsDQogICAgICAgIGV4cG9ydENvZGVCdXR0b246IGZhbHNlLCAgLy/mmK/lkKbmmL7npLrlr7zlh7rku6PnoIHmjInpkq4NCiAgICAgICAgdG9vbGJhck1heFdpZHRoOiAzMjAsDQogICAgICAgIHRvb2xiYXJNaW5XaWR0aDogMzAwLCAgLy/orr7orqHlmajlt6XlhbfmjInpkq7moI/mnIDlsI/lrr3luqbvvIjljZXkvY3lg4/ntKDvvIkNCiAgICAgICAgZm9ybUhlYWRlcjogZmFsc2UsDQogICAgICB9LA0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICBjb25zdCBmb3JtSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeSAmJiB0aGlzLiRyb3V0ZS5xdWVyeS5mb3JtSWQ7DQogICAgaWYgKFN0clV0aWwuaXNOb3RCbGFuayhmb3JtSWQpKSB7DQogICAgICBnZXRGb3JtKGZvcm1JZCkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgLy8g5Yqg6L296KGo5Y2VanNvbuaVsOaNrg0KICAgICAgICAgIHRoaXMuJHJlZnMudmZEZXNpZ25lci5zZXRGb3JtSnNvbihKU09OLnBhcnNlKHJlcy5kYXRhLmZvcm1Db250ZW50KSkNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5mb3JtID0gcmVzLmRhdGE7DQogICAgICB9KQ0KICAgIH1lbHNlIHsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgLy8g5Yqg6L296KGo5Y2VanNvbuaVsOaNrg0KICAgICAgICB0aGlzLiRyZWZzLnZmRGVzaWduZXIuc2V0Rm9ybUpzb24oeyJ3aWRnZXRMaXN0IjpbXSwiZm9ybUNvbmZpZyI6eyJtb2RlbE5hbWUiOiJmb3JtRGF0YSIsInJlZk5hbWUiOiJ2Rm9ybSIsInJ1bGVzTmFtZSI6InJ1bGVzIiwibGFiZWxXaWR0aCI6ODAsImxhYmVsUG9zaXRpb24iOiJsZWZ0Iiwic2l6ZSI6IiIsImxhYmVsQWxpZ24iOiJsYWJlbC1sZWZ0LWFsaWduIiwiY3NzQ29kZSI6IiIsImN1c3RvbUNsYXNzIjoiIiwiZnVuY3Rpb25zIjoiIiwibGF5b3V0VHlwZSI6IlBDIiwib25Gb3JtQ3JlYXRlZCI6IiIsIm9uRm9ybU1vdW50ZWQiOiIiLCJvbkZvcm1EYXRhQ2hhbmdlIjoiIiwib25Gb3JtVmFsaWRhdGUiOiIifX0pDQogICAgICB9KQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczp7DQogICAgLy8g5L+d5a2Y6KGo5Y2V5pWw5o2uDQogICAgc2F2ZUZvcm1Kc29uKCkgew0KICAgICAgbGV0IGZvcm1Kc29uID0gdGhpcy4kcmVmcy52ZkRlc2lnbmVyLmdldEZvcm1Kc29uKCkNCiAgICAgIHRoaXMuZm9ybS5mb3JtQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KGZvcm1Kc29uKTsNCiAgICAgIHRoaXMuZm9ybU9wZW4gPSB0cnVlOw0KICAgIH0sDQogICAgLyoqIOaPkOS6pOaMiemSriAqLw0KICAgIHN1Ym1pdEZvcm0oKSB7DQogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5mb3JtLmZvcm1JZCAhPSBudWxsKSB7DQogICAgICAgICAgICB1cGRhdGVGb3JtKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOw0KICAgICAgICAgICAgICB0aGlzLmZvcm1PcGVuID0gZmFsc2U7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYWRkRm9ybSh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtT3BlbiA9IGZhbHNlOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIOWFs+mXreW9k+WJjeagh+etvumhteW5tui/lOWbnuS4iuS4qumhtemdog0KICAgICAgICAgIGNvbnN0IG9iaiA9IHsgcGF0aDogIi9mbG93YWJsZS9mb3JtIiwgcXVlcnk6IHsgdDogRGF0ZS5ub3coKX0gfTsNCiAgICAgICAgICB0aGlzLiR0YWIuY2xvc2VPcGVuUGFnZShvYmopOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOWPlua2iOaMiemSrg0KICAgIGNhbmNlbCgpIHsNCiAgICAgIHRoaXMuZm9ybU9wZW4gPSBmYWxzZTsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICB9LA0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/flowable/task/flowForm","sourcesContent":["<template>\r\n  <div>\r\n  <v-form-designer ref=\"vfDesigner\" :designer-config=\"designerConfig\">\r\n    <!-- 保存按钮 -->\r\n    <template #customSaveButton>\r\n      <el-button type=\"text\" @click=\"saveFormJson\"><i class=\"el-icon-s-promotion\" />保存</el-button>\r\n    </template>\r\n  </v-form-designer>\r\n\r\n  <!--系统表单信息-->\r\n  <el-dialog :title=\"formTitle\" :visible.sync=\"formOpen\" width=\"500px\" append-to-body>\r\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n      <el-form-item label=\"表单名称\" prop=\"formName\">\r\n        <el-input v-model=\"form.formName\" placeholder=\"请输入表单名称\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"备注\" prop=\"remark\">\r\n        <el-input v-model=\"form.remark\" placeholder=\"请输入备注\" />\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n      <el-button @click=\"cancel\">取 消</el-button>\r\n    </div>\r\n  </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {addForm, getForm, updateForm} from \"@/api/flowable/form\";\r\nimport { StrUtil } from '@/utils/StrUtil'\r\n\r\nexport default {\r\n  name: \"flowForm\",\r\n  data() {\r\n    return {\r\n      formTitle: \"\",\r\n      formOpen: false,\r\n      // 表单校验\r\n      rules: {\r\n        formName: [\r\n          { required: true, message: \"表单名称不能为空\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      // 表单参数\r\n      form: {\r\n        formId: null,\r\n        formName: null,\r\n        formContent: null,\r\n        remark: null\r\n      },\r\n      designerConfig: {\r\n        generateSFCButton: false,\r\n        exportCodeButton: false,  //是否显示导出代码按钮\r\n        toolbarMaxWidth: 320,\r\n        toolbarMinWidth: 300,  //设计器工具按钮栏最小宽度（单位像素）\r\n        formHeader: false,\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    const formId = this.$route.query && this.$route.query.formId;\r\n    if (StrUtil.isNotBlank(formId)) {\r\n      getForm(formId).then(res => {\r\n        this.$nextTick(() => {\r\n          // 加载表单json数据\r\n          this.$refs.vfDesigner.setFormJson(JSON.parse(res.data.formContent))\r\n        })\r\n        this.form = res.data;\r\n      })\r\n    }else {\r\n      this.$nextTick(() => {\r\n        // 加载表单json数据\r\n        this.$refs.vfDesigner.setFormJson({\"widgetList\":[],\"formConfig\":{\"modelName\":\"formData\",\"refName\":\"vForm\",\"rulesName\":\"rules\",\"labelWidth\":80,\"labelPosition\":\"left\",\"size\":\"\",\"labelAlign\":\"label-left-align\",\"cssCode\":\"\",\"customClass\":\"\",\"functions\":\"\",\"layoutType\":\"PC\",\"onFormCreated\":\"\",\"onFormMounted\":\"\",\"onFormDataChange\":\"\",\"onFormValidate\":\"\"}})\r\n      })\r\n    }\r\n  },\r\n  methods:{\r\n    // 保存表单数据\r\n    saveFormJson() {\r\n      let formJson = this.$refs.vfDesigner.getFormJson()\r\n      this.form.formContent = JSON.stringify(formJson);\r\n      this.formOpen = true;\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm() {\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (valid) {\r\n          if (this.form.formId != null) {\r\n            updateForm(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"修改成功\");\r\n              this.formOpen = false;\r\n            });\r\n          } else {\r\n            addForm(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"新增成功\");\r\n              this.formOpen = false;\r\n            });\r\n          }\r\n          // 关闭当前标签页并返回上个页面\r\n          const obj = { path: \"/flowable/form\", query: { t: Date.now()} };\r\n          this.$tab.closeOpenPage(obj);\r\n        }\r\n      });\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.formOpen = false;\r\n      this.reset();\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nbody {\r\n  margin: 0;  /* 如果页面出现垂直滚动条，则加入此行CSS以消除之 */\r\n}\r\n.el-container.main-container{\r\n  background: #fff;\r\n  margin-left: 0 !important;\r\n}\r\n\r\n</style>\r\n"]}]}