{"remainingRequest":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\system\\role\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\src\\views\\system\\role\\index.vue","mtime":1734507613463},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\chenxi\\Desktop\\pro\\QingXinSaaS\\qingxinsaas-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBsaXN0Um9sZSwgZ2V0Um9sZSwgZGVsUm9sZSwgYWRkUm9sZSwgdXBkYXRlUm9sZSwgZGF0YVNjb3BlLCBjaGFuZ2VSb2xlU3RhdHVzLCBkZXB0VHJlZVNlbGVjdCB9IGZyb20gIkAvYXBpL3N5c3RlbS9yb2xlIjsNCmltcG9ydCB7IHRyZWVzZWxlY3QgYXMgbWVudVRyZWVzZWxlY3QsIHJvbGVNZW51VHJlZXNlbGVjdCB9IGZyb20gIkAvYXBpL3N5c3RlbS9tZW51IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUm9sZSIsDQogIGRpY3RzOiBbJ3N5c19ub3JtYWxfZGlzYWJsZSddLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAvLyDpga7nvanlsYINCiAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAvLyDpgInkuK3mlbDnu4QNCiAgICAgIGlkczogW10sDQogICAgICAvLyDpnZ7ljZXkuKrnpoHnlKgNCiAgICAgIHNpbmdsZTogdHJ1ZSwNCiAgICAgIC8vIOmdnuWkmuS4quemgeeUqA0KICAgICAgbXVsdGlwbGU6IHRydWUsDQogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YNCiAgICAgIHNob3dTZWFyY2g6IHRydWUsDQogICAgICAvLyDmgLvmnaHmlbANCiAgICAgIHRvdGFsOiAwLA0KICAgICAgLy8g6KeS6Imy6KGo5qC85pWw5o2uDQogICAgICByb2xlTGlzdDogW10sDQogICAgICAvLyDlvLnlh7rlsYLmoIfpopgNCiAgICAgIHRpdGxlOiAiIiwNCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxgg0KICAgICAgb3BlbjogZmFsc2UsDQogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYLvvIjmlbDmja7mnYPpmZDvvIkNCiAgICAgIG9wZW5EYXRhU2NvcGU6IGZhbHNlLA0KICAgICAgbWVudUV4cGFuZDogZmFsc2UsDQogICAgICBtZW51Tm9kZUFsbDogZmFsc2UsDQogICAgICBkZXB0RXhwYW5kOiB0cnVlLA0KICAgICAgZGVwdE5vZGVBbGw6IGZhbHNlLA0KICAgICAgLy8g5pel5pyf6IyD5Zu0DQogICAgICBkYXRlUmFuZ2U6IFtdLA0KICAgICAgLy8g5pWw5o2u6IyD5Zu06YCJ6aG5DQogICAgICBkYXRhU2NvcGVPcHRpb25zOiBbDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogIjEiLA0KICAgICAgICAgIGxhYmVsOiAiYWxsRGF0YVNjb3BlIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdmFsdWU6ICIyIiwNCiAgICAgICAgICBsYWJlbDogImN1c3RvbURhdGFTY29wZSINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHZhbHVlOiAiMyIsDQogICAgICAgICAgbGFiZWw6ICJkZXBhcnRtZW50RGF0YVNjb3BlIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdmFsdWU6ICI0IiwNCiAgICAgICAgICBsYWJlbDogImRlcGFydG1lbnRBbmRCZWxvd0RhdGFTY29wZSINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHZhbHVlOiAiNSIsDQogICAgICAgICAgbGFiZWw6ICJvbmx5U2VsZkRhdGFTY29wZSINCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIC8vIOiPnOWNleWIl+ihqA0KICAgICAgbWVudU9wdGlvbnM6IFtdLA0KICAgICAgLy8g6YOo6Zeo5YiX6KGoDQogICAgICBkZXB0T3B0aW9uczogW10sDQogICAgICAvLyDmn6Xor6Llj4LmlbANCiAgICAgIHF1ZXJ5UGFyYW1zOiB7DQogICAgICAgIHBhZ2VOdW06IDEsDQogICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgICAgcm9sZU5hbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgcm9sZUtleTogdW5kZWZpbmVkLA0KICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZA0KICAgICAgfSwNCiAgICAgIC8vIOihqOWNleWPguaVsA0KICAgICAgZm9ybToge30sDQogICAgICBkZWZhdWx0UHJvcHM6IHsNCiAgICAgICAgY2hpbGRyZW46ICJjaGlsZHJlbiIsDQogICAgICAgIGxhYmVsOiAibGFiZWwiDQogICAgICB9LA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgICByb2xlTmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLop5LoibLlkI3np7DkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdLA0KICAgICAgICByb2xlS2V5OiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuadg+mZkOWtl+espuS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9DQogICAgICAgIF0sDQogICAgICAgIHJvbGVTb3J0OiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuinkuiJsumhuuW6j+S4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9DQogICAgICAgIF0NCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0TGlzdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyoqIOafpeivouinkuiJsuWIl+ihqCAqLw0KICAgIGdldExpc3QoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgbGlzdFJvbGUodGhpcy5hZGREYXRlUmFuZ2UodGhpcy5xdWVyeVBhcmFtcywgdGhpcy5kYXRlUmFuZ2UpKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5yb2xlTGlzdCA9IHJlc3BvbnNlLnJvd3M7DQogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDmn6Xor6Loj5zljZXmoJHnu5PmnoQgKi8NCiAgICBnZXRNZW51VHJlZXNlbGVjdCgpIHsNCiAgICAgIG1lbnVUcmVlc2VsZWN0KCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMubWVudU9wdGlvbnMgPSByZXNwb25zZS5kYXRhOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDmiYDmnInoj5zljZXoioLngrnmlbDmja4NCiAgICBnZXRNZW51QWxsQ2hlY2tlZEtleXMoKSB7DQogICAgICAvLyDnm67liY3ooqvpgInkuK3nmoToj5zljZXoioLngrkNCiAgICAgIGxldCBjaGVja2VkS2V5cyA9IHRoaXMuJHJlZnMubWVudS5nZXRDaGVja2VkS2V5cygpOw0KICAgICAgLy8g5Y2K6YCJ5Lit55qE6I+c5Y2V6IqC54K5DQogICAgICBsZXQgaGFsZkNoZWNrZWRLZXlzID0gdGhpcy4kcmVmcy5tZW51LmdldEhhbGZDaGVja2VkS2V5cygpOw0KICAgICAgY2hlY2tlZEtleXMudW5zaGlmdC5hcHBseShjaGVja2VkS2V5cywgaGFsZkNoZWNrZWRLZXlzKTsNCiAgICAgIHJldHVybiBjaGVja2VkS2V5czsNCiAgICB9LA0KICAgIC8vIOaJgOaciemDqOmXqOiKgueCueaVsOaNrg0KICAgIGdldERlcHRBbGxDaGVja2VkS2V5cygpIHsNCiAgICAgIC8vIOebruWJjeiiq+mAieS4reeahOmDqOmXqOiKgueCuQ0KICAgICAgbGV0IGNoZWNrZWRLZXlzID0gdGhpcy4kcmVmcy5kZXB0LmdldENoZWNrZWRLZXlzKCk7DQogICAgICAvLyDljYrpgInkuK3nmoTpg6jpl6joioLngrkNCiAgICAgIGxldCBoYWxmQ2hlY2tlZEtleXMgPSB0aGlzLiRyZWZzLmRlcHQuZ2V0SGFsZkNoZWNrZWRLZXlzKCk7DQogICAgICBjaGVja2VkS2V5cy51bnNoaWZ0LmFwcGx5KGNoZWNrZWRLZXlzLCBoYWxmQ2hlY2tlZEtleXMpOw0KICAgICAgcmV0dXJuIGNoZWNrZWRLZXlzOw0KICAgIH0sDQogICAgLyoqIOagueaNruinkuiJsklE5p+l6K+i6I+c5Y2V5qCR57uT5p6EICovDQogICAgZ2V0Um9sZU1lbnVUcmVlc2VsZWN0KHJvbGVJZCkgew0KICAgICAgcmV0dXJuIHJvbGVNZW51VHJlZXNlbGVjdChyb2xlSWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLm1lbnVPcHRpb25zID0gcmVzcG9uc2UubWVudXM7DQogICAgICAgIHJldHVybiByZXNwb25zZTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqIOagueaNruinkuiJsklE5p+l6K+i6YOo6Zeo5qCR57uT5p6EICovDQogICAgZ2V0RGVwdFRyZWUocm9sZUlkKSB7DQogICAgICByZXR1cm4gZGVwdFRyZWVTZWxlY3Qocm9sZUlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5kZXB0T3B0aW9ucyA9IHJlc3BvbnNlLmRlcHRzOw0KICAgICAgICByZXR1cm4gcmVzcG9uc2U7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOinkuiJsueKtuaAgeS/ruaUuQ0KICAgIGhhbmRsZVN0YXR1c0NoYW5nZShyb3cpIHsNCiAgICAgIGxldCB0ZXh0ID0gcm93LnN0YXR1cyA9PT0gIjAiPyB0aGlzLiR0KCdoLnN5c3RlbS5yb2xlLmVuYWJsZScpIDogdGhpcy4kdCgnaC5zeXN0ZW0ucm9sZS5kaXNhYmxlJyk7DQogICAgICB0aGlzLiRtb2RhbC5jb25maXJtKHRoaXMuJHQoJ2guc3lzdGVtLnJvbGUuc3RhdHVzQ2hhbmdlQ29uZmlybScsIHsgdGV4dDogdGV4dCwgcm9sZU5hbWU6IHJvdy5yb2xlTmFtZSB9KSkudGhlbigoKSA9PiB7DQogICAgICAgIHJldHVybiBjaGFuZ2VSb2xlU3RhdHVzKHJvdy5yb2xlSWQsIHJvdy5zdGF0dXMpOw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3ModGhpcy4kdCgnaC5zeXN0ZW0ucm9sZS5zdGF0dXNDaGFuZ2VTdWNjZXNzJywgeyB0ZXh0OiB0ZXh0IH0pKTsNCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgcm93LnN0YXR1cyA9IHJvdy5zdGF0dXMgPT09ICIwIj8gIjEiIDogIjAiOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDlj5bmtojmjInpkq4NCiAgICBjYW5jZWwoKSB7DQogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICB9LA0KICAgIC8vIOWPlua2iOaMiemSru+8iOaVsOaNruadg+mZkO+8iQ0KICAgIGNhbmNlbERhdGFTY29wZSgpIHsNCiAgICAgIHRoaXMub3BlbkRhdGFTY29wZSA9IGZhbHNlOw0KICAgICAgdGhpcy5yZXNldCgpOw0KICAgIH0sDQogICAgLy8g6KGo5Y2V6YeN572uDQogICAgcmVzZXQoKSB7DQogICAgICBpZiAodGhpcy4kcmVmcy5tZW51IT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHRoaXMuJHJlZnMubWVudS5zZXRDaGVja2VkS2V5cyhbXSk7DQogICAgICB9DQogICAgICB0aGlzLm1lbnVFeHBhbmQgPSBmYWxzZSwNCiAgICAgICAgdGhpcy5tZW51Tm9kZUFsbCA9IGZhbHNlLA0KICAgICAgICB0aGlzLmRlcHRFeHBhbmQgPSB0cnVlLA0KICAgICAgICB0aGlzLmRlcHROb2RlQWxsID0gZmFsc2UsDQogICAgICAgIHRoaXMuZm9ybSA9IHsNCiAgICAgICAgICByb2xlSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgICByb2xlTmFtZTogdW5kZWZpbmVkLA0KICAgICAgICAgIHJvbGVLZXk6IHVuZGVmaW5lZCwNCiAgICAgICAgICByb2xlU29ydDogMCwNCiAgICAgICAgICBzdGF0dXM6ICIwIiwNCiAgICAgICAgICBtZW51SWRzOiBbXSwNCiAgICAgICAgICBkZXB0SWRzOiBbXSwNCiAgICAgICAgICBtZW51Q2hlY2tTdHJpY3RseTogdHJ1ZSwNCiAgICAgICAgICBkZXB0Q2hlY2tTdHJpY3RseTogdHJ1ZSwNCiAgICAgICAgICByZW1hcms6IHVuZGVmaW5lZA0KICAgICAgICB9Ow0KICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsNCiAgICB9LA0KICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVRdWVyeSgpIHsNCiAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZU51bSA9IDE7DQogICAgICB0aGlzLmdldExpc3QoKTsNCiAgICB9LA0KICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8NCiAgICByZXNldFF1ZXJ5KCkgew0KICAgICAgdGhpcy5kYXRlUmFuZ2UgPSBbXTsNCiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsNCiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsNCiAgICB9LA0KICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrg0KICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShzZWxlY3Rpb24pIHsNCiAgICAgIHRoaXMuaWRzID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0ucm9sZUlkKTsNCiAgICAgIHRoaXMuc2luZ2xlID0gc2VsZWN0aW9uLmxlbmd0aCE9PSAxOw0KICAgICAgdGhpcy5tdWx0aXBsZSA9IHNlbGVjdGlvbi5sZW5ndGggPT09IDA7DQogICAgfSwNCiAgICAvLyDmm7TlpJrmk43kvZzop6blj5ENCiAgICBoYW5kbGVDb21tYW5kKGNvbW1hbmQsIHJvdykgew0KICAgICAgc3dpdGNoIChjb21tYW5kKSB7DQogICAgICAgIGNhc2UgImhhbmRsZURhdGFTY29wZSI6DQogICAgICAgICAgdGhpcy5oYW5kbGVEYXRhU2NvcGUocm93KTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiaGFuZGxlQXV0aFVzZXIiOg0KICAgICAgICAgIHRoaXMuaGFuZGxlQXV0aFVzZXIocm93KTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOagkeadg+mZkO+8iOWxleW8gC/mipjlj6DvvIkNCiAgICBoYW5kbGVDaGVja2VkVHJlZUV4cGFuZCh2YWx1ZSwgdHlwZSkgew0KICAgICAgaWYgKHR5cGUgPT0gJ21lbnUnKSB7DQogICAgICAgIGxldCB0cmVlTGlzdCA9IHRoaXMubWVudU9wdGlvbnM7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJlZUxpc3QubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICB0aGlzLiRyZWZzLm1lbnUuc3RvcmUubm9kZXNNYXBbdHJlZUxpc3RbaV0uaWRdLmV4cGFuZGVkID0gdmFsdWU7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnZGVwdCcpIHsNCiAgICAgICAgbGV0IHRyZWVMaXN0ID0gdGhpcy5kZXB0T3B0aW9uczsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHRoaXMuJHJlZnMuZGVwdC5zdG9yZS5ub2Rlc01hcFt0cmVlTGlzdFtpXS5pZF0uZXhwYW5kZWQgPSB2YWx1ZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g5qCR5p2D6ZmQ77yI5YWo6YCJL+WFqOS4jemAie+8iQ0KICAgIGhhbmRsZUNoZWNrZWRUcmVlTm9kZUFsbCh2YWx1ZSwgdHlwZSkgew0KICAgICAgaWYgKHR5cGUgPT0gJ21lbnUnKSB7DQogICAgICAgIHRoaXMuJHJlZnMubWVudS5zZXRDaGVja2VkTm9kZXModmFsdWU/IHRoaXMubWVudU9wdGlvbnMgOiBbXSk7DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2RlcHQnKSB7DQogICAgICAgIHRoaXMuJHJlZnMuZGVwdC5zZXRDaGVja2VkTm9kZXModmFsdWU/IHRoaXMuZGVwdE9wdGlvbnMgOiBbXSk7DQogICAgICB9DQogICAgfSwNCiAgICAvLyDmoJHmnYPpmZDvvIjniLblrZDogZTliqjvvIkNCiAgICBoYW5kbGVDaGVja2VkVHJlZUNvbm5lY3QodmFsdWUsIHR5cGUpIHsNCiAgICAgIGlmICh0eXBlID09ICdtZW51Jykgew0KICAgICAgICB0aGlzLmZvcm0ubWVudUNoZWNrU3RyaWN0bHkgPSB2YWx1ZT8gdHJ1ZSA6IGZhbHNlOw0KICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdkZXB0Jykgew0KICAgICAgICB0aGlzLmZvcm0uZGVwdENoZWNrU3RyaWN0bHkgPSB2YWx1ZT8gdHJ1ZSA6IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZUFkZCgpIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIHRoaXMuZ2V0TWVudVRyZWVzZWxlY3QoKTsNCiAgICAgIHRoaXMub3BlbiA9IHRydWU7DQogICAgICB0aGlzLnRpdGxlID0gdGhpcy4kdCgnaC5zeXN0ZW0ucm9sZS50aXRsZUFkZCcpOw0KICAgIH0sDQogICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIGNvbnN0IHJvbGVJZCA9IHJvdy5yb2xlSWQgfHwgdGhpcy5pZHM7DQogICAgICBjb25zdCByb2xlTWVudSA9IHRoaXMuZ2V0Um9sZU1lbnVUcmVlc2VsZWN0KHJvbGVJZCk7DQogICAgICBnZXRSb2xlKHJvbGVJZCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMub3BlbiA9IHRydWU7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICByb2xlTWVudS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBsZXQgY2hlY2tlZEtleXMgPSByZXMuY2hlY2tlZEtleXM7DQogICAgICAgICAgICBpZiAoY2hlY2tlZEtleXMhPT0gbnVsbCkgew0KICAgICAgICAgICAgICBjaGVja2VkS2V5cy5mb3JFYWNoKCh2KSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5tZW51LnNldENoZWNrZWQodiwgdHJ1ZSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLnRpdGxlID0gdGhpcy4kdCgnaC5zeXN0ZW0ucm9sZS50aXRsZUVkaXQnKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqIOmAieaLqeinkuiJsuadg+mZkOiMg+WbtOinpuWPkSAqLw0KICAgIGRhdGFTY29wZVNlbGVjdENoYW5nZSh2YWx1ZSkgew0KICAgICAgaWYgKHZhbHVlIT09ICcyJykgew0KICAgICAgICB0aGlzLiRyZWZzLmRlcHQuc2V0Q2hlY2tlZEtleXMoW10pOw0KICAgICAgfQ0KICAgIH0sDQogICAgLyoqIOWIhumFjeaVsOaNruadg+mZkOaTjeS9nCAqLw0KICAgIGhhbmRsZURhdGFTY29wZShyb3cpIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIGNvbnN0IGRlcHRUcmVlU2VsZWN0ID0gdGhpcy5nZXREZXB0VHJlZShyb3cucm9sZUlkKTsNCiAgICAgIGdldFJvbGUocm93LnJvbGVJZCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMub3BlbkRhdGFTY29wZSA9IHRydWU7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICBkZXB0VHJlZVNlbGVjdC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLmRlcHQuc2V0Q2hlY2tlZEtleXMocmVzLmNoZWNrZWRLZXlzKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLiR0KCdoLnN5c3RlbS5yb2xlLnRpdGxlRGF0YVNjb3BlJyk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDliIbphY3nlKjmiLfmk43kvZwgKi8NCiAgICBoYW5kbGVBdXRoVXNlcihyb3cpIHsNCiAgICAgIGNvbnN0IHJvbGVJZCA9IHJvdy5yb2xlSWQ7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3N5c3RlbS9yb2xlLWF1dGgvdXNlci8iICsgcm9sZUlkKTsNCiAgICB9LA0KICAgIC8qKiDmj5DkuqTmjInpkq4gKi8NCiAgICBzdWJtaXRGb3JtKCkgew0KICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgaWYgKHRoaXMuZm9ybS5yb2xlSWQhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgIHRoaXMuZm9ybS5tZW51SWRzID0gdGhpcy5nZXRNZW51QWxsQ2hlY2tlZEtleXMoKTsNCiAgICAgICAgICAgIHVwZGF0ZVJvbGUodGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcyh0aGlzLiR0KCdoLnN5c3RlbS5yb2xlLmVkaXRTdWNjZXNzJykpOw0KICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5mb3JtLm1lbnVJZHMgPSB0aGlzLmdldE1lbnVBbGxDaGVja2VkS2V5cygpOw0KICAgICAgICAgICAgYWRkUm9sZSh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKHRoaXMuJHQoJ2guc3lzdGVtLnJvbGUuYWRkU3VjY2VzcycpKTsNCiAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7DQogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDmj5DkuqTmjInpkq7vvIjmlbDmja7mnYPpmZDvvIkgKi8NCiAgICBzdWJtaXREYXRhU2NvcGUoKSB7DQogICAgICBpZiAodGhpcy5mb3JtLnJvbGVJZCE9IHVuZGVmaW5lZCkgew0KICAgICAgICB0aGlzLmZvcm0uZGVwdElkcyA9IHRoaXMuZ2V0RGVwdEFsbENoZWNrZWRLZXlzKCk7DQogICAgICAgIGRhdGFTY29wZSh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3ModGhpcy4kdCgnaC5zeXN0ZW0ucm9sZS5lZGl0U3VjY2VzcycpKTsNCiAgICAgICAgICB0aGlzLm9wZW5EYXRhU2NvcGUgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlRGVsZXRlKHJvdykgew0KICAgICAgY29uc3Qgcm9sZUlkcyA9IHJvdy5yb2xlSWQgfHwgdGhpcy5pZHM7DQogICAgICB0aGlzLiRtb2RhbC5jb25maXJtKHRoaXMuJHQoJ2guc3lzdGVtLnJvbGUuY29uZmlybURlbGV0ZScsIHsgcm9sZUlkczogcm9sZUlkcyB9KSkudGhlbigoKSA9PiB7DQogICAgICAgIHJldHVybiBkZWxSb2xlKHJvbGVJZHMpOw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKHRoaXMuJHQoJ2guc3lzdGVtLnJvbGUuZGVsZXRlU3VjY2VzcycpKTsNCiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsNCiAgICB9LA0KICAgIC8qKiDlr7zlh7rmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVFeHBvcnQoKSB7DQogICAgICB0aGlzLmRvd25sb2FkKCdzeXN0ZW0vcm9sZS9leHBvcnQnLCB7DQogICAgIC4uLnRoaXMucXVlcnlQYXJhbXMNCiAgICAgIH0sIGByb2xlXyR7bmV3IERhdGUoKS5nZXRUaW1lKCl9Lnhsc3hgKQ0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/role","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\">\r\n      <el-form-item :label=\"$t('h.system.role.roleName')\" prop=\"roleName\">\r\n        <el-input v-model=\"queryParams.roleName\" :placeholder=\"$t('h.system.role.pleaseInputRoleName')\" clearable style=\"width: 240px\"\r\n          @keyup.enter.native=\"handleQuery\" />\r\n      </el-form-item>\r\n      <el-form-item :label=\"$t('h.system.role.roleKey')\" prop=\"roleKey\">\r\n        <el-input v-model=\"queryParams.roleKey\" :placeholder=\"$t('h.system.role.pleaseInputRoleKey')\" clearable style=\"width: 240px\"\r\n          @keyup.enter.native=\"handleQuery\" />\r\n      </el-form-item>\r\n      <el-form-item :label=\"$t('h.system.role.status')\" prop=\"status\">\r\n        <el-select v-model=\"queryParams.status\" :placeholder=\"$t('h.system.role.status')\" clearable style=\"width: 240px\">\r\n          <el-option v-for=\"dict in dict.type.sys_normal_disable\" :key=\"dict.value\" :label=\"dict.label\"\r\n            :value=\"dict.value\" />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item :label=\"$t('h.system.role.createTime')\">\r\n        <el-date-picker v-model=\"dateRange\" style=\"width: 240px\" value-format=\"yyyy-MM-dd\" type=\"daterange\"\r\n          range-separator=\"-\" :start-placeholder=\"$t('h.system.role.startDate')\" :end-placeholder=\"$t('h.system.role.endDate')\"></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">{{$t('h.system.role.search')}}</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">{{$t('h.system.role.reset')}}</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"primary\" plain icon=\"el-icon-plus\" size=\"mini\" @click=\"handleAdd\"\r\n          v-hasPermi=\"['system:role:add']\">{{$t('h.system.role.add')}}</el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"success\" plain icon=\"el-icon-edit\" size=\"mini\" :disabled=\"single\" @click=\"handleUpdate\"\r\n          v-hasPermi=\"['system:role:edit']\">{{$t('h.system.role.edit')}}</el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"danger\" plain icon=\"el-icon-delete\" size=\"mini\" :disabled=\"multiple\" @click=\"handleDelete\"\r\n          v-hasPermi=\"['system:role:remove']\">{{$t('h.system.role.delete')}}</el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button type=\"warning\" plain icon=\"el-icon-download\" size=\"mini\" @click=\"handleExport\"\r\n          v-hasPermi=\"['system:role:export']\">{{$t('h.system.role.export')}}</el-button>\r\n      </el-col>\r\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n\r\n    <el-table v-loading=\"loading\" :data=\"roleList\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n      <el-table-column :label=\"$t('h.system.role.roleId')\" prop=\"roleId\" width=\"120\" />\r\n      <el-table-column :label=\"$t('h.system.role.roleName')\" prop=\"roleName\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n      <el-table-column :label=\"$t('h.system.role.roleKey')\" prop=\"roleKey\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n      <el-table-column :label=\"$t('h.system.role.roleSort')\" prop=\"roleSort\" width=\"100\" />\r\n      <el-table-column :label=\"$t('h.system.role.status')\" align=\"center\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch v-model=\"scope.row.status\" active-value=\"0\" inactive-value=\"1\"\r\n            @change=\"handleStatusChange(scope.row)\"></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('h.system.role.createTime')\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ parseTime(scope.row.createTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('h.system.role.operation')\" align=\"center\" class=\"small-padding fixed-width\">\r\n        <template slot-scope=\"scope\" v-if=\"scope.row.roleId!== 1\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(scope.row)\"\r\n            v-hasPermi=\"['system:role:edit']\">{{$t('h.system.role.edit')}}</el-button>\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row)\"\r\n            v-hasPermi=\"['system:role:remove']\">{{$t('h.system.role.delete')}}</el-button>\r\n          <el-dropdown size=\"mini\" @command=\"(command) => handleCommand(command, scope.row)\"\r\n            v-hasPermi=\"['system:role:edit']\">\r\n            <el-button size=\"mini\" type=\"text\" icon=\"el-icon-d-arrow-right\">{{$t('h.system.role.more')}}</el-button>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item command=\"handleDataScope\" icon=\"el-icon-circle-check\"\r\n                v-hasPermi=\"['system:role:edit']\">{{$t('h.system.role.handleDataScope')}}</el-dropdown-item>\r\n              <el-dropdown-item command=\"handleAuthUser\" icon=\"el-icon-user\"\r\n                v-hasPermi=\"['system:role:edit']\">{{$t('h.system.role.handleAuthUser')}}</el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"queryParams.pageNum\" :limit.sync=\"queryParams.pageSize\"\r\n      @pagination=\"getList\" />\r\n\r\n    <!-- 添加或修改角色配置对话框 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\r\n        <el-form-item :label=\"$t('h.system.role.roleName')\" prop=\"roleName\">\r\n          <el-input v-model=\"form.roleName\" :placeholder=\"$t('h.system.role.pleaseInputRoleName')\" />\r\n        </el-form-item>\r\n        <el-form-item prop=\"roleKey\">\r\n          <span slot=\"label\">\r\n            <el-tooltip content=\"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)\" placement=\"top\">\r\n              <i class=\"el-icon-question\"></i>\r\n            </el-tooltip>\r\n            {{$t('h.system.role.roleKey')}}\r\n          </span>\r\n          <el-input v-model=\"form.roleKey\" :placeholder=\"$t('h.system.role.pleaseInputRoleKey')\" />\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('h.system.role.roleSort')\" prop=\"roleSort\">\r\n          <el-input-number v-model=\"form.roleSort\" controls-position=\"right\" :min=\"0\" />\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('h.system.role.status')\" prop=\"status\">\r\n          <el-radio-group v-model=\"form.status\">\r\n            <el-radio v-for=\"dict in dict.type.sys_normal_disable\" :key=\"dict.value\"\r\n              :label=\"dict.value\">{{ dict.label }}</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('h.system.role.menuPermissions')\" prop=\"menuPermissions\">\r\n          <el-checkbox v-model=\"menuExpand\" @change=\"handleCheckedTreeExpand($event, 'menu')\">{{$t('h.system.role.menuExpand')}}</el-checkbox>\r\n          <el-checkbox v-model=\"menuNodeAll\" @change=\"handleCheckedTreeNodeAll($event, 'menu')\">{{$t('h.system.role.menuNodeAll')}}</el-checkbox>\r\n          <el-checkbox v-model=\"form.menuCheckStrictly\"\r\n            @change=\"handleCheckedTreeConnect($event, 'menu')\">{{$t('h.system.role.menuCheckStrictly')}}</el-checkbox>\r\n          <el-tree class=\"tree-border\" :data=\"menuOptions\" show-checkbox ref=\"menu\" node-key=\"id\"\r\n            :check-strictly=\"!form.menuCheckStrictly\" empty-text=\"$t('h.system.role.loadingTree')\" :props=\"defaultProps\"></el-tree>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('h.system.role.remark')\" prop=\"remark\">\r\n          <el-input v-model=\"form.remark\" type=\"textarea\" :placeholder=\"$t('h.system.role.pleaseInputRemark')\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">{{$t('h.system.role.confirm')}}</el-button>\r\n        <el-button @click=\"cancel\">{{$t('h.system.role.cancel')}}</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 分配角色数据权限对话框 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"openDataScope\" width=\"500px\" append-to-body>\r\n      <el-form :model=\"form\" label-width=\"80px\">\r\n        <el-form-item :label=\"$t('h.system.role.roleName')\" prop=\"roleName\">\r\n          <el-input v-model=\"form.roleName\" :disabled=\"true\" />\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('h.system.role.roleKey')\" prop=\"roleKey\">\r\n          <el-input v-model=\"form.roleKey\" :disabled=\"true\" />\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('h.system.role.dataScope')\" prop=\"dataScope\">\r\n          <el-select v-model=\"form.dataScope\" @change=\"dataScopeSelectChange\">\r\n            <el-option v-for=\"item in dataScopeOptions\" :key=\"item.value\" :label=\"$t('h.system.role.' + item.label)\"\r\n              :value=\"item.value\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('h.system.role.dataPermissions')\" v-show=\"form.dataScope == 2\">\r\n          <el-checkbox v-model=\"deptExpand\" @change=\"handleCheckedTreeExpand($event, 'dept')\">{{$t('h.system.role.deptExpand')}}</el-checkbox>\r\n          <el-checkbox v-model=\"deptNodeAll\" @change=\"handleCheckedTreeNodeAll($event, 'dept')\">{{$t('h.system.role.deptNodeAll')}}</el-checkbox>\r\n          <el-checkbox v-model=\"form.deptCheckStrictly\"\r\n            @change=\"handleCheckedTreeConnect($event, 'dept')\">{{$t('h.system.role.deptCheckStrictly')}}</el-checkbox>\r\n          <el-tree class=\"tree-border\" :data=\"deptOptions\" show-checkbox default-expand-all ref=\"dept\" node-key=\"id\"\r\n            :check-strictly=\"!form.deptCheckStrictly\" empty-text=\"$t('h.system.role.loadingTree')\" :props=\"defaultProps\"></el-tree>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitDataScope\">{{$t('h.system.role.submitDataScope')}}</el-button>\r\n        <el-button @click=\"cancelDataScope\">{{$t('h.system.role.cancelDataScope')}}</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { listRole, getRole, delRole, addRole, updateRole, dataScope, changeRoleStatus, deptTreeSelect } from \"@/api/system/role\";\r\nimport { treeselect as menuTreeselect, roleMenuTreeselect } from \"@/api/system/menu\";\r\n\r\nexport default {\r\n  name: \"Role\",\r\n  dicts: ['sys_normal_disable'],\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 选中数组\r\n      ids: [],\r\n      // 非单个禁用\r\n      single: true,\r\n      // 非多个禁用\r\n      multiple: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 角色表格数据\r\n      roleList: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 是否显示弹出层（数据权限）\r\n      openDataScope: false,\r\n      menuExpand: false,\r\n      menuNodeAll: false,\r\n      deptExpand: true,\r\n      deptNodeAll: false,\r\n      // 日期范围\r\n      dateRange: [],\r\n      // 数据范围选项\r\n      dataScopeOptions: [\r\n        {\r\n          value: \"1\",\r\n          label: \"allDataScope\"\r\n        },\r\n        {\r\n          value: \"2\",\r\n          label: \"customDataScope\"\r\n        },\r\n        {\r\n          value: \"3\",\r\n          label: \"departmentDataScope\"\r\n        },\r\n        {\r\n          value: \"4\",\r\n          label: \"departmentAndBelowDataScope\"\r\n        },\r\n        {\r\n          value: \"5\",\r\n          label: \"onlySelfDataScope\"\r\n        }\r\n      ],\r\n      // 菜单列表\r\n      menuOptions: [],\r\n      // 部门列表\r\n      deptOptions: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        roleName: undefined,\r\n        roleKey: undefined,\r\n        status: undefined\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\"\r\n      },\r\n      // 表单校验\r\n      rules: {\r\n        roleName: [\r\n          { required: true, message: \"角色名称不能为空\", trigger: \"blur\" }\r\n        ],\r\n        roleKey: [\r\n          { required: true, message: \"权限字符不能为空\", trigger: \"blur\" }\r\n        ],\r\n        roleSort: [\r\n          { required: true, message: \"角色顺序不能为空\", trigger: \"blur\" }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    /** 查询角色列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      listRole(this.addDateRange(this.queryParams, this.dateRange)).then(response => {\r\n        this.roleList = response.rows;\r\n        this.total = response.total;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    /** 查询菜单树结构 */\r\n    getMenuTreeselect() {\r\n      menuTreeselect().then(response => {\r\n        this.menuOptions = response.data;\r\n      });\r\n    },\r\n    // 所有菜单节点数据\r\n    getMenuAllCheckedKeys() {\r\n      // 目前被选中的菜单节点\r\n      let checkedKeys = this.$refs.menu.getCheckedKeys();\r\n      // 半选中的菜单节点\r\n      let halfCheckedKeys = this.$refs.menu.getHalfCheckedKeys();\r\n      checkedKeys.unshift.apply(checkedKeys, halfCheckedKeys);\r\n      return checkedKeys;\r\n    },\r\n    // 所有部门节点数据\r\n    getDeptAllCheckedKeys() {\r\n      // 目前被选中的部门节点\r\n      let checkedKeys = this.$refs.dept.getCheckedKeys();\r\n      // 半选中的部门节点\r\n      let halfCheckedKeys = this.$refs.dept.getHalfCheckedKeys();\r\n      checkedKeys.unshift.apply(checkedKeys, halfCheckedKeys);\r\n      return checkedKeys;\r\n    },\r\n    /** 根据角色ID查询菜单树结构 */\r\n    getRoleMenuTreeselect(roleId) {\r\n      return roleMenuTreeselect(roleId).then(response => {\r\n        this.menuOptions = response.menus;\r\n        return response;\r\n      });\r\n    },\r\n    /** 根据角色ID查询部门树结构 */\r\n    getDeptTree(roleId) {\r\n      return deptTreeSelect(roleId).then(response => {\r\n        this.deptOptions = response.depts;\r\n        return response;\r\n      });\r\n    },\r\n    // 角色状态修改\r\n    handleStatusChange(row) {\r\n      let text = row.status === \"0\"? this.$t('h.system.role.enable') : this.$t('h.system.role.disable');\r\n      this.$modal.confirm(this.$t('h.system.role.statusChangeConfirm', { text: text, roleName: row.roleName })).then(() => {\r\n        return changeRoleStatus(row.roleId, row.status);\r\n      }).then(() => {\r\n        this.$modal.msgSuccess(this.$t('h.system.role.statusChangeSuccess', { text: text }));\r\n      }).catch(() => {\r\n        row.status = row.status === \"0\"? \"1\" : \"0\";\r\n      });\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.open = false;\r\n      this.reset();\r\n    },\r\n    // 取消按钮（数据权限）\r\n    cancelDataScope() {\r\n      this.openDataScope = false;\r\n      this.reset();\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      if (this.$refs.menu!= undefined) {\r\n        this.$refs.menu.setCheckedKeys([]);\r\n      }\r\n      this.menuExpand = false,\r\n        this.menuNodeAll = false,\r\n        this.deptExpand = true,\r\n        this.deptNodeAll = false,\r\n        this.form = {\r\n          roleId: undefined,\r\n          roleName: undefined,\r\n          roleKey: undefined,\r\n          roleSort: 0,\r\n          status: \"0\",\r\n          menuIds: [],\r\n          deptIds: [],\r\n          menuCheckStrictly: true,\r\n          deptCheckStrictly: true,\r\n          remark: undefined\r\n        };\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.dateRange = [];\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange(selection) {\r\n      this.ids = selection.map(item => item.roleId);\r\n      this.single = selection.length!== 1;\r\n      this.multiple = selection.length === 0;\r\n    },\r\n    // 更多操作触发\r\n    handleCommand(command, row) {\r\n      switch (command) {\r\n        case \"handleDataScope\":\r\n          this.handleDataScope(row);\r\n          break;\r\n        case \"handleAuthUser\":\r\n          this.handleAuthUser(row);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    // 树权限（展开/折叠）\r\n    handleCheckedTreeExpand(value, type) {\r\n      if (type == 'menu') {\r\n        let treeList = this.menuOptions;\r\n        for (let i = 0; i < treeList.length; i++) {\r\n          this.$refs.menu.store.nodesMap[treeList[i].id].expanded = value;\r\n        }\r\n      } else if (type == 'dept') {\r\n        let treeList = this.deptOptions;\r\n        for (let i = 0; i < treeList.length; i++) {\r\n          this.$refs.dept.store.nodesMap[treeList[i].id].expanded = value;\r\n        }\r\n      }\r\n    },\r\n    // 树权限（全选/全不选）\r\n    handleCheckedTreeNodeAll(value, type) {\r\n      if (type == 'menu') {\r\n        this.$refs.menu.setCheckedNodes(value? this.menuOptions : []);\r\n      } else if (type == 'dept') {\r\n        this.$refs.dept.setCheckedNodes(value? this.deptOptions : []);\r\n      }\r\n    },\r\n    // 树权限（父子联动）\r\n    handleCheckedTreeConnect(value, type) {\r\n      if (type == 'menu') {\r\n        this.form.menuCheckStrictly = value? true : false;\r\n      } else if (type == 'dept') {\r\n        this.form.deptCheckStrictly = value? true : false;\r\n      }\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.reset();\r\n      this.getMenuTreeselect();\r\n      this.open = true;\r\n      this.title = this.$t('h.system.role.titleAdd');\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset();\r\n      const roleId = row.roleId || this.ids;\r\n      const roleMenu = this.getRoleMenuTreeselect(roleId);\r\n      getRole(roleId).then(response => {\r\n        this.form = response.data;\r\n        this.open = true;\r\n        this.$nextTick(() => {\r\n          roleMenu.then(res => {\r\n            let checkedKeys = res.checkedKeys;\r\n            if (checkedKeys!== null) {\r\n              checkedKeys.forEach((v) => {\r\n                this.$nextTick(() => {\r\n                  this.$refs.menu.setChecked(v, true, false);\r\n                })\r\n              })\r\n            }\r\n          });\r\n        });\r\n        this.title = this.$t('h.system.role.titleEdit');\r\n      });\r\n    },\r\n    /** 选择角色权限范围触发 */\r\n    dataScopeSelectChange(value) {\r\n      if (value!== '2') {\r\n        this.$refs.dept.setCheckedKeys([]);\r\n      }\r\n    },\r\n    /** 分配数据权限操作 */\r\n    handleDataScope(row) {\r\n      this.reset();\r\n      const deptTreeSelect = this.getDeptTree(row.roleId);\r\n      getRole(row.roleId).then(response => {\r\n        this.form = response.data;\r\n        this.openDataScope = true;\r\n        this.$nextTick(() => {\r\n          deptTreeSelect.then(res => {\r\n            this.$refs.dept.setCheckedKeys(res.checkedKeys);\r\n          });\r\n        });\r\n        this.title = this.$t('h.system.role.titleDataScope');\r\n      });\r\n    },\r\n    /** 分配用户操作 */\r\n    handleAuthUser(row) {\r\n      const roleId = row.roleId;\r\n      this.$router.push(\"/system/role-auth/user/\" + roleId);\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm() {\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (valid) {\r\n          if (this.form.roleId!= undefined) {\r\n            this.form.menuIds = this.getMenuAllCheckedKeys();\r\n            updateRole(this.form).then(response => {\r\n              this.$modal.msgSuccess(this.$t('h.system.role.editSuccess'));\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          } else {\r\n            this.form.menuIds = this.getMenuAllCheckedKeys();\r\n            addRole(this.form).then(response => {\r\n              this.$modal.msgSuccess(this.$t('h.system.role.addSuccess'));\r\n              this.open = false;\r\n              this.getList();\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    /** 提交按钮（数据权限） */\r\n    submitDataScope() {\r\n      if (this.form.roleId!= undefined) {\r\n        this.form.deptIds = this.getDeptAllCheckedKeys();\r\n        dataScope(this.form).then(response => {\r\n          this.$modal.msgSuccess(this.$t('h.system.role.editSuccess'));\r\n          this.openDataScope = false;\r\n          this.getList();\r\n        });\r\n      }\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const roleIds = row.roleId || this.ids;\r\n      this.$modal.confirm(this.$t('h.system.role.confirmDelete', { roleIds: roleIds })).then(() => {\r\n        return delRole(roleIds);\r\n      }).then(() => {\r\n        this.getList();\r\n        this.$modal.msgSuccess(this.$t('h.system.role.deleteSuccess'));\r\n      }).catch(() => {});\r\n    },\r\n    /** 导出按钮操作 */\r\n    handleExport() {\r\n      this.download('system/role/export', {\r\n     ...this.queryParams\r\n      }, `role_${new Date().getTime()}.xlsx`)\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}